(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/layers/LayerView":1461,"esri/views/2d/tiling/TileSpan":1469,"esri/core/pbf":1471,"esri/views/2d/layers/LayerView2D":1475,"esri/views/2d/tiling/LODInfo":1476,"esri/views/2d/tiling/TileCoverage":1477,"esri/views/2d/tiling/TileInfoView":1480,"esri/core/libs/quickselect/quickselect":1487,"esri/core/libs/rbush/rbush":1494,"esri/layers/graphics/data/projectionSupport":1511,"esri/views/2d/layers/features/tileRenderers/support/visualVariablesUtils":1517,"esri/views/2d/layers/graphics/graphicsUtils":1518,"esri/views/2d/layers/features/support/AttributeStore":1546,"esri/geometry/projection":1588,"esri/views/2d/layers/features/support/Tile":1589,"esri/views/2d/layers/graphics/GraphicsView2D":1634,"esri/core/MapPool":1673,"esri/geometry/pe":1674,"esri/geometry/support/GeographicTransformation":1675,"esri/geometry/support/GeographicTransformationStep":1676,"esri/views/2d/layers/features/support/TileStore":1677,"esri/views/layers/GraphicsView":1678,"esri/views/2d/layers/graphics/GraphicContainer":2222,"esri/views/2d/layers/graphics/GraphicProcessingQueue":2223,"esri/views/2d/layers/graphics/GraphicStore":2224,"esri/views/2d/layers/graphics/GraphicStoreItem":2225})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1461:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(2),i(1),i(37),i(345),i(255),i(11),i(201),i(8),i(0)],void 0===(n=function(e,t,i,r,n,o,a,s,u,l,p){return function(e){function t(t){var i=e.call(this)||this;return i.layer=null,i.parent=null,i.view=null,i}return i(t,e),t.prototype.initialize=function(){var e=this;this.addResolvingPromise(this.layer),this.when().catch(function(t){if("layerview:create-error"!==t.name){var i=e.layer&&e.layer.id||"no id",r=e.layer&&e.layer.title||"no title";return s.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+r+"', id: '"+i+"')",t),l.reject(t)}})},t.prototype.destroy=function(){this.layer=this.view=this.parent=null},Object.defineProperty(t.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!this.suspended&&this.isUpdating()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullOpacity",{get:function(){var e=function(e){return null==e?1:e};return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))},enumerable:!0,configurable:!0}),t.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},t.prototype.isUpdating=function(){return!1},r([p.property()],t.prototype,"layer",void 0),r([p.property()],t.prototype,"parent",void 0),r([p.property({readOnly:!0,dependsOn:["view","visible","layer.loaded","parent.suspended"]})],t.prototype,"suspended",null),r([p.property({type:Boolean,dependsOn:["suspended"],readOnly:!0})],t.prototype,"updating",null),r([p.property()],t.prototype,"view",void 0),r([p.property({dependsOn:["layer.visible"]})],t.prototype,"visible",null),r([p.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],t.prototype,"fullOpacity",null),r([p.subclass("esri.views.layers.LayerView")],t)}(p.declared(o,n,a.Identifiable,u))}.apply(null,r))||(e.exports=n)},1469:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(85)],void 0===(n=function(e,t,i){return function(){function e(e,t,i){this.row=e,this.colFrom=t,this.colTo=i}return e.pool=new i(e,!0),e}()}.apply(null,r))||(e.exports=n)},1471:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(22)],void 0===(n=function(e,t,i){var r=i("esri-text-decoder")?TextDecoder:null;return function(){function e(e,t,i,n){this._tag=0,this._dataType=99,this._data=e,this._dataView=t,this._pos=i||0,this._end=n||e.byteLength,this._textDecoder=r?new r("utf-8"):null}return e.prototype.clone=function(){return new e(this._data,this._dataView,this._pos,this._end)},e.prototype.pos=function(){return this._pos},e.prototype.next=function(e){for(;;){if(this._pos===this._end)return!1;var t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0},e.prototype.empty=function(){return this._pos>=this._end},e.prototype.tag=function(){return this._tag},e.prototype.getInt32=function(){return this._decodeVarint()},e.prototype.getInt64=function(){return this._decodeVarint()},e.prototype.getUInt32=function(){var e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))},e.prototype.getUInt64=function(){return this._decodeVarint()},e.prototype.getSInt32=function(){var e=this.getUInt32();return e>>>1^-(1&e)|0},e.prototype.getSInt64=function(){return this._decodeSVarint()},e.prototype.getBool=function(){var e=0!==this._data[this._pos];return this._skip(1),e},e.prototype.getEnum=function(){return this._decodeVarint()},e.prototype.getFixed64=function(){var e=this._dataView,t=this._pos,i=e.getUint32(t,!0)+4294967296*e.getUint32(t+4,!0);return this._skip(8),i},e.prototype.getSFixed64=function(){var e=this._dataView,t=this._pos,i=e.getUint32(t,!0)+4294967296*e.getInt32(t+4,!0);return this._skip(8),i},e.prototype.getDouble=function(){var e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e},e.prototype.getFixed32=function(){var e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e},e.prototype.getSFixed32=function(){var e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e},e.prototype.getFloat=function(){var e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e},e.prototype.getString=function(){var e=this._getLength(),t=this._pos,i=this._toString(this._data,t,t+e);return this._skip(e),i},e.prototype.getBytes=function(){var e=this._getLength(),t=this._pos,i=this._toBytes(this._data,t,t+e);return this._skip(e),i},e.prototype.getMessage=function(){var t=this._getLength(),i=this._pos,r=new e(this._data,this._dataView,i,i+t);return this._skip(t),r},e.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}},e.prototype._skip=function(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e},e.prototype._decodeVarint=function(){var e,t=this._data,i=this._pos,r=0;if(this._end-i>=10)do{if(r|=127&(e=t[i++]),0==(128&e))break;if(r|=(127&(e=t[i++]))<<7,0==(128&e))break;if(r|=(127&(e=t[i++]))<<14,0==(128&e))break;if(r|=(127&(e=t[i++]))<<21,0==(128&e))break;if(r+=268435456*(127&(e=t[i++])),0==(128&e))break;if(r+=34359738368*(127&(e=t[i++])),0==(128&e))break;if(r+=4398046511104*(127&(e=t[i++])),0==(128&e))break;if(r+=562949953421312*(127&(e=t[i++])),0==(128&e))break;if(r+=72057594037927940*(127&(e=t[i++])),0==(128&e))break;if(r+=0x8000000000000000*(127&(e=t[i++])),0==(128&e))break;throw new Error("Varint too long!")}while(0);else{for(var n=1;i!==this._end&&0!=(128&(e=t[i]));)++i,r+=(127&e)*n,n*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=e*n}return this._pos=i,r},e.prototype._decodeSVarint=function(){var e=this._decodeVarint();return e%2?-(e+1)/2:e/2},e.prototype._getLength=function(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()},e.prototype._toString=function(e,t,i){if(i=Math.min(this._end,i),this._textDecoder){var r=e.subarray(t,i);return this._textDecoder.decode(r)}for(var n="",o="",a=t;a<i;++a){var s=e[a];128&s?o+="%"+s.toString(16):(n+=decodeURIComponent(o)+String.fromCharCode(s),o="")}return o.length&&(n+=decodeURIComponent(o)),n},e.prototype._toBytes=function(e,t,i){return i=Math.min(this._end,i),new Uint8Array(e.buffer,t,i-t)},e}()}.apply(null,r))||(e.exports=n)},1475:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(2),i(1),i(28),i(0),i(1461)],void 0===(n=function(e,t,i,r,n,o,a){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.attached=!1,t.lastUpdateId=-1,t.moving=!1,t.updateRequested=!1,t}return i(t,e),t.prototype.initialize=function(){var e=this;this.when(function(){e.requestUpdate()});var t=function(){return e.notifyChange("rendering")};this.handles.add([n.init(this,"suspended",function(t){e.container&&(e.container.visible=!t),e.view&&!t&&e.updateRequested&&e.view.requestLayerViewUpdate(e)},!0),n.init(this,"fullOpacity",function(t){e.container&&(e.container.opacity=t)},!0),n.on(this,"container","post-render",t),n.on(this,"container","will-render",t)])},t.prototype.destroy=function(){this.attached&&(this.attached=!1,this.detach()),this.handles.remove("initialize"),this.updateRequested=!1,this.layer=null},Object.defineProperty(t.prototype,"rendering",{get:function(){return this.attached&&!this.suspended&&(this.moving||this.container.renderRequested||this.isRendering())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!this.suspended&&(!this.attached||this.updateRequested||this.isUpdating())},enumerable:!0,configurable:!0}),t.prototype.isVisibleAtScale=function(e){var t=!0,i=this.layer,r=i.minScale,n=i.maxScale;if(null!=r&&null!=n){var o=!r,a=!n;!o&&e<=r&&(o=!0),!a&&e>=n&&(a=!0),t=o&&a}return t},t.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestLayerViewUpdate(this))},t.prototype.processUpdate=function(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1},t.prototype.isUpdating=function(){return!1},t.prototype.isRendering=function(){return!1},t.prototype.canResume=function(){var e=this.inherited(arguments);return e&&(e=this.isVisibleAtScale(this.view.scale)),e},r([o.property()],t.prototype,"attached",void 0),r([o.property()],t.prototype,"container",void 0),r([o.property()],t.prototype,"moving",void 0),r([o.property({dependsOn:["attached","suspended","moving"]})],t.prototype,"rendering",null),r([o.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],t.prototype,"suspended",void 0),r([o.property({readOnly:!0})],t.prototype,"updateParameters",void 0),r([o.property()],t.prototype,"updateRequested",void 0),r([o.property({dependsOn:["updateRequested","attached"]})],t.prototype,"updating",null),r([o.property()],t.prototype,"view",void 0),r([o.subclass("esri.views.2d.layers.LayerView2D")],t)}(o.declared(a))}.apply(null,r))||(e.exports=n)},1476:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(94),i(346)],void 0===(n=function(e,t,i,r){function n(e,t){return[e,t]}function o(e,t,i){return e[0]=t,e[1]=i,e}var a=new r("0/0/0/0");return function(){function e(e,t,i,r,n,o,a,s,u,l,p,h){this.level=e,this.resolution=t,this.scale=i,this.origin=r,this.first=n,this.last=o,this.size=a,this.norm=s,this.worldStart=u,this.worldEnd=l,this.worldSize=p,this.wrap=h}return e.create=function(t,r,a){var s,u,l,p,h=i.getInfo(t.spatialReference),c=n(t.origin.x,t.origin.y),d=n(t.size[0]*r.resolution,t.size[1]*r.resolution),f=n(-1/0,-1/0),_=n(1/0,1/0),g=n(1/0,1/0);return a&&(o(f,Math.max(0,Math.floor((a.xmin-c[0])/d[0])),Math.max(0,Math.floor((c[1]-a.ymax)/d[1]))),o(_,Math.max(0,Math.floor((a.xmax-c[0])/d[0])),Math.max(0,Math.floor((c[1]-a.ymin)/d[1]))),o(g,_[0]-f[0]+1,_[1]-f[1]+1)),t.isWrappable?(s=n(Math.ceil(Math.round(2*h.origin[1]/r.resolution)/t.size[0]),g[1]),u=n(Math.floor((h.origin[0]-c[0])/d[0]),f[1]),l=n(s[0]+u[0]-1,_[1]),p=!0):(u=f,l=_,s=g,p=!1),new e(r.level,r.resolution,r.scale,c,f,_,g,d,u,l,s,p)},e.prototype.normalizeCol=function(e){if(!this.wrap)return e;var t=this.worldSize[0];return e<0?t-1-Math.abs((e+1)%t):e%t},e.prototype.denormalizeCol=function(e,t){return this.wrap?this.worldSize[0]*t+e:e},e.prototype.getWorldForColumn=function(e){return this.wrap?Math.floor(e/this.worldSize[0]):0},e.prototype.getFirstColumnForWorld=function(e){return e*this.worldSize[0]+this.first[0]},e.prototype.getLastColumnForWorld=function(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1},e.prototype.getColumnForX=function(e){return(e-this.origin[0])/this.norm[0]},e.prototype.getXForColumn=function(e){return this.origin[0]+e*this.norm[0]},e.prototype.getRowForY=function(e){return(this.origin[1]-e)/this.norm[1]},e.prototype.getYForRow=function(e){return this.origin[1]-e*this.norm[1]},e.prototype.getTileBounds=function(e,t,i){void 0===i&&(i=!1),a.set(t);var r=i?a.col:this.denormalizeCol(a.col,a.world),n=a.row;return function(e,t,i,r,n){e[0]=t,e[1]=i,e[2]=r,e[3]=n}(e,this.getXForColumn(r),this.getYForRow(n+1),this.getXForColumn(r+1),this.getYForRow(n)),e},e.prototype.getTileCoords=function(e,t,i){void 0===i&&(i=!1),a.set(t);var r=i?a.col:this.denormalizeCol(a.col,a.world);return Array.isArray(e)?o(e,this.getXForColumn(r),this.getYForRow(a.row)):(e.x=this.getXForColumn(r),e.y=this.getYForRow(a.row)),e},e}()}.apply(null,r))||(e.exports=n)},1477:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(204),i(85),i(1469)],void 0===(n=function(e,t,i,r,n){return function(){function e(e){this.lodInfo=e,this.spans=i.acquire()}return e.prototype.release=function(){for(var e=0,t=this.spans;e<t.length;e++){var r=t[e];n.pool.release(r)}i.release(this.spans)},e.prototype.forEach=function(e,t){var i=this.spans,r=this.lodInfo,n=r.level;if(0!==i.length)for(var o=0,a=i;o<a.length;o++)for(var s=a[o],u=s.row,l=s.colFrom,p=s.colTo,h=l;h<=p;h++)e.call(t,n,u,r.normalizeCol(h),r.getWorldForColumn(h))},e.pool=new r(e,!0),e}()}.apply(null,r))||(e.exports=n)},1480:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(94),i(1476),i(1477),i(346),i(1469)],void 0===(n=function(e,t,i,r,n,o,a){var s=new o("0/0/0/0"),u=function(){function e(e,t,i,r,n,o,a,s){this.x=e,this.ymin=t,this.ymax=i,this.invM=r,this.leftAdjust=n,this.rightAdjust=o,this.leftBound=a,this.rightBound=s}return e.create=function(t,i){var r;t[1]>i[1]&&(t=(r=[i,t])[0],i=r[1]);var n=t[0],o=t[1],a=i[0],s=i[1],u=a-n,l=s-o,p=0!==l?u/l:0,h=(Math.ceil(o)-o)*p,c=(Math.floor(o)-o)*p;return new e(n,Math.floor(o),Math.ceil(s),p,u<0?h:c,u<0?c:h,u<0?a:n,u<0?n:a)},e.prototype.incrRow=function(){this.x+=this.invM},e.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)},e.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)},e}(),l=[[0,0],[0,0],[0,0],[0,0]];return function(){function e(e,t){var i=this;this.tileInfo=e,this.fullExtent=t,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};var n=e.lods.slice();n.sort(function(e,t){return t.scale-e.scale});var o=this._lodInfos=n.map(function(i){return r.create(e,i,t)});n.forEach(function(e,t){i._infoByLevel[e.level]=o[t],i._infoByScale[e.scale]=o[t],i.scales[t]=e.scale},this),this._wrap=e.isWrappable}return Object.defineProperty(e.prototype,"spatialReference",{get:function(){return this.tileInfo.spatialReference},enumerable:!0,configurable:!0}),e.prototype.getLODInfoAt=function(e){return this._infoByLevel["number"==typeof e?e:e.level]},e.prototype.getTileBounds=function(e,t,i){void 0===i&&(i=!1),s.set(t);var r=this._infoByLevel[s.level];return r?r.getTileBounds(e,s,i):e},e.prototype.getTileCoords=function(e,t,i){void 0===i&&(i=!1),s.set(t);var r=this._infoByLevel[s.level];return r?r.getTileCoords(e,s,i):e},e.prototype.getTileCoverage=function(e,t,i){void 0===t&&(t=192),void 0===i&&(i="closest");var r,o,s,p="closest"===i?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),h=n.pool.acquire(p),c=this._wrap,d=1/0,f=-1/0,_=h.spans;l[0][0]=l[0][1]=l[1][1]=l[3][0]=-t,l[1][0]=l[2][0]=e.size[0]+t,l[2][1]=l[3][1]=e.size[1]+t;for(var g=0,y=l;g<y.length;g++){var v=y[g];e.toMap(v,v),v[0]=p.getColumnForX(v[0]),v[1]=p.getRowForY(v[1])}for(var m=[],b=3,x=0;x<4;x++)if(l[x][1]!==l[b][1]){var P=u.create(l[x],l[b]);d=Math.min(P.ymin,d),f=Math.max(P.ymax,f),void 0===m[P.ymin]&&(m[P.ymin]=[]),m[P.ymin].push(P),b=x}else b=x;if(null==d||null==f||f-d>100)return null;var w=[];for(r=d;r<f;){null!=m[r]&&(w=w.concat(m[r])),o=1/0,s=-1/0;for(x=w.length-1;x>=0;x--){P=w[x];o=Math.min(o,P.getLeftCol()),s=Math.max(s,P.getRightCol())}if(o=Math.floor(o),s=Math.floor(s),r>=p.first[1]&&r<=p.last[1])if(c)if(p.size[0]<p.worldSize[0]){var S=Math.floor(s/p.worldSize[0]);for(x=Math.floor(o/p.worldSize[0]);x<=S;x++)_.push(new a(r,Math.max(p.getFirstColumnForWorld(x),o),Math.min(p.getLastColumnForWorld(x),s)))}else _.push(new a(r,o,s));else o>p.last[0]||s<p.first[0]||(o=Math.max(o,p.first[0]),s=Math.min(s,p.last[0]),_.push(new a(r,o,s)));r+=1;for(x=w.length-1;x>=0;x--){(P=w[x]).ymax>=r?P.incrRow():w.splice(x,1)}}return h},e.prototype.getTileParentId=function(e){s.set(e);var t=this._infoByLevel[s.level],i=this._lodInfos.indexOf(t)-1;return i<0?null:(this._getTileIdAtLOD(s,this._lodInfos[i],s),s.id)},e.prototype.getTileResolution=function(e){var t=this._infoByLevel["object"==typeof e?e.level:e];return t?t.resolution:-1},e.prototype.getTileScale=function(e){var t=this._infoByLevel[e.level];return t?t.scale:-1},e.prototype.intersects=function(e,t){s.set(t);var i=this._infoByLevel[s.level],r=e.lodInfo;if(r.resolution>i.resolution){this._getTileIdAtLOD(s,r,s);for(var n=r.denormalizeCol(s.col,s.world),o=0,a=e.spans;o<a.length;o++){var u=a[o];if(u.row===s.row&&u.colFrom<=n&&u.colTo>=n)return!0}}if(r.resolution<i.resolution){var l=e.spans.reduce(function(e,t){return e[0]=Math.min(e[0],t.row),e[1]=Math.max(e[1],t.row),e[2]=Math.min(e[2],t.colFrom),e[3]=Math.max(e[3],t.colTo),e},[1/0,-1/0,1/0,-1/0]),p=l[0],h=l[1],c=l[2],d=l[3],f=i.denormalizeCol(s.col,s.world),_=r.getColumnForX(i.getXForColumn(f)),g=r.getRowForY(i.getYForRow(s.row)),y=r.getColumnForX(i.getXForColumn(f+1))-1,v=r.getRowForY(i.getYForRow(s.row+1))-1;return!(_>d||y<c||g>h||v<p)}var m=r.denormalizeCol(s.col,s.world);return e.spans.some(function(e){return e.row===s.row&&e.colFrom<=m&&e.colTo>=m})},e.prototype.normalizeBounds=function(e,t,r){if(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this._wrap){var n=i.getInfo(this.tileInfo.spatialReference),o=-r*(n.valid[1]-n.valid[0]);e[0]+=o,e[2]+=o}return e},e.prototype.getSmallestInfoForScale=function(e){var t=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>t[0])return this._infoByScale[t[0]];for(var i=1;i<t.length-1;i++)if(e>t[i]+1e-6)return this._infoByScale[t[i-1]];return this._infoByScale[t[t.length-1]]},e.prototype.getClosestInfoForScale=function(e){var t=this.scales;return this._infoByScale[e]?this._infoByScale[e]:(e=t.reduce(function(t,i,r,n){return Math.abs(i-e)<Math.abs(t-e)?i:t},t[0]),this._infoByScale[e])},e.prototype.scaleToLevel=function(e){var t=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(var i=t.length-1;i>=0;i--)if(e<t[i]){return i===t.length-1?this._infoByScale[t[t.length-1]].level:this._infoByScale[t[i]].level+(t[i]-e)/(t[i]-t[i+1])}return this._infoByScale[t[0]].level},e.prototype.scaleToZoom=function(e){return this.tileInfo.scaleToZoom(e)},e.prototype._getTileIdAtLOD=function(e,t,i){var r=this._infoByLevel[i.level];return e.set(i),t.resolution<r.resolution?null:t.resolution===r.resolution?e:(e.level=t.level,e.col=Math.floor(i.col*r.resolution/t.resolution+.01),e.row=Math.floor(i.row*r.resolution/t.resolution+.01),e)},e}()}.apply(null,r))||(e.exports=n)},1487:function(e,t,i){var r;void 0===(r=function(){"use strict";function e(i,r,n,o,a){for(;o>n;){if(o-n>600){var s=o-n+1,u=r-n+1,l=Math.log(s),p=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*p*(s-p)/s)*(u-s/2<0?-1:1);e(i,r,Math.max(n,Math.floor(r-u*p/s+h)),Math.min(o,Math.floor(r+(s-u)*p/s+h)),a)}var c=i[r],d=n,f=o;for(t(i,n,r),a(i[o],c)>0&&t(i,n,o);d<f;){for(t(i,d,f),d++,f--;a(i[d],c)<0;)d++;for(;a(i[f],c)>0;)f--}0===a(i[n],c)?t(i,n,f):t(i,++f,o),f<=r&&(n=f+1),r<=f&&(o=f-1)}}function t(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function i(e,t){return e<t?-1:e>t?1:0}return function(t,r,n,o,a){e(t,r,n||0,o||t.length-1,a||i)}}.apply(null,[]))||(e.exports=r)},1494:function(e,t,i){var r,n;r=[i(1487)],void 0===(n=function(e){"use strict";function t(e,i){if(!(this instanceof t))return new t(e,i);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&("function"==typeof i?this.toBBox=i:this._initFormat(i)),this.clear()}function i(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function r(e,t){n(e,0,e.children.length,t,e)}function n(e,t,i,r,n){n||(n=f(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var a,s=t;s<i;s++)a=e.children[s],o(n,e.leaf?r(a):a);return n}function o(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function a(e,t){return e.minX-t.minX}function s(e,t){return e.minY-t.minY}function u(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function l(e){return e.maxX-e.minX+(e.maxY-e.minY)}function p(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function h(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,n-i)*Math.max(0,o-r)}function c(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function d(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function f(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(t,i,r,n,o){for(var a,s=[i,r];s.length;)(r=s.pop())-(i=s.pop())<=n||(a=i+Math.ceil((r-i)/n/2)*n,e(t,a,i,r,o),s.push(i,a,a,r))}return t.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!d(e,t))return i;for(var n,o,a,s,u=[];t;){for(n=0,o=t.children.length;n<o;n++)a=t.children[n],d(e,s=t.leaf?r(a):a)&&(t.leaf?i.push(a):c(e,s)?this._all(a,i):u.push(a));t=u.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!d(e,t))return!1;for(var r,n,o,a,s=[];t;){for(r=0,n=t.children.length;r<n;r++)if(o=t.children[r],d(e,a=t.leaf?i(o):o)){if(t.leaf||c(e,a))return!0;s.push(o)}t=s.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=f([]),this},remove:function(e,t){if(!e)return this;for(var r,n,o,a,s=this.data,u=this.toBBox(e),l=[],p=[];s||l.length;){if(s||(s=l.pop(),n=l[l.length-1],r=p.pop(),a=!0),s.leaf&&-1!==(o=i(e,s.children,t)))return s.children.splice(o,1),l.push(s),this._condense(l),this;a||s.leaf||!c(s,u)?n?(r++,s=n.children[r],a=!1):s=null:(l.push(s),p.push(r),r=0,n=s,s=s.children[0])}return this},toBBox:function(e){return e},compareMinX:a,compareMinY:s,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,n){var o,a=i-t+1,s=this._maxEntries;if(a<=s)return r(o=f(e.slice(t,i+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,n-1))),(o=f([])).leaf=!1,o.height=n;var u,l,p,h,c=Math.ceil(a/s),d=c*Math.ceil(Math.sqrt(s));for(_(e,t,i,d,this.compareMinX),u=t;u<=i;u+=d)for(_(e,u,p=Math.min(u+d-1,i),c,this.compareMinY),l=u;l<=p;l+=c)h=Math.min(l+c-1,p),o.children.push(this._build(e,l,h,n-1));return r(o,this.toBBox),o},_chooseSubtree:function(e,t,i,r){for(var n,o,a,s,l,h,c,d;r.push(t),!t.leaf&&r.length-1!==i;){for(c=d=1/0,n=0,o=t.children.length;n<o;n++)l=u(a=t.children[n]),(h=p(e,a)-l)<d?(d=h,c=l<c?l:c,s=a):h===d&&l<c&&(c=l,s=a);t=s||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,n=i?e:r(e),a=[],s=this._chooseSubtree(n,this.data,t,a);for(s.children.push(e),o(s,n);t>=0&&a[t].children.length>this._maxEntries;)this._split(a,t),t--;this._adjustParentBBoxes(n,a,t)},_split:function(e,t){var i=e[t],n=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,n);var a=this._chooseSplitIndex(i,o,n),s=f(i.children.splice(a,i.children.length-a));s.height=i.height,s.leaf=i.leaf,r(i,this.toBBox),r(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(i,s)},_splitRoot:function(e,t){this.data=f([e,t]),this.data.height=e.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,o,a,s,l,p,c,d;for(p=c=1/0,r=t;r<=i-t;r++)s=h(o=n(e,0,r,this.toBBox),a=n(e,r,i,this.toBBox)),l=u(o)+u(a),s<p?(p=s,d=r,c=l<c?l:c):s===p&&l<c&&(c=l,d=r);return d},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:a,n=e.leaf?this.compareMinY:s;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,n)&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var a,s,u=this.toBBox,p=n(e,0,t,u),h=n(e,i-t,i,u),c=l(p)+l(h);for(a=t;a<i-t;a++)s=e.children[a],o(p,e.leaf?u(s):s),c+=l(p);for(a=i-t-1;a>=t;a--)s=e.children[a],o(h,e.leaf?u(s):s),c+=l(h);return c},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)o(t[r],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)0===e[i].children.length?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():r(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}},t}.apply(null,r))||(e.exports=n)},1511:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(10),i(12),i(15),i(8),i(1588),i(94),i(56)],void 0===(n=function(e,t,i,r,n,o,a,s,u){function l(e,t){var i,r,n;if(!t)return null;if("x"in t){var o={x:0,y:0};return i=e(t.x,t.y,f),o.x=i[0],o.y=i[1],null!=t.z&&(o.z=t.z),null!=t.m&&(o.m=t.m),o}if("xmin"in t){o={xmin:0,ymin:0,xmax:0,ymax:0};return r=e(t.xmin,t.ymin,f),o.xmin=r[0],o.ymin=r[1],n=e(t.xmax,t.ymax,f),o.xmax=n[0],o.ymax=n[1],t.hasZ&&(o.zmin=t.zmin,o.zmax=t.zmax,o.hasZ=!0),t.hasM&&(o.mmin=t.mmin,o.mmax=t.mmax,o.hasM=!0),o}return"rings"in t?{rings:p(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:p(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:h(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:void 0}function p(e,t){for(var i=[],r=0,n=e;r<n.length;r++){var o=n[r];i.push(h(o,t))}return i}function h(e,t){for(var i=[],r=0,n=e;r<n.length;r++){var o=n[r],a=t(o[0],o[1],[0,0]);i.push(a),o.length>2&&a.push(o[2]),o.length>3&&a.push(o[3])}return i}function c(e,t){return!(!s.isValid(e)||!s.isValid(t)||s.equals(e,t)||u.canProject(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var d="feature-store:unsupported-query",f=[0,0];t.checkProjectionSupport=function(e,t){return r(this,void 0,void 0,function(){var r,o,s;return i(this,function(i){if(!t)return[2];if(Array.isArray(e)){for(r=0,o=e;r<o.length;r++)if(c((s=o[r]).geometry&&s.geometry.spatialReference,t)){if(a.isSupported())return[2,a.load()];throw new n(d,"projection not supported",{inSpatialReference:e,outSpatialReference:t})}return[2]}if(!c(e,t))return[2];if(a.isSupported())return[2,a.load()];throw new n(d,"projection not supported",{inSpatialReference:e,outSpatialReference:t})})})};var _=l.bind(null,u.lngLatToXY),g=l.bind(null,u.xyToLngLat);t.project=function(e,t,i){return i||(i=t,t=e.spatialReference),s.isValid(t)&&s.isValid(i)&&!s.equals(t,i)?u.canProject(t,i)?s.isWebMercator(i)?_(e):g(e):a.projectMany([e],t,i,null,!0)[0]:e};var y=new(function(){function e(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}return e.prototype.push=function(e,t,n){return r(this,void 0,void 0,function(){var r,a=this;return i(this,function(i){return e&&e.length&&t&&n&&!s.equals(t,n)||o.resolve(e),r={geometries:e,inSpatialReference:t,outSpatialReference:n,resolve:null},this._jobs.push(r),[2,o.create(function(e){r.resolve=e,null===a._timer&&(a._timer=setTimeout(a._process,10))},function(){var e=a._jobs.indexOf(r);e>-1&&a._jobs.splice(e,1)})]})})},e.prototype._process=function(){this._timer=null;var e=this._jobs.shift();if(e){var t=e.geometries,i=e.inSpatialReference,r=e.outSpatialReference;(0,e.resolve)(u.canProject(i,r)?s.isWebMercator(r)?t.map(_):t.map(g):a.projectMany(t,i,r,null,!0)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}},e}());t.projectMany=function(e,t,n){return r(this,void 0,void 0,function(){return i(this,function(i){return[2,y.push(e,t,n)]})})}}.apply(null,r))||(e.exports=n)},1517:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(17),i(1462),i(208)],void 0===(n=function(e,t,i,r,n){function o(e){return{value:e.value,size:i.toPt(e.size)}}function a(e){return e.map(function(e){return o(e)})}function s(e){if("string"==typeof e||"number"==typeof e)return i.toPt(e);var t=e;return{type:"size",expression:t.expression,stops:a(t.stops)}}function u(e){var t={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if(r.Utils.isString(e.field)){if(!e.stops)return null;if(e.stops.length>8)return null;for(var i=e.stops,n=0;n<8;++n){var o=i[Math.min(n,i.length-1)];t.values[n]=o.value,t.opacities[n]=o.opacity}}else{if(!(e.stops&&e.stops.length>=0))return null;var a=e.stops&&e.stops.length>=0&&e.stops[0].opacity;for(n=0;n<8;n++)t.values[n]=1/0,t.opacities[n]=a}return t}Object.defineProperty(t,"__esModule",{value:!0});var l=r.enums.WGLVVFlag;t.getVisualVariableSizeValueRepresentationRatio=function(e,t){if(!e||!t)return e;switch(t){case"radius":case"distance":return 2*e;case"diameter":case"width":return e;case"area":return Math.sqrt(e)}return e},t.stopToSizeStop=o,t.normalizeSizeStops=a,t.normalizeSizeElement=s,t.getVisualVariablesFields=function(e){var t=e&&e.length>0?{}:null;return t&&e.forEach(function(e){var i=e.type;e.field&&(t[i]=e.field)}),t},t.convertVisualVariables=function(e){var t=e&&e.length>0?{}:null,o=t?{}:null;if(!t)return{vvFields:t,vvRanges:o};for(var p=0,h=e;p<h.length;p++){var c=h[p],d=c.type;if(c.field&&(t[d]=c.field),"size"===d){o.size||(o.size={});var f=c;switch(r.getTypeOfSizeVisualVariable(f)){case l.SIZE_MINMAX_VALUE:o.size.minMaxValue={minDataValue:f.minDataValue,maxDataValue:f.maxDataValue,minSize:s(f.minSize),maxSize:s(f.maxSize)};break;case l.SIZE_SCALE_STOPS:o.size.scaleStops={stops:a(f.stops)};break;case l.SIZE_FIELD_STOPS:for(var _=[],g=[],y=a(f.stops),v=y.length,m=0;m<6;m++){var b=y[Math.min(m,v-1)];_.push(b.value),g.push(i.pt2px(b.size))}o.size.fieldStops={values:_,sizes:g};break;case l.SIZE_UNIT_VALUE:o.size.unitValue={unit:f.valueUnit,valueRepresentation:f.valueRepresentation}}}else if("color"===d){var x=n.convertVisualVariables([c],{modelSize:null,symbolSize:null,unitInMeters:1,transformation:null});for(o.color=x.color,m=0;m<32;m+=4)r.color.premultiplyAlpha(o.color.colors,m,!0)}else if("opacity"===d)o.opacity=u(c);else if("rotation"===d){var P=c;o.rotation={type:P.rotationType}}}return{vvFields:t,vvRanges:o}}}.apply(null,r))||(e.exports=n)},1518:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(14),i(17),i(261),i(561),i(40),i(256),i(39),i(35),i(559),i(362),i(71),i(1463),i(94),i(94),i(1462)],void 0===(n=function(e,t,i,r,n,o,a,s,u,l,p,h,c,d,f,_,g){function y(e,t,i,o,s){var u,l,p=r.pt2px(i.xoffset),h=r.pt2px(i.yoffset),c=E*i.angle,d=E*s;switch(i.type){case"simple-marker":var f=i;u=l=r.pt2px(f.size);break;case"picture-marker":var _=i;u=r.pt2px(_.width),l=r.pt2px(_.height)}var g=n.mat2d.identity(G);n.mat2d.translate(g,g,a.vec2.set(C,e,t)),n.mat2d.rotate(g,g,d-c),n.mat2d.scale(g,g,a.vec2.set(C,o,-o)),n.mat2d.translate(g,g,a.vec2.set(C,p,-h));var y=[0,0];a.vec2.transformMat2d(y,a.vec2.set(C,-.5*u,-.5*l),g);var v=[0,0];a.vec2.transformMat2d(v,a.vec2.set(C,-.5*u,.5*l),g);var m=[0,0];a.vec2.transformMat2d(m,a.vec2.set(C,.5*u,-.5*l),g);var b=[0,0];return a.vec2.transformMat2d(b,a.vec2.set(C,.5*u,.5*l),g),{rings:[[y,m,b,v,y]]}}function v(e,t,i,o,s){var u=g.CIMSymbolHelper.getEnvelope(i.data);if(!u)return null;var l=r.pt2px(u.width),p=r.pt2px(u.height),h=r.pt2px(u.x),c=r.pt2px(u.y),d=0*E,f=E*s,_=n.mat2d.identity(G);n.mat2d.translate(_,_,a.vec2.set(C,e,t)),n.mat2d.rotate(_,_,f-d),n.mat2d.scale(_,_,a.vec2.set(C,o,-o)),n.mat2d.translate(_,_,a.vec2.set(C,h,-c));var y=[0,0];a.vec2.transformMat2d(y,a.vec2.set(C,-.5*l,-.5*p),_);var v=[0,0];a.vec2.transformMat2d(v,a.vec2.set(C,-.5*l,.5*p),_);var m=[0,0];a.vec2.transformMat2d(m,a.vec2.set(C,.5*l,-.5*p),_);var b=[0,0];return a.vec2.transformMat2d(b,a.vec2.set(C,.5*l,.5*p),_),{rings:[[y,m,b,v,y]]}}function m(e,t,i,o,s,u){var l=g.alignmentUtils.getYAnchorDirection(i.verticalAlignment||"baseline"),p="baseline"===(i.verticalAlignment||"baseline"),h=r.pt2px(i.xoffset),c=r.pt2px(i.yoffset),d=r.pt2px(i.font.size)/24,f=4*d,_=p?25*d:o[1]+(1+l)*o[3]*.5,y=E*i.angle,v=E*u,m=n.mat2d.identity(G);n.mat2d.translate(m,m,a.vec2.set(C,e,t)),n.mat2d.rotate(m,m,v-y),n.mat2d.scale(m,m,a.vec2.set(C,s,-s)),n.mat2d.translate(m,m,a.vec2.set(C,h,-c)),n.mat2d.translate(m,m,a.vec2.set(C,-f,-f-_));var b=[0,0];a.vec2.transformMat2d(b,a.vec2.set(C,o[0],o[1]),m);var x=[0,0];a.vec2.transformMat2d(x,a.vec2.set(C,o[0],o[1]+o[3]),m);var P=[0,0];a.vec2.transformMat2d(P,a.vec2.set(C,o[0]+o[2],o[1]),m);var w=[0,0];return a.vec2.transformMat2d(w,a.vec2.set(C,o[0]+o[2],o[1]+o[3]),m),{rings:[[b,P,w,x,b]]}}function b(e,t,i){if(!i||0===i.glyphMosaicItems.length)return e;var n=g.bidiText(t.text),o=n[0],a=n[1],s=g.alignmentUtils.getJustification(t.horizontalAlignment||"center"),u=g.alignmentUtils.getXAnchorDirection(t.horizontalAlignment||"center"),l=i.glyphMosaicItems,p=new g.TextShapingNew([l],g.definitions.TEXT_MAX_WIDTH,g.definitions.TEXT_LINE_HEIGHT,g.definitions.TEXT_SPACING,[0,.5*-O],.5*(1-u),0,s).getShaping(o,a),h=g.fontUtils.getFontDecorationTop(t.font.decoration);isNaN(h)||g.TextShapingNew.addDecoration(p,h);var c=g.TextShapingNew.getBox(p),d=r.pt2px(t.font.size)/L;return e[0]=d*c.x,e[1]=d*c.y,e[2]=d*c.width,e[3]=d*c.height,e}function x(e,t,i,r,n,o,a){var s;switch(r.type){case"simple-marker":case"picture-marker":s=y(t,i,r,o,0);break;case"text":s=m(t,i,r,n,o,0);break;case"cim":s=v(t,i,r,o,0)}for(var u,l,p=0,h=0;h<s.rings[0].length-1;h++)u=(t-(l=s.rings[0][h])[0])*(t-l[0])+(i-l[1])*(i-l[1]),p=Math.max(p,u);p=Math.sqrt(p);var c=d.normalizeMapX(t-p,a),f=d.normalizeMapX(t+p,a);if(c>f){var g=_.getInfo(a);if(g){var b=g.valid;c=b[0],f=b[1]}}return e[0]=c,e[1]=i-p,e[2]=f,e[3]=i+p,e}function P(e,t){return Math.ceil((e-t)/(2*t))}function w(e,t){var i,r=t.valid,n=r[0],o=r[1],a=2*o,s=0;return e>o?(e-=(i=Math.ceil(Math.abs(e-o)/a))*a,s=i):e<n&&(e+=(i=Math.ceil(Math.abs(e-n)/a))*a,s=-i),{x:e,frameId:s}}function S(e,t){var i=t.xmin,r=t.ymin,n=t.xmax,o=t.ymax;return M(e,i,r)&&M(e,i,o)&&M(e,n,o)&&M(e,n,r)}function M(e,t,i){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax}function T(e,t,i){var r;if(Array.isArray(e)){if((r=e[0])>t){var n=P(r,t);e[0]=r+n*(-2*t)}else if(r<i){n=P(r,i);e[0]=r+n*(-2*i)}}else if((r=e.x)>t){n=P(r,t);e.x+=n*(-2*t)}else if(r<i){n=P(r,i);e.x+=n*(-2*i)}return e}Object.defineProperty(t,"__esModule",{value:!0});var E=Math.PI/180,I=g.definitions.TEXT_MAX_WIDTH,O=g.definitions.TEXT_LINE_HEIGHT,A=g.definitions.TEXT_SPACING,G=o.mat2df32.create(),C=s.vec2f32.create(),R=l.create();t.ensureClosedRings=function(e){if(c.isPolygon(e))for(var t=0,i=e.rings;t<i.length;t++){var r=i[t];r.length<3||r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]||r.push(r[0])}},t.getBounds=function(e,t,i,r,n,o,a,s){if(!r||!i)return e[0]=e[1]=e[2]=e[3]=0,t[0]=t[1]=t[2]=t[3]=0,e;var u=r;if(!c.isPoint(u)){p.getBoundsXY(e,u);var l=t[0];0===l&&(l=function(e,t){var i=0;switch(e.type){case"simple-fill":case"picture-fill":var r=e.outline;if(!r)return 0;i=r.width;break;case"simple-line":i=e.width;break;case"simple-marker":i=e.size;break;case"picture-marker":i=Math.max(e.width,e.height);break;case"text":var n=[0,0,0,0];b(n,e,t),i=Math.max(n[0],n[1]);break;case"cim":var o=g.CIMSymbolHelper.getEnvelope(e.data);i=Math.sqrt(o.width*o.width+o.height*o.height)}return i}(i,n),t[0]=l);var h=o*l/2;return e[0]-=h,e[1]-=h,e[2]+=h,e[3]+=h,e}var d=u.x,f=u.y;return"text"===i.type&&0===t[2]&&0===t[3]&&b(t,i,n),x(e,d,f,i,t,o,s),e},t.isMarkerSymbol=function(e){return"simple-marker"===e||"picture-marker"===e||"text"===e},t.graphicGeometryToNumber=function(e){switch(i.expect(e.geometry).type){case"point":case"multipoint":return 0;case"polyline":return 1;case"polygon":case"extent":return 2}return 0};var N=s.vec2f32.create(),k=s.vec2f32.create(),D=s.vec2f32.create(),z=s.vec2f32.create(),F=s.vec2f32.create(),U=s.vec2f32.create(),B=s.vec2f32.create();t.isPointOnPolyline=function(e,t,i,r){a.vec2.set(D,t,i);for(var n,o,s,u,l,p,h,c,d,f=e.paths,_=1/0,g=0;g<f.length;g++){var y=f[g];if(!(y.length<2))for(var v=1;v<y.length;v++)n=y[v-1][0],s=y[v-1][1],o=y[v][0],u=y[v][1],l=Math.min(n,o)-r,p=Math.min(s,u)-r,h=Math.max(n,o)+r,c=Math.max(s,u)+r,t<l||t>h||i<p||i>c||(a.vec2.set(N,n,s),a.vec2.set(k,o,u),a.vec2.subtract(z,k,N),a.vec2.subtract(F,N,D),a.vec2.scale(U,z,a.vec2.dot(z,F)/a.vec2.dot(z,z)),a.vec2.subtract(B,F,U),_>(d=a.vec2.dot(B,B))&&(_=d))}return Math.sqrt(_)<=r},t.getMarkerSymbolBounds=y,t.getCIMMarkerBounds=v,t.getTextSymbolBounds=m,t.normalizeCentralMeridian=function(e){var t,i,r,n,o,a,s,u,l=null;if(!e)return null;t=e.spatialReference,i=f.getInfo(t),r=t.isWebMercator,n=j[a=r?102100:4326].maxX,o=j[a].minX,s=j[a].plus180Line,u=j[a].minus180Line;var d,_=e.toJSON();if(!i)return _;if("mesh"===e.type)d=_;else if(c.isPoint(_))d=T(_,n,o);else if(c.isMultipoint(_))_.points=_.points.map(function(e){return T(e,n,o)}),d=_;else if(c.isExtent(_))d=function(e,t){if(!t)return e;var i=function(e,t){var i,r=[],n=e.ymin,o=e.ymax,a=e.xmax-e.xmin,s=e.xmin,u=e.xmax,l=t.valid,p=l[0],h=l[1],c=(i=w(e.xmin,t)).x,d=i.frameId,f=(i=w(e.xmax,t)).x,_=i.frameId,g=c===f&&a>0;if(a>2*h){var y={xmin:s<u?c:f,ymin:n,xmax:h,ymax:o},v={xmin:p,ymin:n,xmax:s<u?f:c,ymax:o},m={xmin:0,ymin:n,xmax:h,ymax:o},b={xmin:p,ymin:n,xmax:0,ymax:o},x=[],P=[];S(y,m)&&x.push(d),S(y,b)&&P.push(d),S(v,m)&&x.push(_),S(v,b)&&P.push(_);for(var M=d+1;M<_;M++)x.push(M),P.push(M);r.push({extent:y,frameIds:[d]},{extent:v,frameIds:[_]},{extent:m,frameIds:x},{extent:b,frameIds:P})}else c>f||g?r.push({extent:{xmin:c,ymin:n,xmax:h,ymax:o},frameIds:[d]},{extent:{xmin:p,ymin:n,xmax:f,ymax:o},frameIds:[_]}):r.push({extent:{xmin:c,ymin:n,xmax:f,ymax:o},frameIds:[d]});return r}(e,t).map(function(e){return e.extent});return i.length<2?i[0]||e:i.length>2?(e.xmin=t.valid[0],e.xmax=t.valid[1],e):{rings:i.map(function(e){return[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]})}}(_,i);else if(c.isPolygon(_)||c.isPolyline(_)){var g=R;p.getBoundsXY(g,_);var y={xmin:g[0],ymin:g[1],xmax:g[2],ymax:g[3]},v=P(y.xmin,o)*(2*n),m=0===v?_:function(e,t){for(var i=0,r=function(e){return c.isPolygon(e)?e.rings:e.paths}(e);i<r.length;i++)for(var n=0,o=r[i];n<o.length;n++){var a=o[n];a[0]+=t}return e}(_,v);y.xmin+=v,y.xmax+=v,h.extentIntersectsPolyline(y,s)&&y.xmax!==n?l=m:h.extentIntersectsPolyline(y,u)&&y.xmin!==o?l=m:d=m}else d=e.clone();return null!==l?(new V).cut(l,n):d};var L=24;t.getTextSymbolSize=b,t.getTextSymbolEstimatedSize=function(e,t,i){var n=g.bidiText(t.text),o=n[0],a=n[1],s=g.alignmentUtils.getJustification(t.horizontalAlignment||"center"),u=g.alignmentUtils.getXAnchorDirection(t.horizontalAlignment||"center"),l=new g.TextShapingNew([],I,O,A,[0,.5*-O],.5*(1-u),0,s).getEstimatedShaping(o,a,i),p=g.TextShapingNew.getBox(l),h=r.pt2px(t.font.size)/L;return e[0]=h*p.x,e[1]=h*p.y,e[2]=h*p.width,e[3]=h*p.height,e};var j={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:{paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:u.WebMercator},minus180Line:{paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:u.WebMercator}},4326:{maxX:180,minX:-180,plus180Line:{paths:[[[180,-180],[180,180]]],spatialReference:u.WGS84},minus180Line:{paths:[[[-180,-180],[-180,180]]],spatialReference:u.WGS84}}},V=function(){function e(){}return e.prototype.cut=function(e,t){var i;if(e.rings)this.closed=!0,i=e.rings,this.minPts=4;else{if(!e.paths)return null;this.closed=!1,i=e.paths,this.minPts=2}for(var r=i.length,n=-2*t,o=0;o<r;o++){var a=i[o];if(a&&a.length>=this.minPts){for(var s=[],u=0,l=a;u<l.length;u++){var p=l[u];s.push([p[0]+n,p[1]])}i.push(s)}}return this.closed?e.rings=i:e.paths=i,e},e}()}.apply(null,r))||(e.exports=n)},1546:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(10),i(12),i(15),i(22),i(11),i(24),i(14),i(8),i(553),i(169),i(546),i(1462),i(1545),i(1517),i(551),i(153)],void 0===(n=function(e,t,r,n,o,a,s,u,l,p,h,c,d,f,_,g){Object.defineProperty(t,"__esModule",{value:!0});var y=(d.enums.PixelType,s.getLogger("esri.views.layers.2d.features.support.AttributeStore")),v=f.debug.createDebugLogger(f.debug.DEBUG_ATTR_UPDATES,y),m=function(e,t){return function(i,r,n){var o;try{o=t(i,r,n)}catch(e){o=NaN}return(null===o||isNaN(o)||o===1/0)&&e||o}},b={sharedArrayBuffer:a("esri-shared-array-buffer"),oesTextureFloat:a("esri-webgl-texture-float"),maxTextureSize:a("esri-webgl-max-texture-size")},x=function(){function e(e,t,i,r){this.texelSize=4,this.descriptors=[];var n=r.pixelType,o=r.layout;this.data=this._initData(n,i,e,t),this.pixelType=n,this.layout=o,this._resetRange(),this._shared=e,this._ctype=t}return Object.defineProperty(e.prototype,"buffer",{get:function(){return this.data.buffer},enumerable:!0,configurable:!0}),e.prototype.getData=function(e,t){return this.data[e*this.texelSize+t]},e.prototype.setData=function(e,t,i){var r=1<<t;0!=(this.layout&r)?(this.data[e*this.texelSize+t]=i,this.dirtyStart=Math.min(this.dirtyStart,e),this.dirtyEnd=Math.max(this.dirtyEnd,e)):y.error("mapview-attributes-store","Tried to set a value for a texel's readonly component")},e.prototype.expand=function(e){var t=this._initData(this.pixelType,e,this._shared,this._ctype);t.set(this.data),this.data=t},e.prototype.toMessage=function(){var e=this.dirtyStart,t=this.dirtyEnd,i=this.texelSize;if(e>t)return null;this._resetRange();var r=!(this._shared||"local"===this._ctype),n=this.pixelType,o=this.layout;return this.data.slice?{start:e,end:t,data:r&&this.data.slice(e*i,(t+1)*i)||null,pixelType:n,layout:o}:r?{start:e,end:t,data:new(f.Utils.getPixelArrayCtor(this.pixelType))(Array.prototype.slice.call(this.data,e*i,(t+1)*i)),pixelType:n,layout:o}:{start:e,end:t,data:null,pixelType:n,layout:o}},e.prototype._initData=function(e,t,i,r){for(var n=i&&"local"!==r?SharedArrayBuffer:ArrayBuffer,o=f.Utils.getPixelArrayCtor(e),a=new o(new n(t*t*4*o.BYTES_PER_ELEMENT)),s=0;s<a.length;s+=4)a[s+1]=255;return a},e.prototype._resetRange=function(){this.dirtyStart=this.data.length/4,this.dirtyEnd=0},e}(),P=function(){function e(e){this._attributeComputeMap=new Map,this._blocks=new Array,this._idMap=new Map,this._localToObjectId=new Map,this._filters=new Array(f.definitions.MAX_FILTERS),this._freeList=[],this._abortController=p.createAbortController(),this._hasScaleExpr=!1,this._size=32,this._idCounter=0;var t=b.oesTextureFloat?5126:5121;v("Creating AttributeStore "+(b.sharedArrayBuffer?"with":"without")+" shared memory"),this._client=e,this._blockDescriptors=[{pixelType:5121,layout:7},{pixelType:t,layout:15},{pixelType:t,layout:15}],this._blocks=this._blockDescriptors.map(function(e){return null})}return e.prototype.destroy=function(){this._abortController.abort()},Object.defineProperty(e.prototype,"hasScaleExpr",{get:function(){return this._hasScaleExpr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_signal",{get:function(){return this._abortController.signal},enumerable:!0,configurable:!0}),e.prototype.createLocalId=function(e){if(!this._idMap.has(e)){var t=this._getFreeId();this._idMap.set(e,-1===t?0:t),this._localToObjectId.set(t,e)}return this._idMap.get(e)},e.prototype.freeLocalId=function(e){var t=this._idMap.get(e);this._idMap.delete(e),this._localToObjectId.delete(t),this._freeList.push(t)},e.prototype.getFeatureId=function(e){return this._localToObjectId.get(e)},e.prototype.getLocalId=function(e){return this._idMap.has(e)?this._idMap.get(e):null},e.prototype.updateFilters=function(e){return n(this,void 0,void 0,function(){var t,i,n,o,a,s,u=this;return r(this,function(r){switch(r.label){case 0:return t=e.config,i=e.service,n=e.spatialReference,o=t.filters,a=t.definitionExpression,s=o.map(function(t,r){return u._updateFilter(e,t,r,i,a,n)}),[4,p.all(s)];case 1:return r.sent(),[2]}})})},e.prototype.setAttributeBindings=function(e,t){return n(this,void 0,void 0,function(){return r(this,function(i){switch(this._hasScaleExpr=!1,e.type){case"simple":case"class-breaks":case"unique-value":case"dictionary":return[2,this._bindVVEvaluators(e.visualVariables,t)];case"dot-density":return[2,this._bindDDEvaluators(e.attributes,t)];case"heatmap":break;default:y.error(new o("attribute-store","Found invalid renderer type: "+e))}return[2]})})},e.prototype.setData=function(e,t,i,r){this._getBlock(t).setData(e,i,r)},e.prototype.setAttributeData=function(e,t,i,r){var n=this,o=e;this._getBlock(0).setData(o,0,this._getFilterFlags(t));var a=this._attributeComputeMap,s=b.oesTextureFloat?1:2;a.forEach(function(e,a){var l=a*s%4,p=Math.floor(a*s/4),h=n._getBlock(p+1),c=e(t,{$view:r},i);if(b.oesTextureFloat)h.setData(o,l,c);else if(c===f.definitions.NAN_MAGIC_NUMBER)h.setData(o,l,255),h.setData(o,l+1,255);else{var d=u.clamp(Math.round(c),-32767,32766)+32768,_=255&d,g=(65280&d)>>8;h.setData(o,l,_),h.setData(o,l+1,g)}})},e.prototype.sendUpdates=function(){var e=this;if(this._nextUpdate)return this._nextUpdate.promise;if(this._currUpdate)return this._nextUpdate=p.createResolver(),this._nextUpdate.promise;var t={blocks:this._blocks.map(function(e){return l.isSome(e)?e.toMessage():null})};return this._currUpdate=this._createResources().then(function(){var i=e._client.update(t,e._signal).then(function(){if(e._currUpdate=null,e._nextUpdate){var t=e._nextUpdate;e._nextUpdate=null,e.sendUpdates().then(function(){return t.resolve()})}});return e._client.render(),i}),this._currUpdate},e.prototype._createResources=function(){var e=this;if(l.isSome(this._createResourcesPromise))return this._createResourcesPromise;v("Initializing AttributeStore");var t={shared:b.sharedArrayBuffer||"local"===this._client.type,size:this._size,blocks:l.mapMany(this._blocks,function(e){return{buffer:e.buffer,pixelType:e.pixelType}})},i=this._client.initialize(t,this._signal);return this._createResourcesPromise=i,i.then(function(){if(l.isNone(e._createResourcesPromise))return e._createResources()}),i},e.prototype._getBlock=function(e){var t=this._blocks[e];if(l.isSome(t))return t;v("Initializing AttributeBlock at index "+e);var i=b.sharedArrayBuffer,r=this._client.type,n=new x(i,r,this._size,this._blockDescriptors[e]);return this._blocks[e]=n,this._createResourcesPromise=null,n},e.prototype._expand=function(){if(this._size<b.maxTextureSize){var e=this._size<<=1;return v("Expanding block size to",e,this._blocks),l.forEachSome(this._blocks,function(t){return t.expand(e)}),this._createResourcesPromise=null,this._size=e,0}return y.error(new o("mapview-limitations","Maximum number of onscreen features exceeded.")),-1},e.prototype._getFreeId=function(){return this._freeList.length?this._freeList.pop():this._idCounter>=this._size*this._size&&this._expand()?-1:this._idCounter++},e.prototype._updateFilter=function(e,t,i,o,a,s){return n(this,void 0,void 0,function(){var n,u,p,h,c,d,f,_=this;return r(this,function(r){switch(r.label){case 0:return n=this._filters[i],(l.isSome(n)&&n.hash)===JSON.stringify(t)?[2]:(u=1<<i,l.isNone(t)?(this._filters[i]=null,this._idMap.forEach(function(e){var t=_._getBlock(0).getData(e,0);_._getBlock(0).setData(e,0,t|u)}),[2]):[4,e.queryObjectIds(t)]);case 1:return p=r.sent(),t.hiddenIds&&t.hiddenIds.length&&(p=p.filter(function(e){return-1===t.hiddenIds.indexOf(e)})),h=p.map(function(e){return _._idMap.get(e)}),[4,this._getFilter(i,o)];case 2:for(r.sent().update(t,a,s),this._idMap.forEach(function(e){var t=_._getBlock(0).getData(e,0);_._getBlock(0).setData(e,0,t&~u)}),c=0;c<h.length;c++)null!=(d=h[c])&&(f=this._getBlock(0).getData(d,0),this._getBlock(0).setData(d,0,f|u));return[2]}})})},e.prototype._getFilter=function(e,t){return n(this,void 0,void 0,function(){var n,o,a;return r(this,function(r){switch(r.label){case 0:return n=this._filters[e],l.isSome(n)?[2,n]:[4,new Promise(function(e,t){Promise.all([i.e(2),i.e(65)]).then(function(){var t=[i(1645)];e.apply(null,t)}.bind(this)).catch(t.bind(this))})];case 1:return o=r.sent().default,a=new o({geometryType:t.geometryType,hasM:!1,hasZ:!1,timeInfo:t.timeInfo,fieldsIndex:new h(t.fields)}),this._filters[e]=a,[2,a]}})})},e.prototype._getFilterFlags=function(e){for(var t=0,i=0;i<this._filters.length;i++){var r=this._filters[i];t|=(l.isNone(r)||r.check(e)?1:0)<<i}return t},e.prototype._bindVVEvaluators=function(e,t){return n(this,void 0,void 0,function(){var i=this;return r(this,function(o){switch(o.label){case 0:return this._attributeComputeMap.clear(),l.isSome(e)?[4,p.all(e.map(function(e){return n(i,void 0,void 0,function(){var i,n;return r(this,function(r){switch(r.label){case 0:return i=f.Utils.getVVType(e.type),[4,this._createGetValueFunction(e,t)];case 1:return n=r.sent(),l.isSome(n)&&this._attributeComputeMap.set(i,n),[2]}})})}))]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},e.prototype._bindDDEvaluators=function(e,t){return n(this,void 0,void 0,function(){var i,n,o,a=this;return r(this,function(r){switch(r.label){case 0:return this._attributeComputeMap.clear(),e.length>f.definitions.DOT_DENSITY_MAX_FIELDS&&y.warn("mapview-invalid-value","DotDensityRenderer supports a maximum of "+f.definitions.DOT_DENSITY_MAX_FIELDS+" attribtues, but found "+e.length),[4,p.all(e.map(function(e){return a._createNormalizedFunction(e,t)}))];case 1:for(i=r.sent().map(function(e){return m(0,e)}),n=0;n<f.definitions.DOT_DENSITY_MAX_FIELDS;n++)(o=n<e.length&&i[n])?this._attributeComputeMap.set(n,o):this._attributeComputeMap.has(n)&&this._attributeComputeMap.delete(n);return[2]}})})},e.prototype._createGetValueFunction=function(e,t){return n(this,void 0,void 0,function(){var i,n,o,a,s,u,l;return r(this,function(r){switch(r.label){case 0:return"size"!==e.type?[3,2]:(i=f.getTypeOfSizeVisualVariable(e))===f.enums.WGLVVFlag.SIZE_SCALE_STOPS?[2,null]:(n=i===f.enums.WGLVVFlag.SIZE_UNIT_VALUE,o=n&&function(t){return g.getVisualVariableSizeValueRepresentationRatio(t,e.valueRepresentation)},a=m,s=[f.definitions.NAN_MAGIC_NUMBER],[4,this._createNormalizedFunction(e,t,o)]);case 1:return[2,a.apply(void 0,s.concat([r.sent()]))];case 2:return u=m,l=[f.definitions.NAN_MAGIC_NUMBER],[4,this._createNormalizedFunction(e,t)];case 3:return[2,u.apply(void 0,l.concat([r.sent()]))]}})})},e.prototype._createNormalizedFunction=function(e,t,i){return n(this,void 0,void 0,function(){var n,a,s;return r(this,function(r){switch(r.label){case 0:return(n=e.field)?"string"==typeof n?(a=e.normalizationField)?[2,function(e){if(e.attributes[n]&&e.attributes[a]){var t=e.attributes[n]/e.attributes[a];return i?i(t):t}}]:[2,i?function(e){return i(e.attributes[n])}:function(e){return e.attributes[n]}]:(y.error(new o("mapview-rendering:invalid-type","The field for a vv must be a string or a number, but got "+typeof n)),[2,function(e){}]):e.valueExpression?(this._hasScaleExpr=this._hasScaleExpr||-1!==e.valueExpression.indexOf("scale"),[4,c.createVVExpression(e.valueExpression,t.spatialReference,t.fields)]):[3,2];case 1:return s=r.sent(),[2,_.callWithOptimizedFeature.bind(null,s)];case 2:return y.error("Unable to create a normalized function for visual variable: "+e),[2,function(e){}]}})})},e}();t.default=P}.apply(null,r))||(e.exports=n)},1588:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(8),i(1674),i(39),i(1675)],void 0===(n=function(e,t,r,n,o,a){function s(e,t,i,r,n){if(void 0===r&&(r=null),void 0===n&&(n=!1),null===r){var s=a.cacheKey(t,i);void 0!==h[s]?r=h[s]:(null===(r=u(t,i,null))&&(r=new a),h[s]=r)}return l._project(e,t,i instanceof o||!1===n?i:new o(i),r,n)}function u(e,t,i){void 0===i&&(i=null);var r=l._getTransformation(e,t,i);return null!==r?a.fromGE(r):null}Object.defineProperty(t,"__esModule",{value:!0});var l=null;t.isLoaded=function(){return!!l&&n.isLoaded()},t.isSupported=function(){return n.isSupported()};var p=null;t.load=function(){return p||(p=r.create(function(e,t){var r=n.load();Promise.resolve().then(function(){var o=[i(168)];(function(i){l=i,r.then(function(){l._enableProjection(n),e()},function(e){t(e)})}).apply(null,o)}).catch(i.oe)}))},t.project=function(e,t,i){return void 0===i&&(i=null),e instanceof Array?0===e.length?[]:s(e,e[0].spatialReference,t,i):s([e],e.spatialReference,t,i)[0]};var h={};t.projectMany=s,t.getTransformation=u,t.getTransformations=function(e,t,i){void 0===i&&(i=null);var r=l._getTransformationBySuitability(e,t,i);if(null!==r){for(var n=[],o=0,s=r;o<s.length;o++){var u=s[o];n.push(a.fromGE(u))}return n}return[]}}.apply(null,r))||(e.exports=n)},1589:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(133),i(204),i(36),i(35),i(565),i(346)],void 0===(n=function(e,t,i,r,n,o,a,s){function u(e,t){var i=e.bounds,r=t.bounds;return e.key.id!==t.key.id&&e.key.world===t.key.world&&i[0]<=r[0]&&i[1]<=r[1]&&i[2]>=r[2]&&i[3]>=r[3]}Object.defineProperty(t,"__esModule",{value:!0}),t.isParentOf=u,t.isChildOf=function(e,t){return u(t,e)};var l=function(){function e(e,t){this.bounds=o.create(),this.key=new s(0,0,0,0),this.objectIds=new i.default,this.key.set(t);var r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.scale=r.scale,this.level=r.level,this.needsClear=!0}return Object.defineProperty(e.prototype,"id",{get:function(){return this.key.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extent",{get:function(){return n.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transform",{get:function(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.tileInfoView,this.id)},e.prototype.createChildTiles=function(){for(var t=this.key.getChildKeys(),i=r.acquire(),n=0;n<t.length;n++)i[n]=new e(this.tileInfoView,t[n]);return i},e.prototype.getQuantizationParameters=function(){return a.default.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})},e}();t.Tile=l,t.default=l}.apply(null,r))||(e.exports=n)},1634:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(2),i(1),i(7),i(10),i(12),i(52),i(345),i(255),i(1673),i(14),i(8),i(8),i(17),i(0),i(63),i(35),i(71),i(94),i(1511),i(381),i(571),i(1462),i(1546),i(1677),i(2222),i(2223),i(2224),i(1518),i(1678)],void 0===(n=function(e,t,i,r,n,o,a,s,u,l,p,h,c,d,f,_,g,y,v,m,b,x,P,w,S,M,T,E,I,O,A){function G(e,t,i){if(i.has(e))return i.get(e);var r={tile:t,addedOrModified:[],removed:[]};return i.set(e,r),r}Object.defineProperty(t,"__esModule",{value:!0});var C=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=e.apply(this,t)||this;return r._tiles=new Map,r._graphicStoreUpdate=!1,r._graphicsSet=new Set,r._matcher=c.resolve(null),r._tileUpdateSet=new Set,r._tilesToUpdate=new Map,r._graphicIdToAbortController=new Map,r._pendingUpdates=0,r._attached=!1,r.lastUpdateId=-1,r.updateRequested=!1,r.graphicUpdateHandler=r.graphicUpdateHandler.bind(r),r.addOrUpdateGraphic=r.addOrUpdateGraphic.bind(r),r._processAnalyzedGraphics=r._processAnalyzedGraphics.bind(r),r._graphicsChangeHandler=r._graphicsChangeHandler.bind(r),r}return i(t,e),t.prototype.initialize=function(){var e=this;this._tileStore=new M.default(this.view.featuresTilingScheme),this.container=new T.default({tileInfoView:this.view.featuresTilingScheme,localToGlobalId:function(t){return e._attributeStore.getFeatureId(t)}}),this._attributeStore=new S.default({type:"local",initialize:function(t){return c.resolve(e.container.attributeView.initialize(t))},update:function(t){return s.safeCast(e.container.attributeView.requestUpdate(t))},render:function(){return e.container.requestRender()}});this._graphicStore=new I.default(this.view.featuresTilingScheme,this.view.state.scale,this.uid,this.graphics,function(t){var i=e._attributeStore.createLocalId(t.uid);e._attributeStore.setData(i,0,0,t.visible?1:0)},function(t){e._attributeStore.freeLocalId(t.uid)}),this._graphicProcessingQueue=new E.default({process:this.addOrUpdateGraphic});var t=new w.WGLTemplateStore(this.container.getMaterialItems),i=this._tileStore.tileScheme.tileInfo;this.renderer&&(this._matcher=w.createMatcher(this.renderer,t,null)),this._meshFactory=new w.WGLMeshFactory(null,this.uid,null,t,null,i),this.watch("renderer",function(i){i&&(e._matcher=w.createMatcher(e.renderer,t,null))}),this._tileStore.on("update",this._onTileUpdate.bind(this)),this.container.on("attach",function(){e.graphics.items.length>0&&e._graphicsChangeHandler({target:e.graphics,added:e.graphics.items,removed:[],moved:[]}),e.handles.add(e.graphics.on("change",e._graphicsChangeHandler),"graphics"),e._attached=!0,e.notifyChange("updating")}),this.container.on("detach",function(){e._graphicProcessingQueue&&e._graphicProcessingQueue.clear()})},t.prototype.destroy=function(){this.container.dispose(),this._set("graphics",null),this._graphicProcessingQueue&&(this._graphicProcessingQueue.destroy(),this._graphicProcessingQueue=null),this._graphicStore.clear(),this._tileStore.destroy(),this._attributeStore=null},Object.defineProperty(t.prototype,"updating",{get:function(){return!this._attached||0!==this._pendingUpdates||this._graphicProcessingQueue.updating||this._tileUpdateSet.size>0||this._tilesToUpdate.size>0},enumerable:!0,configurable:!0}),t.prototype.install=function(e){e.addChild(this.container)},t.prototype.uninstall=function(e){e.removeChild(this.container)},t.prototype.hitTest=function(e,t){if(!this.view||!this.view.position)return c.resolve();var i=this.view.toMap(f.createScreenPoint(e,t));return this.searchFeatures(i).then(function(e){return e&&e.length?e[0]:null})},t.prototype.searchFeatures=function(e,t){var i=this;return void 0===t&&(t=2),c.create(function(r){r(i._graphicStore.hitTest(e.x,e.y,t,i.view.state.resolution,i.view.state.rotation))})},t.prototype.update=function(e){var t=e.state,i=this.view.featuresTilingScheme.getClosestInfoForScale(t.scale).level;this._graphicStore.updateLevel(i),this._tileStore.setViewState(t),this._graphicStoreUpdate=!0,this.updateRequested=!1},t.prototype.viewChange=function(){this.requestUpdate()},t.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate(this))},t.prototype.processUpdate=function(e){this.updateRequested&&(this.updateRequested=!1,this.update(e))},t.prototype.graphicUpdateHandler=function(e){var t=e.graphic,i=e.property,r=e.newValue,n=t;switch(i){case"attributes":break;case"geometry":case"symbol":this._graphicProcessingQueue.push(n,"update");break;case"visible":this._setVisible(n.uid,r),this._attributeStore.sendUpdates()}},t.prototype.highlight=function(e){return this.container.highlight(e)},t.prototype._getIntersectingTiles=function(e){var t=this._graphicStore.getBounds(e);return t&&0!==y.width(t)&&0!==y.height(t)?this._tileStore.boundsIntersections(t):[]},t.prototype._updateTile=function(e){var t=this,i=e.tile,r=this._getGraphicsData(i,e.addedOrModified);return s.safeCast(this._processGraphics(i.key,r)).then(function(r){return t._patchTile(i.key,{addOrUpdate:r,remove:e.removed}),r})},t.prototype._graphicsChangeHandler=function(e){var t=this;if(this._pendingUpdates++,this.notifyChange("updating"),!this._graphicStoreUpdate){var i=this.view.state,r=this.view.featuresTilingScheme.getClosestInfoForScale(i.scale).level;this._graphicStore.updateLevel(r),this._tileStore.setViewState(i)}for(var n=e.added,o=e.removed,a=e.moved,s=this._tilesToUpdate,u=[],l=new Array(n.length),p=0;p<n.length;p++){var h=n[p];l[p]=h,this._graphicsSet.add(h),u.push(this.addGraphic(h))}for(var d=0,f=o;d<f.length;d++){var _=f[d];this._abortProcessingGraphic(_.uid);for(var g=0,y=this._getIntersectingTiles(_);g<y.length;g++){var v=y[g];G(v.key.id,v,s).removed.push(this._attributeStore.getLocalId(_.uid))}this._graphicsSet.delete(_),this._graphicStore.remove(_)}for(var m=0,b=a;m<b.length;m++)for(var x=b[m],P=0,w=this._getIntersectingTiles(x);P<w.length;P++){v=w[P];G(v.key.id,v,s).addedOrModified.push(x)}c.all(u).then(function(){for(var e,i=0;i<l.length;i++){e=l[i];for(var r=0,n=t._getIntersectingTiles(e);r<n.length;r++){var o=n[r];G(o.key.id,o,s).addedOrModified.push(e)}}t._graphicStore.updateZ();var a=[];return s.forEach(function(e){return a.push(t._updateTile(e))}),c.all(a).then(function(){s.clear(),t._pendingUpdates--,t.notifyChange("updating")})}).catch(function(){s.clear(),t._pendingUpdates--,t.notifyChange("updating")})},t.prototype._getSymbolResources=function(e,t){return a(this,void 0,void 0,function(){var i,r,n,a,s,u,l,p;return o(this,function(o){switch(o.label){case 0:return this.container.attached?(i=h.isSome(e.symbol)?e.symbol:null)?[3,3]:this.renderer?[4,this.renderer.getSymbolAsync(e,{scale:this.view.scale})]:[3,2]:[2,c.resolve(null)];case 1:return i=o.sent(),[3,3];case 2:i=this._getNullSymbol(e),o.label=3;case 3:return[4,x.expandSymbol(i,x.constructUrlFn,t)];case 4:if(i=o.sent(),r=[],"text"===i.type){for(n=new Set,s=(a=i).text,u=0;u<s.length;u++)n.add(s.charCodeAt(u));l=[],n.forEach(function(e){return l.push(e)}),r.push({symbol:a.toJSON(),id:0,glyphIds:l})}else r.push({symbol:i.toJSON(),id:e.uid,glyphIds:null});return[4,this.container.getMaterialItems(r,t).then(function(e){return e&&e.length>0?e[0].mosaicItem:null})];case 5:return p=o.sent(),[2,{symbol:i,mosaicItem:p}]}})})},t.prototype._projectAndNormalizeGeometry=function(e){return a(this,void 0,void 0,function(){var t,i,r,n=this;return o(this,function(o){return h.isNone(e.geometry)?[2,c.resolve(null)]:(t=e.geometry,v.isPolygon(t)?(i=t.rings,t.rings=i):v.isPolyline(t)?(r=t.paths,t.paths=r):v.isExtent(t)&&(t=g.fromExtent(t)),[2,b.checkProjectionSupport(t.spatialReference,this.view.spatialReference).then(function(){var e=O.normalizeCentralMeridian(t),i=b.project(e,t.spatialReference,n.view.spatialReference);return O.ensureClosedRings(i),i})])})})},t.prototype._onTileUpdate=function(e){var t=m.getInfo(this.view.spatialReference);if(e.added&&e.added.length>0)for(var i=0,r=e.added;i<r.length;i++){var n=r[i];this._addNewTile(n,t)}if(e.removed&&e.removed.length>0)for(var o=0,a=e.removed;o<a.length;o++){var s=a[o];this._removeTile(s.key)}},t.prototype.addOrUpdateGraphic=function(e,t,i){return this._addOrUpdateGraphic(e,t,i)},t.prototype.addGraphic=function(e){var t=this;this._abortProcessingGraphic(e.uid);var i=d.createAbortController();this._graphicIdToAbortController.set(e.uid,i);var r={signal:i.signal};return this._addOrUpdateGraphic(e,"add",r).then(function(){t._graphicIdToAbortController.delete(e.uid)}).catch(function(i){if(t._graphicIdToAbortController.delete(e.uid),!c.isAbortError(i))throw i})},t.prototype._addOrUpdateGraphic=function(e,t,i){var r=this,n=this._projectAndNormalizeGeometry(e),o=this._getSymbolResources(e,i);return c.all([n,o]).then(function(n){var o=n[0],a=n[1];return"add"===t?r._addProjectedGraphic(e,a,o):r._updateGraphic(e,a,o,i)})},t.prototype._addProjectedGraphic=function(e,t,i){this._graphicsSet.has(e)&&this._graphicStore.add(e,t,i)},t.prototype._updateGraphic=function(e,t,i,r){var n=this;if(!this._graphicStore.has(e)||c.isAborted(r))return c.resolve();for(var o=this._graphicStore.update(e,t,i),a=o.oldBounds,u=o.newBounds,l=0===y.width(a)&&0===y.height(a),h=0===y.width(u)&&0===y.height(u),d=l?[]:this._tileStore.boundsIntersections(a),f=h?[]:this._tileStore.boundsIntersections(u),_=p.acquire(),g=0,v=d;g<v.length;g++){var m=v[g];_.set(m.key,{addOrUpdate:null,remove:[this._attributeStore.getLocalId(e.uid)]})}for(var b=0,x=f;b<x.length;b++){m=x[b];var P=this._getGraphicData(m,e);if(_.has(m.key)){var w=_.get(m.key);w.remove.length=0,w.addOrUpdate=P}else _.set(m.key,{addOrUpdate:P,remove:null})}var S=[];return _.forEach(function(e,t){var i=s.safeCast(n._processGraphics(t,e.addOrUpdate,r)).then(function(i){n._patchTile(t,{addOrUpdate:i,remove:e.remove})});S.push(i)}),p.release(_),c.all(S).then(function(){})},t.prototype._addTile=function(e,t){var i=y.create();this.view.featuresTilingScheme.getTileBounds(i,e);var r=new w.WGLTile(e,i,!0),n={clear:!0,addOrUpdate:t,remove:[]};this._tiles.set(e,r),this.container.addChild(r),r.setData(n,!1,!1)},t.prototype._addNewTile=function(e,t){var i=this,r=this._graphicStore.queryTileData(e);if(t)for(var n=Math.round((t.valid[1]-t.valid[0])/e.resolution),o=0,a=r;o<a.length;o++){var s=a[o];s.geometry&&v.isPoint(s.geometry)&&this._wrapPoints(s,n)}var u=e.key;this._tileUpdateSet.add(e.key),this.notifyChange("updating"),this._processGraphics(u,r).then(function(e){i._addTile(u,e),i._tileUpdateSet.delete(u),i.notifyChange("updating")}).catch(function(e){if(i._tileUpdateSet.delete(u),i.notifyChange("updating"),!c.isAbortError(e))throw e})},t.prototype._removeTile=function(e){if(this._tiles.has(e)){var t=this._tiles.get(e);this.container.removeChild(t)}},t.prototype._patchTile=function(e,t){this._tiles.has(e)&&(this._tiles.get(e).setData(t,!1,!1),this.container.requestRender())},t.prototype._setVisible=function(e,t){var i=this._attributeStore.getLocalId(e);this._attributeStore.setData(i,0,0,t?1:0)},t.prototype._getGraphicsData=function(e,t){var i=m.getInfo(this.view.spatialReference),r=this._graphicStore.getGraphicsData(e,t);if(i)for(var n=Math.round((i.valid[1]-i.valid[0])/e.resolution),o=0,a=r;o<a.length;o++){var s=a[o];s.geometry&&v.isPoint(s.geometry)&&this._wrapPoints(s,n)}return r.sort(function(e,t){return e.insertAfter-t.insertAfter}),r},t.prototype._getGraphicData=function(e,t){var i=this._graphicStore.getGraphicData(e,t),r=[i],n=m.getInfo(this.view.spatialReference);if(n){var o=Math.round((n.valid[1]-n.valid[0])/e.resolution);i.geometry&&v.isPoint(i.geometry)&&this._wrapPoints(i,o)}return r},t.prototype._wrapPoints=function(e,t){var i=e.geometry;512===t?i.x<20?e.geometry={points:[[i.x,i.y],[t,0]]}:i.x>492&&(e.geometry={points:[[i.x,i.y],[-t,0]]}):i.x<-20?e.geometry={points:[[i.x,i.y],[t,0]]}:i.x>532&&(e.geometry={points:[[i.x,i.y],[-t,0]]})},t.prototype._processGraphics=function(e,t,i){return a(this,void 0,void 0,function(){var r,n;return o(this,function(o){switch(o.label){case 0:return t&&t.length&&this._meshFactory?(r=this._meshFactory,[4,s.safeCast(this._matcher.then(function(e){return r.analyze(t,e,null,null,i)}))]):[2,null];case 1:return n=o.sent(),this._attributeStore.sendUpdates(),[2,this._processAnalyzedGraphics(e,n)]}})})},t.prototype._processAnalyzedGraphics=function(e,t){for(var i=this._meshFactory,r=i.createMeshData(t.length),n=this._attributeStore,o=0,a=t;o<a.length;o++){var s=a[o];s.insertAfter=-1===s.insertAfter?-1:n.getLocalId(s.insertAfter),s.localId=n.getLocalId(s.attributes[this.uid]),i.write(r,s,null,null,e.level)}return w.TileData.fromMeshData(r)},t.prototype._abortProcessingGraphic=function(e){this._graphicIdToAbortController.has(e)&&this._graphicIdToAbortController.get(e).abort()},t.prototype._getNullSymbol=function(e){var t=e.geometry;return v.isPolyline(t)?P.errorPolylineSymbol2D:v.isPolygon(t)||v.isExtent(t)?P.errorPolygonSymbol2D:P.errorPointSymbol2D},r([_.property()],t.prototype,"_graphicProcessingQueue",void 0),r([_.property({constructOnly:!0})],t.prototype,"graphics",void 0),r([_.property({dependsOn:["_graphicProcessingQueue.updating"]})],t.prototype,"updating",null),r([_.property()],t.prototype,"view",void 0),r([_.property()],t.prototype,"updateRequested",void 0),r([_.subclass("esri.views.2d.layers.support.GraphicsView2D")],t)}(_.declared(A,u,l.Identifiable));t.default=C}.apply(null,r))||(e.exports=n)},1673:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(85)],void 0===(n=function(e,t,i){var r=function(){function e(e,t){void 0===e&&(e=50),void 0===t&&(t=50),this._pool=new i(Map,!1,function(e){return e.clear()},t,e)}return e.prototype.acquire=function(){return this._pool.acquire()},e.prototype.release=function(e){this._pool.release(e)},e.acquire=function(){return n.acquire()},e.release=function(e){return n.release(e)},e}(),n=new r(100);return r}.apply(null,r))||(e.exports=n)},1674:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(5),i(22),i(8)],void 0===(n=function(e,t,r,n,o){function a(e){function i(e,t,i){e[t]=i(e[t])}t._pe=e,c.init(),d.init(),f.init(),_.init(),g.init(),t.PeGCSExtent=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return r(i,e),i.prototype.destroy=function(){t._pe.destroy(this)},i}(t._pe.PeGCSExtent);for(var n=0,o=[t._pe.PeDatum,t._pe.PeGeogcs,t._pe.PeGeogtran,t._pe.PeObject,t._pe.PeParameter,t._pe.PePrimem,t._pe.PeProjcs,t._pe.PeSpheroid,t._pe.PeUnit];n<o.length;n++){i(o[n].prototype,"getName",function(e){return function(){return e.call(this,new Array(c.PE_NAME_MAX))}})}for(var a=0,s=[t._pe.PeGeogtran,t._pe.PeProjcs];a<s.length;a++){i(s[a].prototype,"getParameters",function(e){return function(){for(var i=new Array(c.PE_PARM_MAX),r=e.call(this),n=0;n<i.length;n++){var o=t._pe.getValue(r,"*");i[n]=o?t._pe.wrapPointer(o,t._pe.PeParameter):null,r+=Int32Array.BYTES_PER_ELEMENT}return i}})}i(t._pe.PeHorizon.prototype,"getCoord",function(e){return function(){var t=this.getSize();if(!t)return null;var i=[];return p(i,t,e.call(this)),i}}),i(t._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(e){var i=t._pe._pe_getPeGTlistExtendedGTsSize();return function(){var r=null,n=e.call(this);if(!t._pe.compare(n,t._pe.NULL)){r=[n];var o=this.getSteps();if(o>1)for(var a=t._pe.getPointer(n),s=1;s<o;s++)r.push(t._pe.wrapPointer(a+i*s,t._pe.PeGTlistExtendedGTs))}return r}});var u=t._pe._pe_getPeHorizonSize(),l=function(e){return function(){var i=this._cache;if(i||(i=new Map,this._cache=i),i.has(e))return i.get(e);var r=null,n=e.call(this);if(!t._pe.compare(n,t._pe.NULL)){r=[n];var o=n.getNump();if(o>1)for(var a=t._pe.getPointer(n),s=1;s<o;s++)r.push(t._pe.wrapPointer(a+u*s,t._pe.PeHorizon))}return i.set(e,r),r}};i(t._pe.PeProjcs.prototype,"horizonGcsGenerate",l),i(t._pe.PeProjcs.prototype,"horizonPcsGenerate",l),t._pe.PeObject.prototype.toString=function(e){void 0===e&&(e=c.PE_STR_OPTS_NONE),t._pe.ensureCache.prepare();var i=t._pe.getPointer(this),r=t._pe.ensureInt8(new Array(c.PE_BUFFER_MAX));return t._pe.UTF8ToString(t._pe._pe_object_to_string_ext(i,e,r))}}function s(e){if(e){var i=t._pe.getClass(e);if(i){var r=t._pe.getCache(i);if(r){var n=t._pe.getPointer(e);n&&delete r[n]}}}}function u(e,i){for(var r=[],n=new Array(i),o=0;o<e;o++)r.push(t._pe.ensureInt8(n));return r}function l(e){var t;return Array.isArray(e[0])?(t=[],e.forEach(function(e){t.push(e[0],e[1])})):t=e,t}function p(e,i,r,n){if(void 0===n&&(n=!1),n)for(var o=0;o<2*i;o++)e[o]=t._pe.getValue(r+o*Float64Array.BYTES_PER_ELEMENT,"double");else{var a=0===e.length;for(o=0;o<i;o++)a&&(e[o]=new Array(2)),e[o][0]=t._pe.getValue(r,"double"),e[o][1]=t._pe.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}var h,c,d,f,_,g;Object.defineProperty(t,"__esModule",{value:!0}),t._pe=null,t.isLoaded=function(){return!!t._pe},t.isSupported=function(){return!!n("esri-wasm")},t.load=function(){return h||(h=o.create(function(t,r){i.e(87).then(function(){var n=[i(1809)];(function(i){i({locateFile:function(t){return e.toUrl("./support/"+t)},onAbort:function(e){r(new Error(e))}}).then(function(e){a(e),t()})}).apply(null,n)}).catch(i.oe)}))},function(e){function i(e,i,r){t._pe.ensureCache.prepare();var n=l(r),o=r===n,a=t._pe.ensureFloat64(n),s=t._pe._pe_geog_to_proj(t._pe.getPointer(e),i,a);return s&&p(r,i,a,o),s}function r(e,t,i){return n(e,t,i,0)}function n(e,i,r,n){t._pe.ensureCache.prepare();var o=l(r),a=r===o,s=t._pe.ensureFloat64(o),u=t._pe._pe_proj_to_geog_center(t._pe.getPointer(e),i,s,n);return u&&p(r,i,s,a),u}e.geogToProj=i,e.projGeog=function(e,t,n,o){switch(o){case c.PE_TRANSFORM_P_TO_G:return r(e,t,n);case c.PE_TRANSFORM_G_TO_P:return i(e,t,n)}return 0},e.projToGeog=r,e.projToGeogCenter=n}(t.PeCSTransformations||(t.PeCSTransformations={})),function(e){e.init=function(){e.PE_BUFFER_MAX=t._pe.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=t._pe.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=t._pe.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=t._pe.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=t._pe.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=t._pe.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=t._pe.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=t._pe.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=t._pe.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=t._pe.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=t._pe.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=t._pe.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=t._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=t._pe.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=t._pe.PeDefs.prototype.PE_TYPE_UNIT,e.PE_STR_OPTS_NONE=t._pe.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=t._pe.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=t._pe.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=t._pe.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=t._pe.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=t._pe.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=t._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=t._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=t._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=t._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=t._pe.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=t._pe.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=t._pe.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=t._pe.PeDefs.prototype.PE_HORIZON_DELTA}}(c=t.PeDefs||(t.PeDefs={})),function(e){function i(e,i){var o=null,a=n[e];if(a||(a={},n[e]=a),a.hasOwnProperty(String(i)))o=a[i];else{var s=t._pe.PeFactory.prototype.factoryByType(e,i);t._pe.compare(s,t._pe.NULL)||(o=s,a[i]=o)}return r(o)}function r(e){if(e){var i=e.getType();switch(i){case c.PE_TYPE_GEOGCS:e=t._pe.castObject(e,t._pe.PeGeogcs);break;case c.PE_TYPE_PROJCS:e=t._pe.castObject(e,t._pe.PeProjcs);break;case c.PE_TYPE_GEOGTRAN:e=t._pe.castObject(e,t._pe.PeGeogtran);break;default:i&c.PE_TYPE_UNIT&&(e=t._pe.castObject(e,t._pe.PeUnit))}}return e}var n={},o={};e.initialize=function(){t._pe.PeFactory.prototype.initialize(null)},e.coordsys=function(e){return i(c.PE_TYPE_COORDSYS,e)},e.factoryByType=i,e.fromString=function(e,i){var n=null,a=o[e];if(a||(a={},o[e]=a),a.hasOwnProperty(i))n=a[i];else{var s=t._pe.PeFactory.prototype.fromString(e,i);t._pe.compare(s,t._pe.NULL)||(n=s,a[i]=n)}return r(n)},e.geogcs=function(e){return i(c.PE_TYPE_GEOGCS,e)},e.geogtran=function(e){return i(c.PE_TYPE_GEOGTRAN,e)},e.getCode=function(e){return t._pe.PeFactory.prototype.getCode(e)},e.projcs=function(e){return i(c.PE_TYPE_PROJCS,e)},e.unit=function(e){return i(c.PE_TYPE_UNIT,e)}}(t.PeFactory||(t.PeFactory={})),t.PeGCSExtent=null,function(e){var i;e.init=function(){e.PE_GTLIST_OPTS_COMMON=t._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,i=t._pe._pe_getPeGTlistExtendedEntrySize()},e.getGTlist=function(e,r,n,o,a,s){var u=null,l=new t._pe.PeInteger(s);try{var p=t._pe.PeGTlistExtended.prototype.getGTlist(e,r,n,o,a,l);if((s=l.val)&&(u=[p],s>1))for(var h=t._pe.getPointer(p),c=1;c<s;c++)u.push(t._pe.wrapPointer(h+i*c,t._pe.PeGTlistExtendedEntry))}finally{t._pe.destroy(l)}return u}}(d=t.PeGTlistExtended||(t.PeGTlistExtended={})),function(e){(t.PeGTlistExtendedEntry||(t.PeGTlistExtendedEntry={})).destroy=function(e){if(e&&e.length){for(var i=0,r=e;i<r.length;i++){var n=r[i];s(n),n.getEntries().forEach(function(e){s(e);var t=e.getGeogtran();s(t),t.getParameters().forEach(s),[t.getGeogcs1(),t.getGeogcs2()].forEach(function(e){s(e);var t=e.getDatum();s(t),s(t.getSpheroid()),s(e.getPrimem()),s(e.getUnit())})})}t._pe.PeGTlistExtendedEntry.prototype.Delete(e[0])}}}(),function(e){(t.PeGTTransformations||(t.PeGTTransformations={})).geogToGeog=function(e,i,r,n,o){t._pe.ensureCache.prepare();var a=l(r),s=r===a,u=t._pe.ensureFloat64(a),h=0;n&&(h=t._pe.ensureFloat64(n));var c=t._pe._pe_geog_to_geog(t._pe.getPointer(e),i,u,h,o);return c&&p(r,i,u,s),c}}(),function(e){function i(e,i,r,n,o,a){var s,p;switch(t._pe.ensureCache.prepare(),e){case"dd":s=t._pe._pe_geog_to_dd,p=c.PE_DD_MAX;break;case"ddm":s=t._pe._pe_geog_to_ddm,p=c.PE_DDM_MAX;break;case"dms":s=t._pe._pe_geog_to_dms,p=c.PE_DMS_MAX}var h=0;i&&(h=t._pe.getPointer(i));var d=l(n),f=t._pe.ensureFloat64(d),_=u(r,p),g=s(h,r,f,o,t._pe.ensureInt32(_));if(g)for(var y=0;y<r;y++)a[y]=t._pe.UTF8ToString(_[y]);return g}function r(e,i,r,n,o){var a;switch(t._pe.ensureCache.prepare(),e){case"dd":a=t._pe._pe_dd_to_geog;break;case"ddm":a=t._pe._pe_ddm_to_geog;break;case"dms":a=t._pe._pe_dms_to_geog}var s=0;i&&(s=t._pe.getPointer(i));var u=n.map(function(e){return t._pe.ensureString(e)}),l=t._pe.ensureInt32(u),h=t._pe.ensureFloat64(new Array(2*r)),c=a(s,r,l,h);return c&&p(o,r,h),c}e.geog_to_dms=function(e,t,r,n,o){return i("dms",e,t,r,n,o)},e.dms_to_geog=function(e,t,i,n){return r("dms",e,t,i,n)},e.geog_to_ddm=function(e,t,r,n,o){return i("ddm",e,t,r,n,o)},e.ddm_to_geog=function(e,t,i,n){return r("ddm",e,t,i,n)},e.geog_to_dd=function(e,t,r,n,o){return i("dd",e,t,r,n,o)},e.dd_to_geog=function(e,t,i,n){return r("dd",e,t,i,n)}}(t.PeNotationDms||(t.PeNotationDms={})),function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=t._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=t._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},e.geog_to_mgrs_extended=function(e,i,r,n,o,a,s){t._pe.ensureCache.prepare();var p=0;e&&(p=t._pe.getPointer(e));var h=l(r),d=t._pe.ensureFloat64(h),f=u(i,c.PE_MGRS_MAX),_=t._pe.ensureInt32(f),g=t._pe._pe_geog_to_mgrs_extended(p,i,d,n,o,a,_);if(g)for(var y=0;y<i;y++)s[y]=t._pe.UTF8ToString(f[y]);return g},e.mgrs_to_geog_extended=function(e,i,r,n,o){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=r.map(function(e){return t._pe.ensureString(e)}),u=t._pe.ensureInt32(s),l=t._pe.ensureFloat64(new Array(2*i)),h=t._pe._pe_mgrs_to_geog_extended(a,i,u,n,l);return h&&p(o,i,l),h}}(f=t.PeNotationMgrs||(t.PeNotationMgrs={})),function(e){e.geog_to_usng=function(e,i,r,n,o,a,s){t._pe.ensureCache.prepare();var p=0;e&&(p=t._pe.getPointer(e));var h=l(r),d=t._pe.ensureFloat64(h),f=u(i,c.PE_MGRS_MAX),_=t._pe.ensureInt32(f),g=t._pe._pe_geog_to_usng(p,i,d,n,o,a,_);if(g)for(var y=0;y<i;y++)s[y]=t._pe.UTF8ToString(f[y]);return g},e.usng_to_geog=function(e,i,r,n){t._pe.ensureCache.prepare();var o=0;e&&(o=t._pe.getPointer(e));var a=r.map(function(e){return t._pe.ensureString(e)}),s=t._pe.ensureInt32(a),u=t._pe.ensureFloat64(new Array(2*i)),l=t._pe._pe_usng_to_geog(o,i,s,u);return l&&p(n,i,u),l}}(t.PeNotationUsng||(t.PeNotationUsng={})),function(e){e.init=function(){e.PE_UTM_OPTS_NONE=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS},e.geog_to_utm=function(e,i,r,n,o){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=l(r),p=t._pe.ensureFloat64(s),h=u(i,c.PE_UTM_MAX),d=t._pe.ensureInt32(h),f=t._pe._pe_geog_to_utm(a,i,p,n,d);if(f)for(var _=0;_<i;_++)o[_]=t._pe.UTF8ToString(h[_]);return f},e.utm_to_geog=function(e,i,r,n,o){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=r.map(function(e){return t._pe.ensureString(e)}),u=t._pe.ensureInt32(s),l=t._pe.ensureFloat64(new Array(2*i)),h=t._pe._pe_utm_to_geog(a,i,u,n,l);return h&&p(o,i,l),h}}(_=t.PeNotationUtm||(t.PeNotationUtm={})),function(e){var i=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=t._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=t._pe.PePCSInfo.prototype.PE_POLE_POINT},e.generate=function(r,n){var o,a;return void 0===n&&(n=e.PE_PCSINFO_OPTION_DOMAIN),i.has(r)&&(a=i.get(r))[n]&&(o=a[n]),o||(o=t._pe.PePCSInfo.prototype.generate(r,n),a||(a=[],i.set(r,a)),a[n]=o),o}}(g=t.PePCSInfo||(t.PePCSInfo={})),function(e){(t.PeVersion||(t.PeVersion={})).version_string=function(){return t._pe.PeVersion.prototype.version_string()}}(),t._init=a}.apply(null,r))||(e.exports=n)},1675:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(1676)],void 0===(n=function(e,t,i){return function(){function e(e){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(var t=0,r=e.steps;t<r.length;t++){var n=r[t];n instanceof i?this.steps.push(n):this.steps.push(new i({wkid:n.wkid,wkt:n.wkt,isInverse:n.isInverse}))}}return e.cacheKey=function(e,t){return[void 0!==e.wkid&&null!==e.wkid?e.wkid.toString():"-1",void 0!==e.wkt&&null!==e.wkt?e.wkt.toString():"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():""].join(",")},e.fromGE=function(t){for(var r=new e,n="",o=0,a=t.steps;o<a.length;o++){var s=a[o],u=i.fromGE(s);r.steps.push(u),n+=u.uid.toString()+","}return r._cached_projection={},r._gtlistentry=null,r._chain=n,r},e.prototype.getInverse=function(){var t=new e;t.steps=[];for(var i=this.steps.length-1;i>=0;i--){var r=this.steps[i];t.steps.push(r.getInverse())}return t},e.prototype.getGTListEntry=function(){for(var e="",t=0,i=this.steps;t<i.length;t++)e+=i[t].uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=e),this._gtlistentry},e.prototype.assignCachedGe=function(t,i,r){this._cached_projection[e.cacheKey(t,i)]=r},e.prototype.getCachedGeTransformation=function(t,i){for(var r="",n=0,o=this.steps;n<o.length;n++)r+=o[n].uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=r);var a=this._cached_projection[e.cacheKey(t,i)];return void 0===a?null:a},e}()}.apply(null,r))||(e.exports=n)},1676:function(e,t,i){var r,n;r=[i.dj.c(e.i),t],void 0===(n=function(e,t){var i=0;return function(){function e(e){void 0===e&&(e=null),this.uid=i++,e?(this._wkt=void 0!==e.wkt?e.wkt:null,this._wkid=void 0!==e.wkid?e.wkid:-1,this._isInverse=void 0!==e.isInverse&&!0===e.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}return e.fromGE=function(t){var i=new e;return i._wkt=t.wkt,i._wkid=t.wkid,i._isInverse=t.isInverse,i},Object.defineProperty(e.prototype,"wkt",{get:function(){return this._wkt},set:function(e){this._wkt=e,this.uid=i++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wkid",{get:function(){return this._wkid},set:function(e){this._wkid=e,this.uid=i++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInverse",{get:function(){return this._isInverse},set:function(e){this._isInverse=e,this.uid=i++},enumerable:!0,configurable:!0}),e.prototype.getInverse=function(){var t=new e;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t},e}()}.apply(null,r))||(e.exports=n)},1677:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(5),i(1),i(133),i(37),i(22),i(1494),i(1589),i(346)],void 0===(n=function(e,t,i,r,n,o,a,s,u,l){Object.defineProperty(t,"__esModule",{value:!0});var p={added:[],removed:[]},h=new n.default,c=new l(0,0,0,0),d=function(e){function t(t){var i=e.call(this)||this;return i._tiles=new Map,i._index=s(9,a("csp-restrictions")?function(e){return{minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}}:[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),i.tiles=[],i.tileScheme=t,i}return i(t,e),t.prototype.destroy=function(){this._tiles.clear()},t.prototype.has=function(e){return this._tiles.has(e)},t.prototype.get=function(e){return this._tiles.get(e)},t.prototype.findByKey=function(e){return this._tiles.get(e.id)},t.prototype.intersections=function(e,t){var i="string"==typeof e?this.get(e):e;if(!i)return[];for(var r=t*i.resolution,n=i.bounds[0]-r,o=i.bounds[1]-r,a=i.bounds[2]+r,s=i.bounds[3]+r,u=[],l=0,p=this._index.search({minX:n,minY:o,maxX:a,maxY:s});l<p.length;l++){var h=p[l],c=h.bounds.slice();c[0]=Math.max(c[0],n),c[1]=Math.max(c[1],o),c[2]=Math.min(c[2],a),c[3]=Math.min(c[3],s),c[2]-c[0]>0&&c[3]-c[1]>0&&u.push({bounds:c,tile:h})}return u},t.prototype.boundsIntersections=function(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})},t.prototype.setViewState=function(e){var t=this.tileScheme.getTileCoverage(e,0);if(t){var i=t.spans,r=t.lodInfo,n=r.level;if(i.length>0)for(var o=0,a=i;o<a.length;o++)for(var s=a[o],l=s.row,d=s.colFrom,f=s.colTo,_=d;_<=f;_++){var g=c.set(n,l,r.normalizeCol(_),r.getWorldForColumn(_)).id;if(h.add(g),!this.has(g)){var y=new u.default(this.tileScheme,g);this._tiles.set(g,y),this._index.insert(y),this.tiles.push(y),p.added.push(y)}}for(var v=this.tiles.length-1;v>=0;v--){y=this.tiles[v];h.has(y.id)||(this._tiles.delete(y.id),this.tiles.splice(v,1),this._index.remove(y),p.removed.push(y))}(p.added.length||p.removed.length)&&this.emit("update",p),h.clear(),p.added.length=0,p.removed.length=0}},t}(o);t.default=d}.apply(null,r))||(e.exports=n)},1678:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(2),i(1),i(6),i(0)],void 0===(n=function(e,t,i,r,n,o){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.graphics=null,t.renderer=null,t.view=null,t}return i(t,e),r([o.property()],t.prototype,"graphics",void 0),r([o.property()],t.prototype,"renderer",void 0),r([o.property()],t.prototype,"updating",void 0),r([o.property()],t.prototype,"view",void 0),r([o.subclass("esri.views.layers.GraphicsView")],t)}(o.declared(n))}.apply(null,r))||(e.exports=n)},2222:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(7),i(5),i(10),i(12),i(37),i(20),i(8),i(1462)],void 0===(n=function(e,t,i,r,n,o,a,s,u,l){Object.defineProperty(t,"__esModule",{value:!0});var p=function(e){function t(t){var i=e.call(this)||this;return i._highlightMap=new Map,i._localToGlobalId=t,i}return r(t,e),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this._highlightMap.size},enumerable:!0,configurable:!0}),t.prototype.has=function(e){var t=this._localToGlobalId(e);return this._highlightMap.has(t)},t.prototype.create=function(e){for(var t=this,i={remove:null,objectIds:e,objectIdSet:new Set,remove:function(){return t._delete(i)}},r=0,n=e;r<n.length;r++){var o=n[r];i.objectIdSet.add(o),this._highlightMap.has(o)||this._highlightMap.set(o,new Set),this._highlightMap.get(o).add(i)}return this.emit("change"),i},t.prototype._delete=function(e){for(var t=0,i=e.objectIds;t<i.length;t++){var r=i[t],n=this._highlightMap.get(r);n.delete(e),0===n.size&&this._highlightMap.delete(r)}this.emit("change")},t}(a),h=function(e){function t(t){var i=e.call(this)||this;return i._displayHeight=0,i._displayWidth=0,i._rendererInfo=new l.WGLRendererInfo,i._tileDataChangeHandles=new s,i.attributeView=new l.AttributeStoreView,i._tileDataChangeHandler=function(e){e.target.buildHLList(i._highlightManager)},i._highlightManagerChangeHandler=function(){for(var e=0,t=i.children;e<t.length;e++)t[e].buildHLList(i._highlightManager)},i.tileInfoView=t.tileInfoView,i.getMaterialItems=i.getMaterialItems.bind(i),i._highlightManager=new p(t.localToGlobalId),i._highlightManagerChangeHandle=i._highlightManager.on("change",i._highlightManagerChangeHandler.bind(i)),i}return r(t,e),t.prototype.dispose=function(){this.removeAllChildren();for(var e=0,t=this.children;e<t.length;e++)t[e].dispose();this._tileDataChangeHandles.removeAll(),this._highlightManagerChangeHandle.remove(),this.attributeView.destroy()},t.prototype.disposeWebGLResources=function(){for(var e=0,t=this.children;e<t.length;e++)t[e].clear()},t.prototype.highlight=function(e){return this._highlightManager.create(e)},t.prototype.displayWidth=function(){return this._displayWidth},Object.defineProperty(t.prototype,"displayHeight",{get:function(){return this._displayHeight},enumerable:!0,configurable:!0}),t.prototype.setVisibility=function(e,t){},t.prototype.getMaterialItems=function(e,t){var i=e;if(!i||0===i.length)return null;for(var r=[],n=this.stage.painter.textureManager,o=0,a=i;o<a.length;o++){var s=a[o];r.push(n.rasterizeItem(s.symbol,s.glyphIds,t))}return u.all(r).then(function(e){return e.map(function(e,t){return{id:i[t].id,mosaicItem:e}})})},t.prototype.addChild=function(t){e.prototype.addChild.call(this,t);var i=t.on("change",this._tileDataChangeHandler);return this._tileDataChangeHandles.add(i,t),t},t.prototype.removeChild=function(t){return e.prototype.removeChild.call(this,t),this._tileDataChangeHandles.remove(t),t},t.prototype.renderChildren=function(e){var t=this.stage.painter;if(this._updateTilesTransform(e.state,this.tileInfoView.getClosestInfoForScale(e.state.scale).level),e.drawPhase===l.enums.WGLDrawPhase.MAP){this.attributeView.update(this.stage.context),this.attributeView.bindTextures(this.stage.context);var r=this.tileInfoView.getClosestInfoForScale(e.state.scale).level,n=this.tileInfoView.tileInfo.scaleToZoom(e.state.scale),o=this._rendererInfo,a=i({},e,{rendererInfo:o,requiredLevel:r,displayLevel:n,context:this.stage.context,painter:t,attributeView:this.attributeView});this.sortChildren(function(e,t){return e.key.level-t.key.level!=0?e.key.level-t.key.level:e.key.row-t.key.row!=0?e.key.row-t.key.row:e.key.col-t.key.col});var s=a.drawPhase;t.draw(a,this.children,s,null),this._highlightManager.isEmpty||t.highlight(a,this.children)}},t.prototype._updateTilesTransform=function(e,t){for(var i=0,r=this.children;i<r.length;i++){var n=r[i],o=this.tileInfoView.tileInfo.lods[n.key.level].resolution/(e.resolution*e.pixelRatio);n.setTransform(e,o)}},t}(l.Container);t.default=h}.apply(null,r))||(e.exports=n)},2223:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(2),i(1),i(6),i(8),i(59),i(0)],void 0===(n=function(e,t,i,r,n,o,a,s){Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(t){var i=e.call(this,t)||this;return i._queue=new Map,i._queueArray=[],i._onGoingGraphic=null,i._onGoingPromise=null,i._scheduledNextHandle=null,i._next=i._next.bind(i),i._finalize=i._finalize.bind(i),i}return i(t,e),Object.defineProperty(t.prototype,"length",{get:function(){return this._queueArray.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return this._queueArray.length>0||null!==this._onGoingPromise},enumerable:!0,configurable:!0}),t.prototype.cancel=function(e){if(this._onGoingGraphic&&this._onGoingGraphic.graphic===e&&(this._ongoingAbortController.abort(),this._onGoingGraphic=this._onGoingPromise=null),this._queue.has(e)){var t=this._queue.get(e);this._queue.delete(e);var i=this._queueArray.indexOf(t);this._queueArray.slice(i,1)}this._scheduleNext(),this.notifyChange("updating")},t.prototype.clear=function(){this._queue.clear(),this._queueArray.length=0,this._onGoingPromise&&(this._ongoingAbortController.abort(),this._onGoingGraphic=this._onGoingPromise=null),this._cancelNext(),this.notifyChange("updating")},t.prototype.has=function(e){return this._queue.has(e)},t.prototype.isOngoing=function(e){return this._onGoingGraphic&&this._onGoingGraphic.graphic===e},t.prototype.push=function(e,t){if(!this._queue.has(e)){var i={graphic:e,addOrUpdate:t};this._queueArray.push(i),this._queue.set(e,i),this._scheduleNext(),this.notifyChange("updating")}},t.prototype.refresh=function(){this.reset()},t.prototype.reset=function(){var e=this._onGoingGraphic;if(e){var t=e.graphic,i=e.addOrUpdate;this.push(t,i)}},t.prototype._finalize=function(){this._onGoingGraphic=null,this._ongoingAbortController=null,this._onGoingPromise=null,this.notifyChange("updating"),this._scheduleNext()},t.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=null)},t.prototype._scheduleNext=function(){this._scheduledNextHandle||0===this._queue.size||null!=this._onGoingGraphic||(this._scheduledNextHandle=a.schedule(this._next))},t.prototype._next=function(){if(null==this._scheduledNextHandle||0===this._queue.size||this._onGoingGraphic)this._scheduledNextHandle=null;else{this._scheduledNextHandle=null;var e=this._peek(),t=e.graphic,i=e.addOrUpdate,r=o.createAbortController();this._queue.delete(t),this._onGoingGraphic=e,this._onGoingPromise=this.process(t,i,{signal:r.signal}),this._ongoingAbortController=r,this._onGoingPromise.then(this._finalize,this._finalize),this.notifyChange("updating")}},t.prototype._peek=function(){return 0===this._queueArray.length?null:this._queueArray.pop()},r([s.property({readOnly:!0})],t.prototype,"length",null),r([s.property({readOnly:!0})],t.prototype,"updating",null),r([s.property({constructOnly:!0})],t.prototype,"process",void 0),r([s.subclass("esri.views.2d.layers.graphics.GraphicProcessingQueue")],t)}(s.declared(n));t.default=u}.apply(null,r))||(e.exports=n)},2224:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(7),i(214),i(551),i(22),i(17),i(1494),i(35),i(157),i(71),i(1463),i(2225),i(1518)],void 0===(n=function(e,t,i,r,n,o,a,s,u,l,p,h,c,d){function f(e,t,i,r,n){return _.minX=t,_.minY=i,_.maxX=r,_.maxY=n,e.search(_)}Object.defineProperty(t,"__esModule",{value:!0});var _={minX:0,minY:0,maxX:0,maxY:0},g=u.create(),y=[],v=function(){function e(e,t,i,r,a,u){this._graphics=r,this._onAdd=a,this._onRemove=u,this._index=s(9,o("csp-restrictions")?function(e){return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}}:[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this._itemByGraphic=new n.default,this._currentLevel=-1/0,this._tileInfoView=e,this._uidFieldName=i;var l=e.getClosestInfoForScale(t);l&&(this._currentLevel=l.level,this._resolution=this._tileInfoView.getTileResolution(l.level))}return e.prototype.hitTest=function(e,t,i,r,n){e=h.normalizeMapX(e,this._tileInfoView.spatialReference);var o=.5*r*i;g[0]=e-o,g[1]=t-o,g[2]=e+o,g[3]=t+o;var s=.5*r*(i+50),c=f(this._index,e-s,t-s,e+s,t+s);if(!c||0===c.length)return[];for(var _,y={x:e,y:t},v=[],m=0,b=c;m<b.length;m++){var x=b[m];if(x.graphic.visible)switch(p.getJsonType(x.geometry)){case"esriGeometryPoint":var P=x.symbol;if(!P)continue;var w=x.geometry,S=void 0;switch(P.type){case"text":S=d.getTextSymbolBounds(w.x,w.y,P,x.size,this._resolution,n);break;case"cim":S=d.getCIMMarkerBounds(w.x,w.y,P,this._resolution,n);break;default:S=d.getMarkerSymbolBounds(w.x,w.y,P,this._resolution,n)}l.polygonContainsPoint(S,y)&&v.push(x);break;case"esriGeometryPolyline":var M=x.symbol;if(!M)continue;_=1.5*r*window.devicePixelRatio*a.pt2px(M.width),d.isPointOnPolyline(x.geometry,e,t,_)&&v.push(x);break;case"esriGeometryEnvelope":var T=x.geometry,E=u.fromValues(T.xmin,T.ymin,T.xmax,T.ymax);u.intersects(E,g)&&v.push(x);break;case"esriGeometryPolygon":l.polygonContainsPoint(x.geometry,y)&&v.push(x);break;case"esriGeometryMultipoint":var I=x.symbol;if(!I)continue;for(var O=x.geometry.points,A=void 0,G=0;G<O.length;G++){if("text"===I.type){var C=I;A=d.getTextSymbolBounds(O[G][0],O[G][1],C,x.size,this._resolution,n)}else A=d.getMarkerSymbolBounds(O[G][0],O[G][1],I,this._resolution,n);if(l.polygonContainsPoint(A,y)){v.push(x);break}}}}return v.sort(function(e,t){var i=d.graphicGeometryToNumber(e.graphic),r=d.graphicGeometryToNumber(t.graphic);return i===r?t.zorder-e.zorder:i-r}),v.map(function(e){return e.graphic})},e.prototype.getGraphicsData=function(e,t){var r=f(this._index,e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3]);if(0===r.length||0===t.length)return[];r.sort(function(e,t){return e.zorder-t.zorder}),r[0].insertAfter=-1;for(var n=1;n<r.length;n++)r[n].insertAfter=r[n-1].graphic.uid;r.sort(function(e,t){return e.graphic.uid-t.graphic.uid}),t.sort(function(e,t){return e.uid-t.uid});for(var o,a=0,s=0,u=[],l={originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[e.bounds[0],e.bounds[3]]},p=0,h=t;p<h.length;p++){var d=h[p];for(s=-2;a<r.length;)if(o=r[a],a++,d.uid===o.graphic.uid){s=o.insertAfter;break}if(o.geometry&&-2!==s){var _=o.getGeometryQuantized(l),g=i({},o.graphic.attributes);g[this._uidFieldName]=d.uid,u.push({centroid:c.default.getCentroidQuantized(o,l,this._scale),geometry:_,attributes:g,symbol:o.symbol,insertAfter:s})}}return u},e.prototype.getGraphicData=function(e,t){var r=this._itemByGraphic.get(t);if(!r)return null;var n=f(this._index,e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3]);n.sort(function(e,t){return e.zorder-t.zorder});var o=n.indexOf(r),a=0===o||-1===o?-1:n[o-1].graphic.uid,s={originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[e.bounds[0],e.bounds[3]]},u=r.getGeometryQuantized(s),l=i({},r.graphic.attributes);return l[this._uidFieldName]=t.uid,{centroid:c.default.getCentroidQuantized(r,s,this._scale),geometry:u,attributes:l,symbol:r.symbol,insertAfter:a}},e.prototype.queryTileData=function(e){var t=50*e.resolution,i=u.pad(e.bounds,t,u.create()),r=f(this._index,i[0],i[1],i[2],i[3]),n=[];return this._createTileGraphics(n,r,{originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[e.bounds[0],e.bounds[3]]}),n},e.prototype.has=function(e){return this._itemByGraphic.has(e)},e.prototype.getBounds=function(e){return this._itemByGraphic.has(e)?this._itemByGraphic.get(e).bounds:null},e.prototype.add=function(e,t,i){if(e){this._onAdd(e);var r=c.default.acquire(e,t,i,this._resolution,this._scale,this._tileInfoView.spatialReference);return this._itemByGraphic.set(e,r),i&&this._index.insert(r),r.bounds}},e.prototype.remove=function(e){if(this._itemByGraphic.has(e)){this._onRemove(e);var t=this._itemByGraphic.get(e);this._index.remove(t),this._itemByGraphic.delete(e)}},e.prototype.updateZ=function(){for(var e,t,i=this._graphics.items,r=0;r<i.length;r++)t=i[r],(e=this._itemByGraphic.get(t))&&(e.zorder=r)},e.prototype.update=function(e,t,i){var r=this._itemByGraphic.get(e),n=u.clone(r.bounds);return r.size[0]=r.size[1]=0,this._index.remove(r),r.set(e,t,i,this._resolution,this._scale,this._tileInfoView.spatialReference),i&&this._index.insert(r),{oldBounds:n,newBounds:r.bounds}},e.prototype.updateLevel=function(e){var t=this;if(this._currentLevel!==e){this._currentLevel=e;var i=this._tileInfoView.getTileResolution(e);this._resolution=i,this._scale=this._tileInfoView.getTileScale({level:e,row:0,col:0,world:0}),this._index.clear();var n=this._itemByGraphic.values();y.length=0,r.forOf(n,function(e){e.updateBounds(e.symbol,t._resolution,t._scale,t._tileInfoView.spatialReference),e.geometry&&y.push(e)}),this._index.load(y)}},e.prototype.clear=function(){this._itemByGraphic.clear(),this._index.clear()},e.prototype._createTileGraphics=function(e,t,r){var n=this._uidFieldName;t.sort(function(e,t){return e.zorder-t.zorder});for(var o,a,s,u,l=0;l<t.length;l++){o=(s=t[l]).graphic,a=s.getGeometryQuantized(r),u=0===l?-1:t[l-1].graphic.uid;var p=i({},s.graphic.attributes);p[n]=o.uid,e.push({centroid:c.default.getCentroidQuantized(s,r,this._scale),geometry:a,attributes:p,symbol:s.symbol,insertAfter:u})}},e}();t.default=v}.apply(null,r))||(e.exports=n)},2225:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(14),i(35),i(389),i(71),i(581),i(1518)],void 0===(n=function(e,t,i,r,n,o,a,s){Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(){this.bounds=r.create(),this.graphic=null,this.size=[0,0,0,0]}return e.acquire=function(t,i,r,n,o,a){var s;return void 0===t&&(t=null),0===e._pool.length?s=new e:(s=e._pool.pop(),this._set.delete(s)),s.acquire(t,i,r,n,o,a),s},e.release=function(e){e&&!this._set.has(e)&&(e.release(),this._pool.push(e),this._set.add(e))},e.getCentroidQuantized=function(e,t,r){if(o.isPolygon(e.geometry)){var u=e.symbol;if(i.isNone(u))return null;if(s.isMarkerSymbol(u.type)){var l=n.polygonCentroid(e.geometry);return a.quantizePoint(t,{},{x:l[0],y:l[1]},!1,!1)}}return null},e.prototype.acquire=function(e,t,i,r,n,o){void 0===e&&(e=null),e&&this.set(e,t,i,r,n,o)},e.prototype.release=function(){this.graphic=null,this.symbol=null,this.geometry=null},e.prototype.set=function(e,t,i,r,n,o){this.graphic=e,this.geometry=i,this.symbol=t.symbol,s.getBounds(this.bounds,this.size,t.symbol,i,t.mosaicItem,r,n,o)},e.prototype.updateBounds=function(e,t,i,r){s.getBounds(this.bounds,this.size,e,this.geometry,null,t,i,r)},e.prototype.getGeometryQuantized=function(e){if(o.isPolygon(this.geometry)){var t=this.geometry.rings;if(1===t.length&&2===t[0].length)return a.quantizeGeometry(e,{paths:[[t[0][0],t[0][1]]]})}return a.quantizeGeometry(e,this.geometry)},e._pool=[],e._set=new Set,e}();t.default=u}.apply(null,r))||(e.exports=n)}}]);