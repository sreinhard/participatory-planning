(function(){(this||window).webpackJsonp.registerAbsMids({"esri/tasks/operations/PBFWorker":1465,"esri/views/3d/layers/PointCloudWorker":1471,"esri/views/3d/layers/SceneLayerWorker":1472,"esri/layers/graphics/sources/support/CSVSourceWorker":1473,"esri/views/vectorTiles/WorkerTileHandler":1490,"esri/views/2d/layers/features/Pipeline":1491,"esri/views/2d/engine/webgl/definitions":1506,"esri/geometry/support/normalizeUtils":1509,"esri/views/2d/tiling/TileSpan":1513,"esri/tasks/operations/pbfQueryUtils":1515,"esri/views/2d/engine/webgl/Geometry":1517,"esri/core/pbf":1520,"esri/views/2d/tiling/TileInfoView":1521,"esri/views/3d/support/orientedBoundingBox":1523,"dojo/Stateful":1527,"esri/views/2d/engine/webgl/Rect":1528,"esri/views/2d/layers/features/support/Tile":1529,"esri/views/3d/layers/i3s/I3SBinaryReader":1530,"esri/views/2d/engine/webgl/GeometryUtils":1532,"esri/tasks/operations/pbfFeatureServiceParser":1535,"esri/tasks/operations/pbfDehydratedFeatureSet":1536,"esri/tasks/operations/pbfOptimizedFeatureSet":1537,"esri/views/2d/tiling/LODInfo":1539,"esri/views/2d/tiling/TileCoverage":1540,"esri/core/libs/gl-matrix-2/quatf32":1543,"esri/layers/graphics/data/QueryEngineCapabilities":1545,"esri/views/2d/layers/features/support/TileStore":1549,"esri/renderers/PointCloudRenderer":1552,"esri/views/2d/engine/webgl/TileClipper":1557,"esri/views/3d/layers/i3s/LEPCC":1588,"esri/renderers/support/pointCloud/PointSizeAlgorithm":1589,"esri/views/2d/engine/webgl/TextShaping":1599,"dojox/string/BidiEngine":1600,"esri/views/2d/engine/webgl/LineTess":1601,"esri/views/vectorTiles/Bucket":1624,"esri/core/libs/gl-matrix-2/factories/quatf32":1625,"esri/renderers/PointCloudClassBreaksRenderer":1626,"esri/renderers/support/pointCloud/PointSizeFixedSizeAlgorithm":1627,"esri/renderers/support/pointCloud/PointSizeSplatAlgorithm":1628,"esri/renderers/PointCloudStretchRenderer":1629,"esri/renderers/PointCloudUniqueValueRenderer":1630,"esri/views/3d/support/dito":1631,"esri/layers/graphics/sources/support/clientSideDefaults":1632,"esri/views/vectorTiles/MemoryBuffer":1648,"esri/views/2d/layers/features/controllers":1649,"esri/views/3d/layers/i3s/PointCloudRendererUtil":1650,"esri/views/3d/layers/i3s/I3SGeometryUtil":1651,"esri/views/3d/layers/i3s/I3SProjectionUtil":1652,"esri/views/2d/tiling/enums":1670,"esri/renderers/support/pointCloud/ColorModulation":1671,"esri/renderers/support/pointCloud/pointSizeAlgorithmJSONUtils":1672,"esri/renderers/support/pointCloud/pointSizeAlgorithmTypeUtils":1673,"esri/renderers/support/pointCloud/ColorClassBreakInfo":1674,"esri/renderers/support/pointCloud/StopInfo":1675,"esri/renderers/support/pointCloud/ColorUniqueValueInfo":1676,"dstore/Csv":1677,"esri/core/executeAsync":1766,"esri/views/vectorTiles/BackgroundBucket":1767,"esri/views/vectorTiles/CircleBucket":1768,"esri/views/vectorTiles/FillBucket":1769,"esri/views/vectorTiles/LineBucket":1770,"esri/views/vectorTiles/Placement":1771,"esri/views/vectorTiles/SymbolBucket":1772,"esri/views/vectorTiles/WorkerTile":2139,"esri/views/vectorTiles/IndexMemoryBuffer":2140,"esri/views/vectorTiles/Conflict":2141,"esri/views/vectorTiles/TileParser":2142,"esri/views/vectorTiles/Feature":2143,"esri/views/vectorTiles/SourceLayerData":2144,"esri/views/vectorTiles/VertexMemoryBuffer":2145,"esri/views/2d/layers/features/processors":2146})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[41,78],{1465:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(5),r(79),r(9),r(356),r(355),r(34),r(1515),r.dj.m(e)],void 0===(n=function(e,t,r,i,n,o,s,a,l,u){Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(){}return e.prototype._parseFeatureQuery=function(e){var t,r=l.parsePBFFeatureQuery(e.buffer,e.options);return e.options&&"dehydrated"===e.options.type&&(t=r.spatialReference.toJSON(),r.spatialReference=null),n.resolve({featureSet:r,sr:t})},e}(),f=function(t){function c(){var r=t.call(this)||this;return r._thread=void 0,s.open(o.getAbsMid("./PBFWorker",e,u),{strategy:"dedicated"}).then(function(e){void 0===r._thread?r._thread=e:e.close()}),r}return r(c,t),c.prototype.destroy=function(){this._thread&&this._thread.close(),this._thread=null},c.prototype.parseFeatureQuery=function(e,t){return e&&0!==e.byteLength?this._thread?this._thread.invoke("_parseFeatureQuery",{buffer:e,options:t},{transferList:[e]}).then(function(e){var t=e.featureSet;if(e.sr){var r=a.fromJSON(e.sr);t.spatialReference=r}for(var n=t.spatialReference,o=0,s=t.features;o<s.length;o++){var l=s[o];l.uid=i.generateUID(),l.geometry&&(l.geometry.spatialReference=n)}return e.featureSet}):n.resolve(l.parsePBFFeatureQuery(e,t)):n.resolve(null)},c}(c);t.PBFWorker=f,t.default=function(){return new c}}.apply(null,i))||(e.exports=n)},1471:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(5),r(9),r(356),r(355),r(362),r(1543),r(4),r(262),r(34),r(1530),r(1588),r(1650),r(50),r.dj.m(e)],void 0===(n=function(e,t,r,i,n,o,s,a,l,u,c,f,h,p,d,v){Object.defineProperty(t,"__esModule",{value:!0});var y=function(){function e(){}return e.prototype._process=function(e){var t=this._transform(e);return i.resolve({result:t,transferList:[t.points.buffer,t.rgb.buffer]})},e.prototype._transform=function(e){var t=this.readGeometry(e.schema,e.geometryBuffer),r=t.length/3,i=p.evaluateRenderer(e.rendererInfo,e.primaryAttribute,e.modulationAttribute,t,r);e.filterInfo&&e.filterInfo.length>0&&(r=p.filterInPlace(t,i,e.filterInfo,e.filterAttributes)),3*r<i.length&&(i=new Uint8Array(i.buffer.slice(0,3*r))),this._applyElevationOffsetInPlace(t,r,e.elevationOffset);var n=this._transformCoordinates(t,r,e.obb,c.fromJSON(e.inSR),c.fromJSON(e.outSR));return{obb:e.obb,points:n,rgb:i}},e.prototype.readGeometry=function(e,t){if(null==e.encoding||""===e.encoding){for(var r=f.createGeometryDataIndex(t,e,!1),i=f.createTypedView(t,r.vertexAttributes.position),n=r.header.fields,o=[n.offsetX,n.offsetY,n.offsetZ],s=[n.scaleX,n.scaleY,n.scaleZ],a=i.length/3,l=new Float64Array(3*a),u=0;u<a;u++)l[3*u]=i[3*u]*s[0]+o[0],l[3*u+1]=i[3*u+1]*s[1]+o[1],l[3*u+2]=i[3*u+2]*s[2]+o[2];return l}if("lepcc-xyz"===e.encoding)return h.decodeXYZ(t).result},e.prototype._transformCoordinates=function(e,t,r,i,n){if(!d.bufferToBuffer(e,i,0,e,n,0,t))throw Error("Can't reproject");var o=u.vec3f32.fromValues(r.center[0],r.center[1],r.center[2]),a=u.vec3f32.create(),c=u.vec3f32.create();s.quat.conjugate(m,r.quaternion);for(var f=new Float32Array(3*t),h=0;h<t;h++)a[0]=e[3*h]-o[0],a[1]=e[3*h+1]-o[1],a[2]=e[3*h+2]-o[2],l.vec3.transformQuat(c,a,m),r.halfSize[0]=Math.max(r.halfSize[0],Math.abs(c[0])),r.halfSize[1]=Math.max(r.halfSize[1],Math.abs(c[1])),r.halfSize[2]=Math.max(r.halfSize[2],Math.abs(c[2])),f[3*h]=a[0],f[3*h+1]=a[1],f[3*h+2]=a[2];return f},e.prototype._applyElevationOffsetInPlace=function(e,t,r){if(0!==r)for(var i=0;i<t;i++)e[3*i+2]+=r},e}(),m=a.quatf32.create(),g=function(t){function s(){var r=t.call(this)||this;return r._thread=void 0,o.open(n.getAbsMid("./PointCloudWorker",e,v)).then(function(e){void 0===r._thread?r._thread=e:e.close()}),r}return r(s,t),s.prototype.destroy=function(){this._thread&&this._thread.close(),this._thread=null},s.prototype.transform=function(e,t){return this._thread?this._thread.invoke("_process",e,{transferList:t}):i.resolve(this._transform(e))},s}(y);t.PointCloudWorker=g,t.default=function(){return new y}}.apply(null,i))||(e.exports=n)},1472:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(9),r(18),r(15),r(362),r(1543),r(4),r(3),r(34),r(374),r(1651),r(1652),r(1523),r(50),r(578),r(16)],void 0===(n=function(e,t,r,i,n,o,s,a,l,u,c,f,h,p,d,v,y){var m=function(){function e(){}return e.prototype.process=function(e){var t=[e.geometryBuffer],i=this.transform(e,t);return r.resolve({result:i,transferList:t})},e.prototype.transform=function(e,t){var r=u.fromJSON(e.indexSR),n=u.fromJSON(e.vertexSR),o=u.fromJSON(e.renderSR),s=e.geometryBuffer,l=h.computeGlobalTransformation(e.mbs,e.elevationOffset,r,o);i.mat4.invert(g,l);var m=e.obb?null:p.create([0,0,0],[-1,-1,-1],[0,0,0,1]);a.vec3.copy(x,e.mbs),x[2]+=e.elevationOffset,a.vec3.copy(_,x);for(var b=!1,I=0,w=[],C=0,T=e.geometryData;C<T.length;C++)for(var S=T[C],M=S.geometries,P=S.componentOffsets,A=0,B=M;A<B.length;A++){var E=B[A],D=e.layouts[I];++I;var F=[{name:y.VertexAttrConstants.COLOR,byteValue:255}],V=[y.VertexAttrConstants.NORMAL,y.VertexAttrConstants.NORMALCOMPRESSED,y.VertexAttrConstants.SYMBOLCOLOR,y.VertexAttrConstants.COMPONENTINDEX],L=f.interleaveGeometryBuffer(E,s,D,F,V),R=new v(new Float32Array(L),D),N=R.getAttribute(y.VertexAttrConstants.POSITION),k=e.mbs,O=e.elevationOffset;if(h.reprojectPoints(N,k,g,O,r,n,o),m&&this._updateObb(m,N,l),e.needNormals){var z={normals:R.getAttribute(y.VertexAttrConstants.NORMALCOMPRESSED),positions:N,normalInd:R.getIndices(y.VertexAttrConstants.NORMALCOMPRESSED),positionInd:R.getIndices(y.VertexAttrConstants.POSITION)},j=e.normalReferenceFrame;f.processAndInterleaveNormals(j,E,s,l,z)}var U=R.getAttribute(y.VertexAttrConstants.COMPONENTINDEX);U&&this._createComponentNumbers(U,P);var q=R.getAttribute(y.VertexAttrConstants.COLOR);q&&!b&&(b=this._hasColors(q));var G={globalTrafo:l},Y=D[0].stride,X=1-.8*Y/(Y+4),Z=c.default(L,Y/4,null,X);if(null!=Z){var J=Z.uniqueCount<65536?new Uint16Array(Z.indices):Z.indices,W=f.extractPositionData(Z.buffer,D,J);w.push({layout:D,interleavedVertexData:Z.buffer,indices:J,corMatrices:G,hasColors:b,positionData:W}),t&&(t.push(Z.buffer),t.push(J.buffer),t.push(W.data.buffer),t.push(W.indices.buffer))}else{W=f.extractPositionData(L,D);w.push({layout:D,interleavedVertexData:L,corMatrices:G,hasColors:b,positionData:W}),t&&(t.push(L),t.push(W.data.buffer),t.push(W.indices.buffer))}}return m&&(a.vec3.transformMat4(m.center,m.center,l),d.vectorToVector(m.center,o,m.center,r),m.center[2]-=e.elevationOffset),{geometryBuffer:s,transformedGeometries:w,obb:m}},e.prototype._hasColors=function(e){for(var t=e.data,r=e.size,i=e.offsetIdx,n=e.strideIdx,o=i;o<t.length;o+=n)for(var s=0;s<r;s++)if(255!==t[o+s])return!0;return!1},e.prototype._createComponentNumbers=function(e,t){for(var r=e.data,i=e.offsetIdx,n=e.strideIdx,o=r.length/n,s=0,a=i,l=0;l<o;l++)l>=t[s+1]&&s++,r[a]=s,a+=n},e.prototype._updateObb=function(e,t,r){if(e.halfSize[0]>0){a.vec3.subtract(x,e.center,e.halfSize),a.vec3.add(_,e.center,e.halfSize);for(var i=t.offsetIdx;i<t.data.length;i+=t.strideIdx)x[0]=Math.min(x[0],t.data[i]),x[1]=Math.min(x[1],t.data[i+1]),x[2]=Math.min(x[2],t.data[i+2]),_[0]=Math.max(_[0],t.data[i]),_[1]=Math.max(_[1],t.data[i+1]),_[2]=Math.max(_[2],t.data[i+2]);a.vec3.subtract(e.halfSize,_,x),a.vec3.scale(e.halfSize,e.halfSize,.5),a.vec3.add(e.center,x,_),a.vec3.scale(e.center,e.center,.5)}else{p.compute(t,e);var n=2*Math.sqrt(1+r[0]+r[5]+r[10]);b[0]=(r[9]-r[6])/n,b[1]=(r[2]-r[8])/n,b[2]=(r[4]-r[1])/n,b[3]=.25*n,o.quat.conjugate(b,b),o.quat.multiply(e.quaternion,b,e.quaternion)}},e}(),g=n.mat4f64.create(),x=l.vec3f64.create(),_=l.vec3f64.create(),b=s.quatf32.create();return m}.apply(null,i))||(e.exports=n)},1473:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(22),r(170),r(182),r(1677),r(43),r(53),r(13),r(19),r(7),r(9),r(33),r(1613),r(96),r(44),r(550),r(553),r(1544),r(1518),r(1553),r(1632)],void 0===(n=function(e,t,r,i,n,o,s,a,l,u,c,f,h,p,d,v,y,m,g,x,_,b){Object.defineProperty(t,"__esModule",{value:!0});var I=b.createDrawingInfo("esriGeometryPoint"),w=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong"];t.csvLatitudeFieldNames=["lat","latitude","y","ycenter","latitude83","latdecdeg","point-y"],t.csvLongitudeFieldNames=["lon","lng","long","longitude","x","xcenter","longitude83","longdecdeg","point-x"],t.csvDetectedDelimiters=[","," ",";","|","\t"];var C=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,T=[0,0],S=function(){return function(e,t){this.x=e,this.y=t}}(),M=function(){var e=n._parseInfo(),t=new RegExp("^"+e.regexp+"$"),r=new RegExp("["+e.group+"\\s\\xa0]","g"),i=e.factor;return function(n){var o=t.exec(n);if(e.factor=i,!o)return NaN;var s=o[1];if(!o[1]){if(!o[2])return NaN;s=o[2],e.factor*=-1}return+(s=s.replace(r,"").replace(e.decimal,"."))*e.factor}}(),P="isInteger"in Number?Number.isInteger:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},A=function(){function e(){this._fieldsMap=new Map,this._queryEngine=null}return e.prototype.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=null},e.prototype.load=function(e){var t=this;return f.all([this._fetch(e.url),this._checkProjection(e&&e.parsing&&e.parsing.spatialReference)]).then(function(r){var i=r[0],n=t._parse(i,e.parsing);if(t._queryEngine=t._createQueryEngine(i,n),n.layerDefinition.extent=t._queryEngine.fullExtent,n.layerDefinition.timeInfo){var o=t._queryEngine.timeExtent,s=o.start,a=o.end;n.layerDefinition.timeInfo.timeExtent=[s,a]}return n})},e.prototype.applyEdits=function(e){return f.reject(new l("csv-source:editing-not-supported","applyEdits() is not supported on CSVLayer"))},e.prototype.queryFeatures=function(e){return void 0===e&&(e={}),this._queryEngine.executeQuery(e)},e.prototype.queryFeatureCount=function(e){return void 0===e&&(e={}),this._queryEngine.executeQueryForCount(e)},e.prototype.queryObjectIds=function(e){return void 0===e&&(e={}),this._queryEngine.executeQueryForIds(e)},e.prototype.queryExtent=function(e){return void 0===e&&(e={}),this._queryEngine.executeQueryForExtent(e)},e.prototype._fetch=function(e){if(!e)return f.reject(new l("csv-source:invalid-source","url not defined"));var t=h.urlToObject(e);return a(t.path,{query:t.query,responseType:"text"}).then(function(e){return e.data})},e.prototype._parse=function(e,t){void 0===t&&(t={});for(var r={columnDelimiter:t.columnDelimiter,layerDefinition:null,locationInfo:{latitudeFieldName:t.latitudeField,longitudeFieldName:t.longitudeField}};e&&"\n"===e[0];)e=e.slice(1);"\n"!==e[e.length-1]&&(e+="\n");var i=this._readFirstLine(e);if(!i)throw new l("csv","CSV is empty",{csv:e});if(!t.columnDelimiter){var n=this._inferDelimiter(i);if(!n)throw new l("csv-source:invalid-delimiter","Unable to detect the delimiter from CSV");r.columnDelimiter=n}var o=i.split(r.columnDelimiter),s=r.layerDefinition={name:"csv",drawingInfo:I,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:t.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:t.spatialReference||{wkid:102100}}};if(!t.latitudeField||!t.longitudeField){var a=this._inferLocationInfo(o);if(!t.longitudeField&&!a.longitudeFieldName||!t.latitudeField&&!a.latitudeFieldName)throw new l("csv","Unable to identify latitudeField and/or longitudeField from CSV");r.locationInfo={longitudeFieldName:t.longitudeField||a.longitudeFieldName,latitudeFieldName:t.latitudeField||a.latitudeFieldName}}var u=this._inferFields(e,r.columnDelimiter,o,r.locationInfo);if(t.fields&&t.fields.length){for(var f=new Map,h=0,p=t.fields;h<p.length;h++){var d=p[h];f.set(d.name.toLowerCase(),d)}for(var v=0,y=u;v<y.length;v++){d=y[v];var m=f.get(d.name.toLowerCase());if(m){var g=d.name;c.mixin(d,m),d.name=g}this._fieldsMap.set(d.name.trim(),d),this._fieldsMap.set(d.name.trim().toLowerCase(),d)}}if(s.fields=u,!s.fields.some(function(e){return"esriFieldTypeOID"===e.type&&(s.objectIdField=e.name,!0)})){d={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1};s.objectIdField=d.name,s.fields.unshift(d),this._fieldsMap.set(d.name,d),this._fieldsMap.set(d.name.toLowerCase(),d)}if(s.timeInfo){var x=s.timeInfo;if(x.startTimeField){var _=this._fieldsMap.get(x.startTimeField.toLowerCase());_?(x.startTimeField=_.name,_.type="esriFieldTypeDate"):x.startTimeField=null}if(x.endTimeField){var b=this._fieldsMap.get(x.endTimeField.toLowerCase());b?(x.endTimeField=b.name,b.type="esriFieldTypeDate"):x.endTimeField=null}if(x.trackIdField){var w=this._fieldsMap.get(x.trackIdField.toLowerCase());x.trackIdField=w?w.name:null}x.startTimeField||x.endTimeField||(s.timeInfo=null)}return r},e.prototype._inferLocationInfo=function(e){var r=null,i=null;return e.forEach(function(e){var n=e.toLowerCase();-1===t.csvLatitudeFieldNames.indexOf(n)||i||(i=e),-1===t.csvLongitudeFieldNames.indexOf(n)||r||(r=e)}),{longitudeFieldName:r,latitudeFieldName:i}},e.prototype._inferFields=function(e,t,r,i){for(var n=[],o=this._sampleLines(e).map(function(e){return e.split(t).map(function(e){return e.trim()})}),s=this,a=0;a<r.length;a++)!function(e){var t=r[e];if(t===i.longitudeFieldName||t===i.latitudeFieldName)n.push({name:t,type:"esriFieldTypeDouble",alias:t});else{var a=o.map(function(t){return t[e]}),l=s._inferFieldType(a),u={name:t.replace(/[\s\'’‘\.\-\/\(\)]+/g,"_"),type:null,alias:t};switch(l){case"integer":u.type="esriFieldTypeInteger";break;case"double":u.type="esriFieldTypeDouble";break;case"date":u.type="esriFieldTypeDate",u.length=36;break;default:u.type="esriFieldTypeString",u.length=255}n.push(u)}}(a);return n},e.prototype._inferFieldType=function(e){var t=this;if(!e.length)return"string";var r=/[^+-.,0-9]/;return e.map(function(e){var i=!1;if(""===e||r.test(e))i=!0;else{var n=M(e);if(!isNaN(n))return/[.,]/.test(e)?"double":!P(n)||n>214783647||n<-214783648?"double":"integer";if(-1===e.indexOf("E"))i=!0;else{if(n=Number(e),!isNaN(n))return"double";if(-1===e.indexOf(","))i=!0;else{if(e=e.replace(",","."),n=Number(e),!isNaN(n))return"double";i=!0}}}if(i){if(!/^[-]?\d*[.,]?\d*$/.test(e)){var o=new Date(e);return t._isValidDate(o,e)?"date":"string"}return"string"}return"string"}).reduce(function(e,t){return e===t?t:"string"===e||"string"===t?"string":"double"===e||"double"===t?"double":void 0})},e.prototype._isValidDate=function(e,t){if(!e||"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))return!1;var r=!0;if(u("chrome")&&/\d+\W*$/.test(t)){var i=t.match(/[a-zA-Z]{2,}/);if(i){for(var n=!1,o=0;!n&&o<=i.length;)n=!C.test(i[o]),o++;r=!n}}return r},e.prototype._readFirstLine=function(e){return e.substring(0,e.indexOf("\n")).trim()},e.prototype._sampleLines=function(e,t){void 0===t&&(t=10);for(var r=!1,i=[],n=e.indexOf("\n")+1;!r&&i.length<t;){var o=e.indexOf("\n",n);if(-1!==o){var s;(s=-1===o&&n<e.length-1?e.substring(n).trim():e.substring(n,o).trim())&&i.push(s),n=o+1}else r=!0}return i},e.prototype._inferDelimiter=function(e){var r=0,i="";return t.csvDetectedDelimiters.forEach(function(t){var n=e.split(t).length;n>r&&(r=n,i=t)}),""===i?null:i},e.prototype._createQueryEngine=function(e,t){for(var r,n=t.locationInfo,a=n.latitudeFieldName,l=n.longitudeFieldName,u=t.layerDefinition,c=u.objectIdField,f=u.fields,h=u.extent,x=u.timeInfo,b=[],I=[],C=new i.Set,P=new i.Set,A=[],B=0,E=f;B<E.length;B++){var D=E[B],F=D.name,V=D.type;"esriFieldTypeDate"===V?C.add(F):w.indexOf(V)>-1&&P.add(F),F!==c&&A.push(F)}var L=new o;L.delimiter=t.columnDelimiter,L.fieldNames=A,L.newline="\n";var R=L.parse(e),N=0;R.shift();for(var k=0,O=R;k<O.length;k++){var z=O[k],j=this._parseCoordinateValue(z[a]),U=this._parseCoordinateValue(z[l]);if(null!=U&&null!=j&&!isNaN(j)&&!isNaN(U)){for(var q in z[a]=j,z[l]=U,z)if(q!==a&&q!==l)if(C.has(q)){var G=new Date(z[q]);z[q]=this._isValidDate(G,z[q])?G.getTime():null}else if(P.has(q)){var Y=M(z[q]);isNaN(Y)?z[q]=null:z[q]=Y}z[c]=N,N++,b.push(new S(U,j)),I.push(z)}}if(!d.equals({wkid:4326},h.spatialReference))if(d.isWebMercator(h.spatialReference))for(var X=0,Z=b;X<Z.length;X++){var J=Z[X];r=v.lngLatToXY(J.x,J.y,T),J.x=r[0],J.y=r[1]}else b=p.projectMany(b,s.SpatialReference.WGS84,h.spatialReference,null,!0);for(var W=new g.default({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1}),H=new _.default({fields:t.layerDefinition.fields,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:x,objectIdField:c,spatialReference:h.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:W}),K=[],Q=0;Q<b.length;Q++){var $=b[Q],ee=$.x,te=$.y,re=I[Q];re[c]=Q+1,K.push(new y.default(new m.default([],[ee,te]),re,null,re[c]))}return W.addMany(K),H},e.prototype._parseCoordinateValue=function(e){if(null==e||""===e)return null;var t=M(e);return(isNaN(t)||Math.abs(t)>181)&&(t=parseFloat(e)),t},e.prototype._checkProjection=function(e){return x.checkProjectionSupport(d.WGS84,e).catch(function(){throw new l("csv-layer","Projection not supported")})},e}();t.default=A}.apply(null,i))||(e.exports=n)},1490:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(9),r(1670),r(2139),r(614)],void 0===(n=function(e,t,r,i,n,o){return function(){function e(){this._tiles=new Map,this._spriteInfo={},this._glyphInfo={}}return e.prototype.reset=function(){this._spriteInfo={},this._glyphInfo={};var e=this._tiles;return e.forEach(function(e){return e.setObsolete()}),e.clear(),r.resolve()},e.prototype.getLayers=function(){return this._layers},e.prototype.setLayers=function(e){var t=new o(e);return this._layers=t.layers,r.resolve({data:""})},e.prototype.createTileAndParse=function(e,t){for(var o=this,s=e.key,a=e.cacheTile,l=n.pool.acquire(),u={},c=0,f=Object.keys(e.sourceName2DataAndRefKey);c<f.length;c++){var h=f[c],p=e.sourceName2DataAndRefKey[h];u[h]=p.refKey}return l.initialize(s,u,this,e.rotation),l.setDataAndParse(e.sourceName2DataAndRefKey,t).then(function(e){return a&&l.status!==i.TileStatus.INVALID&&o._tiles.set(s,l),e}).catch(function(e){return l.setObsolete(),n.pool.release(l),o._tiles.has(l.tileKey)&&o._tiles.delete(l.tileKey),r.reject(e)}).catch(function(e){return e}).then(function(e){return a||n.pool.release(l),e})},e.prototype.updateSymbols=function(e){var t=this._tiles.get(e.key);return t?t.updateSymbols(e.rotation):r.reject()},e.prototype.updateStyle=function(e,t){var i=new o(e);return this._layers=i.layers,this._tiles.forEach(function(e,r){e.reparse(t).then(function(r){t.client.invoke("updateTileData",{tileId:e.tileKey,tileData:r.result})})}),r.resolve({data:""})},e.prototype.destructTileData=function(e){return this._tiles.has(e)&&(n.pool.release(this._tiles.get(e)),this._tiles.delete(e)),r.resolve()},e.prototype.fetchSprites=function(e,t){var i=[],n=this._spriteInfo;return e.forEach(function(e){void 0===n[e]&&i.push(e)}),0===i.length?r.resolve():t.invoke("getSprites",i).then(function(e){for(var t in e){var r=e[t];n[t]=r}})},e.prototype.getSpriteItems=function(){return this._spriteInfo},e.prototype.fetchGlyphs=function(e,t,i,n){var o=[],s=this._glyphInfo[t];return s?i.forEach(function(e){s[e]||o.push(e)}):(s=this._glyphInfo[t]=[],i.forEach(function(e){return o.push(e)})),0===o.length?r.resolve():n.invoke("getGlyphs",{tileID:e,font:t,codePoints:o}).then(function(e){for(var t in e)s[t]=e[t]})},e.prototype.getGlyphItems=function(e){return this._glyphInfo[e]},e}()}.apply(null,i))||(e.exports=n)},1491:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(25),r(22),r(6),r(97),r(9),r(0),r(216),r(81),r(615),r(1649),r(2146),r(1549),r(1521)],void 0===(n=function(e,t,r,i,n,o,s,a,l,u,c,f,h,p,d,v,y){Object.defineProperty(t,"__esModule",{value:!0});var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.controller=null,t.processor=null,t.remoteClient=null,t.serviceAndViewInfo=null,t.tileStore=null,t.viewState=null,t}return r(t,e),t.prototype.initialize=function(){var e=this;this.watch("updating",function(t){e.remoteClient.invoke("setUpdating",t)})},t.prototype.destroy=function(){this.controller&&this.controller.destroy(),this.processor&&this.processor.destroy()},Object.defineProperty(t.prototype,"updating",{get:function(){var e=this.controller,t=this.processor;return!e||!t||e.updating||t.updating||!1},enumerable:!0,configurable:!0}),t.prototype.startup=function(e){var t=new y(c.fromJSON(e.tileInfo));this.serviceAndViewInfo=e,this.tileStore=new v.default(t)},t.prototype.configure=function(e){return a.safeCast(this._configure(e))},t.prototype.setViewState=function(e){var t=h.fromJSON(e);this._set("viewState",t),this.tileStore.setViewState(t),this.controller&&this.controller.setViewState(t)},t.prototype._configure=function(e){return n(this,void 0,void 0,function(){var t,r,i;return o(this,function(n){switch(n.label){case 0:return[4,l.all([a.safeCast(this._handleControllerConfig(e.controller)),a.safeCast(this._handleProcessorConfig(e.processor))])];case 1:return t=n.sent(),r=t[0],i=t[1],(r||i)&&(this.controller.processor=this.processor),[2]}})})},t.prototype._handleControllerConfig=function(e){return n(this,void 0,void 0,function(){return o(this,function(t){return e?[2,this._createController(e)]:[2,null]})})},t.prototype._handleProcessorConfig=function(e){return n(this,void 0,void 0,function(){var t;return o(this,function(r){return e?(t=this._createProcessor(e),[2,"symbol"===e.type&&e.hasGeometryExpr?f.enableGeometryOperations().then(function(){return t}):t]):[2,null]})})},t.prototype._createController=function(e){return n(this,void 0,void 0,function(){var t,r,i,n,s,a;return o(this,function(o){switch(o.label){case 0:return r=(t=this).remoteClient,i=t.tileStore,n=t.serviceAndViewInfo,s={remoteClient:r,tileStore:i,serviceAndViewInfo:n},[4,p.createController(e,s)];case 1:return a=o.sent(),this.controller&&this.controller.destroy(),a.setViewState(this.viewState),this.controller=a,[2,a]}})})},t.prototype._createProcessor=function(e){return n(this,void 0,void 0,function(){var t,r,i,n,s,a;return o(this,function(o){switch(o.label){case 0:return r=(t=this).remoteClient,i=t.tileStore,n=t.serviceAndViewInfo,s={remoteClient:r,tileStore:i,serviceAndViewInfo:n},[4,d.createProcessor(e.type,s)];case 1:return a=o.sent(),this.processor&&this.processor.destroy(),a.configuration=e,this.processor=a,[2,a]}})})},i([u.property()],t.prototype,"controller",void 0),i([u.property()],t.prototype,"processor",void 0),i([u.property({dependsOn:["controller.updating","processor.updating"]})],t.prototype,"updating",null),i([u.property()],t.prototype,"viewState",void 0),i([u.subclass()],t)}(u.declared(s));t.default=m}.apply(null,i))||(e.exports=n)},1506:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EXTRUDE_SCALE=64,t.PICTURE_FILL_COLOR=4294967295,t.TILE_SIZE=512,t.ANGLE_FACTOR_256=256/360,t.DEBUG_LABELS=!1,t.COLLISION_BUCKET_SIZE=128,t.DOT_DENSITY_MAX_FIELDS=8,t.COLLISION_MAX_ZOOM_DELTA=3,t.COLLISION_EARLY_REJECT_BUCKET_SIZE=16,t.COLLISION_BOX_PADDING=8,t.COLLISION_TILE_BOX_SIZE=t.TILE_SIZE/t.COLLISION_BUCKET_SIZE,t.COLLISION_PLACEMENT_PADDING=8,t.HEURISTIC_GLYPHS_PER_LINE=50,t.HEURISTIC_GLYPHS_PER_FEATURE=10,t.GLYPH_SIZE=24,t.TEXT_LINE_HEIGHT=1.2*t.GLYPH_SIZE,t.TEXT_MAX_WIDTH=10*t.GLYPH_SIZE,t.TEXT_SPACING=0,t.AVERAGE_GLYPH_MOSAIC_ITEM={metrics:{width:15,height:17,left:0,top:-7,advance:14}},t.TEXTURE_BINDING_SPRITE_ATLAS=0,t.TEXTURE_BINDING_GLYPH_ATLAS=1,t.TEXTURE_BINDING_HIGHLIGHT_0=2,t.TEXTURE_BINDING_HIGHLIGHT_1=3,t.TEXTURE_BINDING_RENDERER_0=4,t.TEXTURE_BINDING_RENDERER_1=5,t.MAX_FILTERS=2,t.FILTER_FLAG_0=1,t.EFFECT_FLAG_0=2}.apply(null,i))||(e.exports=n)},1509:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(98),r(13),r(10),r(9),r(65),r(89),r(34),r(96),r(44),r(551)],void 0===(n=function(e,t,r,i,n,o,s,a,l,u,c,f){function h(e){return"polygon"===e.type}function p(e){return"polygon"===e[0].type}function d(e){return"polyline"===e[0].type}function v(e){return h(e)?e.rings:e.paths}function y(e,t){return Math.ceil((e-t)/(2*t))}function m(e,t){for(var r=0,i=v(e);r<i.length;r++)for(var n=0,o=i[r];n<o.length;n++){o[n][0]+=t}return e}function g(e){for(var t=[],r=0,i=0,n=0;n<e.length;n++){for(var o=e[n],s=null,a=0;a<o.length;a++)s=o[a],t.push(s),0===a?i=r=s[0]:(r=Math.min(r,s[0]),i=Math.max(i,s[0]));s&&t.push([(r+i)/2,0])}return t}function x(e,t){if(!(e instanceof a||e instanceof s)){var r="straightLineDensify: the input geometry is neither polyline nor polygon";throw T.error(r),new i(r)}for(var n=[],o=0,l=v(e);o<l.length;o++){var u=l[o],c=[];n.push(c),c.push([u[0][0],u[0][1]]);for(var f=0;f<u.length-1;f++){var p=u[f][0],d=u[f][1],y=u[f+1][0],m=u[f+1][1],g=Math.sqrt((y-p)*(y-p)+(m-d)*(m-d)),x=(m-d)/g,_=(y-p)/g,b=g/t;if(b>1){for(var I=1;I<=b-1;I++){var w=I*t,C=_*w+p,S=x*w+d;c.push([C,S])}var M=(g+Math.floor(b-1)*t)/2,P=_*M+p,A=x*M+d;c.push([P,A])}c.push([y,m])}}return h(e)?new s({rings:n,spatialReference:e.spatialReference}):new a({paths:n,spatialReference:e.spatialReference})}function _(e,t,r){if(t){var i=x(e,1e6);e=c.webMercatorToGeographic(i,!0)}return r&&(e=m(e,r)),e}function b(e,t,r){var i;if(Array.isArray(e)){if((i=e[0])>t){var n=y(i,t);e[0]=i+n*(-2*t)}else if(i<r){n=y(i,r);e[0]=i+n*(-2*r)}}else if((i=e.x)>t){n=y(i,t);e=e.clone().offset(n*(-2*t),0)}else if(i<r){n=y(i,r);e=e.clone().offset(n*(-2*r),0)}return e}function I(e,t){for(var r=-1,i=0;i<t.cutIndexes.length;i++)!function(i){for(var n=t.cutIndexes[i],o=t.geometries[i],s=v(o),a=0;a<s.length;a++)!function(e){var t=s[e];t.some(function(r){if(r[0]<180)return!0;for(var i=0,n=0;n<t.length;n++){var s=t[n][0];i=s>i?s:i}for(var a=-360*y(i=Number(i.toFixed(9)),180),l=0;l<t.length;l++){var u=o.getPoint(e,l);o.setPoint(e,l,u.clone().offset(a,0))}return!0})}(a);if(n===r){if(p(e))for(var l=0,u=v(o);l<u.length;l++){var c=u[l];e[n]=e[n].addRing(c)}else if(d(e))for(var f=0,h=v(o);f<h.length;f++){var m=h[f];e[n]=e[n].addPath(m)}}else r=n,e[n]=o}(i);return e}function w(){return C||(C=new f({url:r.geometryServiceUrl})),C}Object.defineProperty(t,"__esModule",{value:!0});var C,T=n.getLogger("esri.geometry.support.normalizeUtils"),S={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new a({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:l.WebMercator}),minus180Line:new a({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:l.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new a({paths:[[[180,-180],[180,180]]],spatialReference:l.WebMercator}),minus180Line:new a({paths:[[[-180,-180],[-180,180]]],spatialReference:l.WebMercator})}};t.straightLineDensify=x,t.normalizeCentralMeridian=function e(t,r,i){if(!Array.isArray(t))return e([t],r);r||(r=w());for(var n,l,f,h,p,d,v,g,x=0,C=[],T=[],M=0,P=t;M<P.length;M++){var A=P[M];if(A)if(n||(n=A.spatialReference,l=u.getInfo(n),f=n.isWebMercator,h=S[d=f?102100:4326].maxX,p=S[d].minX,v=S[d].plus180Line,g=S[d].minus180Line),l)if("mesh"===A.type)T.push(A);else if("point"===A.type)T.push(b(A.clone(),h,p));else if("multipoint"===A.type){var B=A.clone();B.points=B.points.map(function(e){return b(e,h,p)}),T.push(B)}else if("extent"===A.type){var E=(D=A.clone())._normalize(!1,!1,l);T.push(E.rings?new s(E):E)}else if(A.extent){var D,F=y((D=A.extent).xmin,p)*(2*h),V=0===F?A.clone():m(A.clone(),F);D.offset(F,0),D.intersects(v)&&D.xmax!==h?(x=D.xmax>x?D.xmax:x,V=_(V,f),C.push(V),T.push("cut")):D.intersects(g)&&D.xmin!==p?(x=D.xmax*(2*h)>x?D.xmax*(2*h):x,V=_(V,f,360),C.push(V),T.push("cut")):T.push(V)}else T.push(A.clone());else T.push(A);else T.push(A)}for(var L=y(x,h),R=-90,N=L,k=new a;L>0;){var O=360*L-180;k.addPath([[O,R],[O,-1*R]]),R*=-1,L--}if(C.length>0&&N>0)return r.cut(C,k,i).then(function(e){return I(C,e)}).then(function(e){for(var n=[],o=[],s=0;s<T.length;s++){var a=T[s];if("cut"!==a)o.push(a);else{var l=e.shift(),u=t[s];"polygon"===u.type&&u.rings&&u.rings.length>1&&l.rings.length>=u.rings.length?(n.push(l),o.push("simplify")):o.push(f?c.geographicToWebMercator(l):l)}}return n.length?r.simplify(n,i).then(function(e){for(var t=[],r=0;r<o.length;r++){var i=o[r];"simplify"!==i?t.push(i):t.push(f?c.geographicToWebMercator(e.shift()):e.shift())}return t}):o});for(var z=[],j=0;j<T.length;j++){var U=T[j];if("cut"!==U)z.push(U);else{var q=C.shift();z.push(!0===f?c.geographicToWebMercator(q):q)}}return o.resolve(z)},t.getDenormalizedExtent=function(e){var t;if(!e)return null;var r=e.extent;if(!r)return null;var i=e.spatialReference&&u.getInfo(e.spatialReference);if(!i)return r;var n,o=i.valid,s=o[0],a=o[1],l=2*a,c=r.width,f=r.xmin,h=r.xmax;if(f=(t=[h,f])[0],h=t[1],"extent"===e.type||0===c||c<=a||c>l||f<s||h>a)return r;switch(e.type){case"polygon":if(!(e.rings.length>1))return r;n=g(e.rings);break;case"polyline":if(!(e.paths.length>1))return r;n=g(e.paths);break;case"multipoint":n=e.points}for(var p=r.clone(),d=0;d<n.length;d++){var v=n[d][0];v<0?(v+=a,h=Math.max(v,h)):(v-=a,f=Math.min(v,f))}return p.xmin=f,p.xmax=h,p.width<c?(p.xmin-=a,p.xmax-=a,p):r},t.normalizeMapX=function(e,t){var r=u.getInfo(t);if(r){var i=r.valid,n=i[0],o=i[1],s=o-n;if(e<n)for(;e<n;)e+=s;if(e>o)for(;e>o;)e-=s}return e}}.apply(null,i))||(e.exports=n)},1513:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(80)],void 0===(n=function(e,t,r){return function(){function e(e,t,r){this.row=e,this.colFrom=t,this.colTo=r}return e.pool=new r(e,!0),e}()}.apply(null,i))||(e.exports=n)},1515:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1535)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.parsePBFFeatureQuery=function(e,t){var i=r.parseFeatureQuery(e,t).queryResult.featureResult;if(i&&i.features&&i.features.length&&i.objectIdFieldName)for(var n=i.objectIdFieldName,o=0,s=i.features;o<s.length;o++){var a=s[o];a.attributes&&(a.objectId=a.attributes[n])}return i}}.apply(null,i))||(e.exports=n)},1517:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.equals=function(e,t){return e===this.x&&t===this.y},e.prototype.isEqual=function(e){return e.x===this.x&&e.y===this.y},e.prototype.setCoords=function(e,t){this.x=e,this.y=t},e.prototype.normalize=function(){var e=this.x,t=this.y,r=Math.sqrt(e*e+t*t);this.x/=r,this.y/=r},e.prototype.rightPerpendicular=function(){var e=this.x;this.x=this.y,this.y=-e},e.prototype.move=function(e,t){this.x+=e,this.y+=t},e.prototype.assign=function(e){this.x=e.x,this.y=e.y},e.prototype.assignAdd=function(e,t){this.x=e.x+t.x,this.y=e.y+t.y},e.prototype.assignSub=function(e,t){this.x=e.x-t.x,this.y=e.y-t.y},e.prototype.rotate=function(e,t){var r=this.x,i=this.y;this.x=r*e-i*t,this.y=r*t+i*e},e.prototype.scale=function(e){this.x*=e,this.y*=e},e.prototype.length=function(){var e=this.x,t=this.y;return Math.sqrt(e*e+t*t)},e.distance=function(e,t){var r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)},e.add=function(t,r){return new e(t.x+r.x,t.y+r.y)},e.sub=function(t,r){return new e(t.x-r.x,t.y-r.y)},e}();t.Point=r}.apply(null,i))||(e.exports=n)},1520:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(e,t,r,i){this._tag=0,this._dataType=99,this._data=e,this._dataView=t,this._pos=r||0,this._end=i||e.byteLength}return e.prototype.clone=function(){return new e(this._data,this._dataView,this._pos,this._end)},e.prototype.pos=function(){return this._pos},e.prototype.next=function(e){for(;;){if(this._pos===this._end)return!1;var t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0},e.prototype.empty=function(){return this._pos>=this._end},e.prototype.tag=function(){return this._tag},e.prototype.getInt32=function(){return this._decodeVarint()},e.prototype.getInt64=function(){return this._decodeVarint()},e.prototype.getUInt32=function(){var e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))},e.prototype.getUInt64=function(){return this._decodeVarint()},e.prototype.getSInt32=function(){var e=this.getUInt32();return e>>>1^-(1&e)|0},e.prototype.getSInt64=function(){return this._decodeSVarint()},e.prototype.getBool=function(){var e=0!==this._data[this._pos];return this._skip(1),e},e.prototype.getEnum=function(){return this._decodeVarint()},e.prototype.getFixed64=function(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+4294967296*e.getUint32(t+4,!0);return this._skip(8),r},e.prototype.getSFixed64=function(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+4294967296*e.getInt32(t+4,!0);return this._skip(8),r},e.prototype.getDouble=function(){var e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e},e.prototype.getFixed32=function(){var e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e},e.prototype.getSFixed32=function(){var e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e},e.prototype.getFloat=function(){var e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e},e.prototype.getString=function(){var e=this._getLength(),t=this._pos,r=this._toString(this._data,t,t+e);return this._skip(e),r},e.prototype.getBytes=function(){var e=this._getLength(),t=this._pos,r=this._toBytes(this._data,t,t+e);return this._skip(e),r},e.prototype.getMessage=function(){var t=this._getLength(),r=this._pos,i=new e(this._data,this._dataView,r,r+t);return this._skip(t),i},e.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}},e.prototype._skip=function(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e},e.prototype._decodeVarint=function(){var e,t=this._data,r=this._pos,i=0;if(this._end-r>=10)do{if(i|=127&(e=t[r++]),0==(128&e))break;if(i|=(127&(e=t[r++]))<<7,0==(128&e))break;if(i|=(127&(e=t[r++]))<<14,0==(128&e))break;if(i|=(127&(e=t[r++]))<<21,0==(128&e))break;if(i+=268435456*(127&(e=t[r++])),0==(128&e))break;if(i+=34359738368*(127&(e=t[r++])),0==(128&e))break;if(i+=4398046511104*(127&(e=t[r++])),0==(128&e))break;if(i+=562949953421312*(127&(e=t[r++])),0==(128&e))break;if(i+=72057594037927940*(127&(e=t[r++])),0==(128&e))break;if(i+=0x8000000000000000*(127&(e=t[r++])),0==(128&e))break;throw new Error("Varint too long!")}while(0);else{for(var n=1;r!==this._end&&0!=(128&(e=t[r]));)++r,i+=(127&e)*n,n*=128;if(r===this._end)throw new Error("Varint overrun!");++r,i+=e*n}return this._pos=r,i},e.prototype._decodeSVarint=function(){var e=this._decodeVarint();return e%2?-(e+1)/2:e/2},e.prototype._getLength=function(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()},e.prototype._toString=function(e,t,r){var i="",n="";r=Math.min(this._end,r);for(var o=t;o<r;++o){var s=e[o];128&s?n+="%"+s.toString(16):(i+=decodeURIComponent(n)+String.fromCharCode(s),n="")}return n.length&&(i+=decodeURIComponent(n)),i},e.prototype._toBytes=function(e,t,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,t,r-t)},e}()}.apply(null,i))||(e.exports=n)},1521:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(96),r(1539),r(1540),r(352),r(1513)],void 0===(n=function(e,t,r,i,n,o,s){var a=new o("0/0/0/0"),l=function(){function e(e,t,r,i,n,o,s,a){this.x=e,this.ymin=t,this.ymax=r,this.invM=i,this.leftAdjust=n,this.rightAdjust=o,this.leftBound=s,this.rightBound=a}return e.create=function(t,r){var i;t[1]>r[1]&&(t=(i=[r,t])[0],r=i[1]);var n=t[0],o=t[1],s=r[0],a=r[1],l=s-n,u=a-o,c=0!==u?l/u:0,f=(Math.ceil(o)-o)*c,h=(Math.floor(o)-o)*c;return new e(n,Math.floor(o),Math.ceil(a),c,l<0?f:h,l<0?h:f,l<0?s:n,l<0?n:s)},e.prototype.incrRow=function(){this.x+=this.invM},e.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)},e.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)},e}(),u=[[0,0],[0,0],[0,0],[0,0]];return function(){function e(e,t){var r=this;this.tileInfo=e,this.fullExtent=t,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};var n=e.lods.slice();n.sort(function(e,t){return t.scale-e.scale});var o=this._lodInfos=n.map(function(r){return i.create(e,r,t)});n.forEach(function(e,t){r._infoByLevel[e.level]=o[t],r._infoByScale[e.scale]=o[t],r.scales[t]=e.scale},this),this._wrap=e.isWrappable}return Object.defineProperty(e.prototype,"spatialReference",{get:function(){return this.tileInfo.spatialReference},enumerable:!0,configurable:!0}),e.prototype.getLODInfoAt=function(e){return this._infoByLevel["number"==typeof e?e:e.level]},e.prototype.getTileBounds=function(e,t,r){void 0===r&&(r=!1),a.set(t);var i=this._infoByLevel[a.level];return i?i.getTileBounds(e,a,r):e},e.prototype.getTileCoords=function(e,t,r){void 0===r&&(r=!1),a.set(t);var i=this._infoByLevel[a.level];return i?i.getTileCoords(e,a,r):e},e.prototype.getTileCoverage=function(e,t,r){void 0===t&&(t=192),void 0===r&&(r="closest");var i,o,a,c="closest"===r?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),f=n.pool.acquire(c),h=this._wrap,p=1/0,d=-1/0,v=f.spans;u[0][0]=u[0][1]=u[1][1]=u[3][0]=-t,u[1][0]=u[2][0]=e.size[0]+t,u[2][1]=u[3][1]=e.size[1]+t;for(var y=0,m=u;y<m.length;y++){var g=m[y];e.toMap(g,g),g[0]=c.getColumnForX(g[0]),g[1]=c.getRowForY(g[1])}for(var x=[],_=3,b=0;b<4;b++)if(u[b][1]!==u[_][1]){var I=l.create(u[b],u[_]);p=Math.min(I.ymin,p),d=Math.max(I.ymax,d),void 0===x[I.ymin]&&(x[I.ymin]=[]),x[I.ymin].push(I),_=b}else _=b;if(null==p||null==d||d-p>100)return null;var w=[];for(i=p;i<d;){null!=x[i]&&(w=w.concat(x[i])),o=1/0,a=-1/0;for(b=w.length-1;b>=0;b--){I=w[b];o=Math.min(o,I.getLeftCol()),a=Math.max(a,I.getRightCol())}if(o=Math.floor(o),a=Math.floor(a),i>=c.first[1]&&i<=c.last[1])if(h)if(c.size[0]<c.worldSize[0]){var C=Math.floor(a/c.worldSize[0]);for(b=Math.floor(o/c.worldSize[0]);b<=C;b++)v.push(new s(i,Math.max(c.getFirstColumnForWorld(b),o),Math.min(c.getLastColumnForWorld(b),a)))}else v.push(new s(i,o,a));else o>c.last[0]||a<c.first[0]||(o=Math.max(o,c.first[0]),a=Math.min(a,c.last[0]),v.push(new s(i,o,a)));i+=1;for(b=w.length-1;b>=0;b--){(I=w[b]).ymax>=i?I.incrRow():w.splice(b,1)}}return f},e.prototype.getTileParentId=function(e){a.set(e);var t=this._infoByLevel[a.level],r=this._lodInfos.indexOf(t)-1;return r<0?null:(this._getTileIdAtLOD(a,this._lodInfos[r],a),a.id)},e.prototype.getTileResolution=function(e){var t=this._infoByLevel["object"==typeof e?e.level:e];return t?t.resolution:-1},e.prototype.getTileScale=function(e){var t=this._infoByLevel[e.level];return t?t.scale:-1},e.prototype.intersects=function(e,t){a.set(t);var r=this._infoByLevel[a.level],i=e.lodInfo;if(i.resolution>r.resolution){this._getTileIdAtLOD(a,i,a);for(var n=i.denormalizeCol(a.col,a.world),o=0,s=e.spans;o<s.length;o++){var l=s[o];if(l.row===a.row&&l.colFrom<=n&&l.colTo>=n)return!0}}if(i.resolution<r.resolution){var u=e.spans.reduce(function(e,t){return e[0]=Math.min(e[0],t.row),e[1]=Math.max(e[1],t.row),e[2]=Math.min(e[2],t.colFrom),e[3]=Math.max(e[3],t.colTo),e},[1/0,-1/0,1/0,-1/0]),c=u[0],f=u[1],h=u[2],p=u[3],d=r.denormalizeCol(a.col,a.world),v=i.getColumnForX(r.getXForColumn(d)),y=i.getRowForY(r.getYForRow(a.row)),m=i.getColumnForX(r.getXForColumn(d+1))-1,g=i.getRowForY(r.getYForRow(a.row+1))-1;return!(v>p||m<h||y>f||g<c)}var x=i.denormalizeCol(a.col,a.world);return e.spans.some(function(e){return e.row===a.row&&e.colFrom<=x&&e.colTo>=x})},e.prototype.normalizeBounds=function(e,t,i){if(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this._wrap){var n=r.getInfo(this.tileInfo.spatialReference),o=-i*(n.valid[1]-n.valid[0]);e[0]+=o,e[2]+=o}return e},e.prototype.getSmallestInfoForScale=function(e){var t=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>t[0])return this._infoByScale[t[0]];for(var r=1;r<t.length-1;r++)if(e>t[r])return this._infoByScale[t[r-1]];return this._infoByScale[t[t.length-1]]},e.prototype.getClosestInfoForScale=function(e){var t=this.scales;return this._infoByScale[e]?this._infoByScale[e]:(e=t.reduce(function(t,r,i,n){return Math.abs(r-e)<Math.abs(t-e)?r:t},t[0]),this._infoByScale[e])},e.prototype.scaleToLevel=function(e){var t=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(var r=t.length-1;r>=0;r--)if(e<t[r]){return r===t.length-1?this._infoByScale[t[t.length-1]].level:this._infoByScale[t[r]].level+(t[r]-e)/(t[r]-t[r+1])}return this._infoByScale[t[0]].level},e.prototype.scaleToZoom=function(e){return this.tileInfo.scaleToZoom(e)},e.prototype._getTileIdAtLOD=function(e,t,r){var i=this._infoByLevel[r.level];return e.set(r),t.resolution<i.resolution?null:t.resolution===i.resolution?e:(e.level=t.level,e.col=Math.floor(r.col*i.resolution/t.resolution+.01),e.row=Math.floor(r.row*i.resolution/t.resolution+.01),e)},e}()}.apply(null,i))||(e.exports=n)},1523:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(91),r(565),r(362),r(1543),r(4),r(262),r(3),r(45),r(1631),r(29)],void 0===(n=function(e,t,r,i,n,o,s,a,l,u,c,f){function h(e,t,r){return{center:l.vec3f64.clone(e),halfSize:a.vec3f32.clone(t),quaternion:o.quatf32.clone(r)}}function p(e,t){var r=f.plane.signedDistance(t,e.center),i=d(e,t);return r>i?1:r<-i?-1:0}function d(e,t){n.quat.conjugate(v,e.quaternion),s.vec3.transformQuat(y,t,v);var r=e.halfSize;return Math.abs(y[0]*r[0])+Math.abs(y[1]*r[1])+Math.abs(y[2]*r[2])}Object.defineProperty(t,"__esModule",{value:!0});var v=o.quatf32.create(),y=a.vec3f32.create(),m=a.vec3f32.create(),g=i.mat3f32.create(),x=function(){return function(e){var t=56*e;this.buffer=new ArrayBuffer(t),this.obbs=new Array(e);for(var r=0;r<e;r++)this.obbs[r]={center:l.vec3f64.createView(this.buffer,56*r+0),halfSize:a.vec3f32.createView(this.buffer,56*r+24),quaternion:o.quatf32.createView(this.buffer,56*r+36)}}}();t.ObbArray=x,t.create=h,t.clone=function(e){return h(e.center,e.halfSize,e.quaternion)},t.set=function(e,t){s.vec3.copy(t.center,e.center),s.vec3.copy(t.halfSize,e.halfSize),n.quat.copy(t.quaternion,e.quaternion)},t.compute=function(e,t){return t||(t=h([0,0,0],[-1,-1,-1],[0,0,0,1])),c.computeOBB(e,t),t},t.intersectPlane=p,t.toAaBoundingBox=function(e,t){t||(t=u.create());var i=r.mat3.fromQuat(g,e.quaternion),n=e.halfSize[0]*Math.abs(i[0])+e.halfSize[1]*Math.abs(i[3])+e.halfSize[2]*Math.abs(i[6]),o=e.halfSize[0]*Math.abs(i[1])+e.halfSize[1]*Math.abs(i[4])+e.halfSize[2]*Math.abs(i[7]),s=e.halfSize[0]*Math.abs(i[2])+e.halfSize[1]*Math.abs(i[5])+e.halfSize[2]*Math.abs(i[8]);return t[0]=e.center[0]-n,t[1]=e.center[1]-o,t[2]=e.center[2]-s,t[3]=e.center[0]+n,t[4]=e.center[1]+o,t[5]=e.center[2]+s,t},t.minimumDistancePlane=function(e,t){return f.plane.signedDistance(t,e.center)-d(e,t)},t.maximumDistancePlane=function(e,t){return f.plane.signedDistance(t,e.center)+d(e,t)},t.isVisible=function(e,t){return p(e,t.planes[0])<=0&&p(e,t.planes[1])<=0&&p(e,t.planes[2])<=0&&p(e,t.planes[3])<=0&&p(e,t.planes[4])<=0&&p(e,t.planes[5])<=0},t.intersectLine=function(e,t,r,i){void 0===i&&(i=0),n.quat.conjugate(v,e.quaternion),s.vec3.subtract(y,t,e.center);for(var o=s.vec3.transformQuat(y,y,v),a=s.vec3.transformQuat(m,r,v),l=-1/0,u=1/0,c=0;c<3;c++)if(Math.abs(a[c])>1e-6){var f=(i+e.halfSize[c]-o[c])/a[c],h=(-i-e.halfSize[c]-o[c])/a[c];l=Math.max(l,Math.min(f,h)),u=Math.min(u,Math.max(f,h))}else if(o[c]>e.halfSize[c]+i||o[c]<-e.halfSize[c]-i)return!1;return l<=u}}.apply(null,i))||(e.exports=n)},1527:function(e,t,r){var i,n;i=[r(351),r(30),r(70),r(364)],void 0===(n=function(e,t,r,i){return e("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(e){var t=this._attrPairNames;return t[e]?t[e]:t[e]={s:"_"+e+"Setter",g:"_"+e+"Getter"}},postscript:function(e){e&&this.set(e)},_get:function(e,t){return"function"==typeof this[t.g]?this[t.g]():this[e]},get:function(e){return this._get(e,this._getAttrNames(e))},set:function(e,t){if("object"==typeof e){for(var r in e)e.hasOwnProperty(r)&&"_watchCallbacks"!=r&&this.set(r,e[r]);return this}var n,o=this._getAttrNames(e),s=this._get(e,o),a=this[o.s];if("function"==typeof a?n=a.apply(this,Array.prototype.slice.call(arguments,1)):this[e]=t,this._watchCallbacks){var l=this;i(n,function(){l._watchCallbacks(e,s,t)})}return this},_changeAttrValue:function(e,t){var r=this.get(e);return this[e]=t,this._watchCallbacks&&this._watchCallbacks(e,r,t),this},watch:function(e,t){var i=this._watchCallbacks;if(!i){var n=this;i=this._watchCallbacks=function(e,t,r,o){var s=function(i){if(i)for(var o=0,s=(i=i.slice()).length;o<s;o++)i[o].call(n,e,t,r)};s(i["_"+e]),o||s(i["*"])}}t||"function"!=typeof e?e="_"+e:(t=e,e="*");var o=i[e];"object"!=typeof o&&(o=i[e]=[]),o.push(t);var s={};return s.unwatch=s.remove=function(){var e=r.indexOf(o,t);e>-1&&o.splice(e,1)},s}})}.apply(null,i))||(e.exports=n)},1528:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(e,t,r,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=e,this.y=t,this.width=r,this.height=i}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this.width<=0||this.height<=0},enumerable:!0,configurable:!0}),e}()}.apply(null,i))||(e.exports=n)},1529:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(170),r(213),r(37),r(557),r(352)],void 0===(n=function(e,t,r,i,n,o,s){function a(e,t){var r=e.bounds,i=t.bounds;return e.key.id!==t.key.id&&e.key.world===t.key.world&&r[0]<=i[0]&&r[1]<=i[1]&&r[2]>=i[2]&&r[3]>=i[3]}Object.defineProperty(t,"__esModule",{value:!0}),t.isParentOf=a,t.isChildOf=function(e,t){return a(t,e)};var l=function(){function e(e,t){this.bounds=n.create(),this.key=new s(0,0,0,0),this.objectIds=new r.default,this.key.set(t);var i=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.scale=i.scale,this.level=i.level,this.needsClear=!0}return Object.defineProperty(e.prototype,"id",{get:function(){return this.key.id},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.tileInfoView,this.id)},e.prototype.createChildTiles=function(){for(var t=this.key.getChildKeys(),r=i.acquire(),n=0;n<t.length;n++)r[n]=new e(this.tileInfoView,t[n]);return r},e.prototype.getQuantizationParameters=function(){return o.default.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})},e}();t.Tile=l,t.default=l}.apply(null,i))||(e.exports=n)},1530:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(13),r(7),r(10),r(1588)],void 0===(n=function(e,t,r,i,n,o){function s(e,t,i){for(var n="",o=0;o<i;){var s=e[t+o];if(s<128)n+=String.fromCharCode(s),o++;else if(s>=192&&s<224){if(o+1>=i)throw new r("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");var a=(31&s)<<6|63&e[t+o+1];n+=String.fromCharCode(a),o+=2}else if(s>=224&&s<240){if(o+2>=i)throw new r("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");a=(15&s)<<12|(63&e[t+o+1])<<6|63&e[t+o+2];n+=String.fromCharCode(a),o+=3}else{if(!(s>=240&&s<248))throw new r("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");if(o+3>=i)throw new r("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");if((a=(7&s)<<18|(63&e[t+o+1])<<12|(63&e[t+o+2])<<6|63&e[t+o+3])>=65536){var l=55296+(a-65536>>10),u=56320+(1023&a);n+=String.fromCharCode(l,u)}else n+=String.fromCharCode(a);o+=4}}return n}function a(e,r){for(var i={byteOffset:0,byteCount:0,fields:Object.create(null)},n=0,o=0;o<r.length;o++){var s=r[o],a=s.valueType||s.type,l=t.valueType2ArrayBufferReader[a];i.fields[s.property]=l(e,n),n+=t.valueType2TypedArrayClassMap[a].BYTES_PER_ELEMENT}return i.byteCount=n,i}function l(e,t,i){var n,o,a=[],l=0;for(o=0;o<e;o+=1){if((n=t[o])>0){if(a.push(s(i,l,n-1)),0!==i[l+n-1])throw new r("string-array-error","Invalid string array: missing null termination.")}else a.push(null);l+=n}return a}function u(e,r){return new(0,t.valueType2TypedArrayClassMap[r.valueType])(e,r.byteOffset,r.count*r.valuesPerElement)}function c(e,t){return new Uint8Array(e,t.byteOffset,t.byteCount)}function f(e,t,n){for(var o=null!=t.header?a(e,t.header):{byteOffset:0,byteCount:0,fields:{count:n}},s={header:o,byteOffset:o.byteCount,byteCount:0,entries:Object.create(null)},l=o.byteCount,u=0;u<t.ordering.length;u++){var c=t.ordering[u],f=i.clone(t[c]);if(f.count=o.fields.count,"String"===f.valueType){if(f.byteOffset=l,f.byteCount=o.fields[c+"ByteCount"],"UTF-8"!==f.encoding)throw new r("unsupported-encoding","Unsupported String encoding.",{encoding:f.encoding})}else{if(!p(f.valueType))throw new r("unsupported-value-type","Unsupported binary valueType",{valueType:f.valueType});var h=d(f.valueType);l+=l%h!=0?h-l%h:0,f.byteOffset=l,f.byteCount=h*f.valuesPerElement*f.count}l+=f.byteCount,s.entries[c]=f}return s.byteCount=l-s.byteOffset,s}function h(e,t,i){if(t!==e&&v.error("Invalid "+i+" buffer size\n expected: "+e+", actual: "+t+")"),t<e)throw new r("buffer-too-small","Binary buffer is too small",{expectedSize:e,actualSize:t})}function p(e){return t.valueType2TypedArrayClassMap.hasOwnProperty(e)}function d(e){return p(e)&&t.valueType2TypedArrayClassMap[e].BYTES_PER_ELEMENT}Object.defineProperty(t,"__esModule",{value:!0});var v=n.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");t.readHeader=a,t.readStringArray=l,t.createTypedView=u,t.createRawView=c,t.createAttributeDataIndex=f,t.createGeometryDataIndex=function(e,t,r){var n=a(e,t&&t.header),o=n.byteCount,s={header:n,byteOffset:n.byteCount,byteCount:0,vertexAttributes:i.clone(t.vertexAttributes)},l=s.vertexAttributes;r||null==l.region||delete l.region;for(var u=n.fields,c=null!=u.vertexCount?u.vertexCount:u.count,f=0;f<t.ordering.length;f++){var p=t.ordering[f];null!=l[p]&&(l[p].byteOffset=o,l[p].count=c,o+=d(l[p].valueType)*l[p].valuesPerElement*c)}var v=u.faceCount;if(t.faces&&v){s.faces=i.clone(t.faces);var y=s.faces;for(f=0;f<t.ordering.length;f++){var m=t.ordering[f];null!=y[m]&&(y[m].byteOffset=o,y[m].count=v,o+=d(y[m].valueType)*y[m].valuesPerElement*v)}}var g=u.featureCount;if(t.featureAttributes&&t.featureAttributeOrder&&g){s.featureAttributes=i.clone(t.featureAttributes);var x=s.featureAttributes;for(f=0;f<t.featureAttributeOrder.length;f++){var _=t.featureAttributeOrder[f];x[_].byteOffset=o,x[_].count=g;var b=d(x[_].valueType);"UInt64"===x[_].valueType&&(b=8),o+=b*x[_].valuesPerElement*g}}return h(o,e.byteLength,"geometry"),s.byteCount=o-s.byteOffset,s},t.readBinaryAttribute=function(e,t,i){if("lepcc-rgb"===e.encoding)return o.decodeRGB(t);if("lepcc-intensity"===e.encoding)return o.decodeIntensity(t);if(null!=e.encoding&&""!==e.encoding)throw new r("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");e["attributeByteCounts "]&&!e.attributeByteCounts&&(v.warn("Warning: Trailing space in 'attributeByteCounts '."),e.attributeByteCounts=e["attributeByteCounts "]),"ObjectIds"===e.ordering[0]&&e.hasOwnProperty("objectIds")&&(v.warn("Warning: Case error in objectIds"),e.ordering[0]="objectIds");var n=f(t,e,i);h(n.byteOffset+n.byteCount,t.byteLength,"attribute");var s=n.entries.attributeValues||n.entries.objectIds;if(s){if("String"===s.valueType){var a=n.entries.attributeByteCounts,p=u(t,a),d=c(t,s);return l(a.count,p,d)}return u(t,s)}throw new r("bad-attribute-storage-info","Bad attributeStorageInfo specification.")},t.valueType2TypedArrayClassMap={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},t.valueType2ArrayBufferReader={Float32:function(e,t){return new DataView(e,0).getFloat32(t,!0)},Float64:function(e,t){return new DataView(e,0).getFloat64(t,!0)},UInt8:function(e,t){return new DataView(e,0).getUint8(t)},Int8:function(e,t){return new DataView(e,0).getInt8(t)},UInt16:function(e,t){return new DataView(e,0).getUint16(t,!0)},Int16:function(e,t){return new DataView(e,0).getInt16(t,!0)},UInt32:function(e,t){return new DataView(e,0).getUint32(t,!0)},Int32:function(e,t){return new DataView(e,0).getInt32(t,!0)}},t.isValueType=p,t.getBytesPerValue=d}.apply(null,i))||(e.exports=n)},1532:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.C_INFINITY=Number.POSITIVE_INFINITY,t.C_PI=Math.PI,t.C_2PI=2*t.C_PI,t.C_PI_BY_2=t.C_PI/2,t.C_RAD_TO_256=128/t.C_PI,t.C_256_TO_RAD=t.C_PI/128,t.C_DEG_TO_256=256/360,t.C_DEG_TO_RAD=t.C_PI/180,t.C_SQRT2=1.414213562,t.C_SQRT2_INV=1/t.C_SQRT2;var r=1/Math.LN2;function i(e,t){return 0<=(e%=t)?e:e+t}t.positiveMod=i,t.radToByte=function(e){return i(e*t.C_RAD_TO_256,256)},t.degToByte=function(e){return i(e*t.C_DEG_TO_256,256)},t.log2=function(e){return Math.log(e)*r},t.sqr=function(e){return e*e},t.clamp=function(e,t,r){return Math.min(Math.max(e,t),r)},t.interpolate=function(e,t,r){return e*(1-r)+t*r},t.between=function(e,t,r){return t<=e&&e<=r||r<=e&&e<=t}}.apply(null,i))||(e.exports=n)},1535:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(13),r(10),r(1520),r(1536),r(1537)],void 0===(n=function(e,t,r,i,n,o,s){function a(e){return e>=T.length?null:T[e]}function l(e){return e>=S.length?null:S[e]}function u(e){return e>=M.length?null:M[e]}function c(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function f(e,t,r){for(var i=e.createPointGeometry(t);r.next();)switch(r.tag()){case 3:for(var n=r.getUInt32(),o=r.pos()+n,s=0;r.pos()<o;)e.addCoordinatePoint(i,r.getSInt64(),0,s++);break;case 1:case 2:default:r.skip()}return i}function h(e,t,r){for(var i=e.createGeometry(t),n=2+(t.hasZ?1:0)+(t.hasM?1:0);r.next();)switch(r.tag()){case 2:for(var o=r.getUInt32(),s=r.pos()+o,a=0;r.pos()<s;)e.addLength(i,r.getUInt32(),a++);break;case 3:for(var l=r.getUInt32(),u=(s=r.pos()+l,0),c=0;r.pos()<s;)e.addCoordinate(i,r.getSInt64(),c,u),++u===n&&(c++,u=0);break;case 1:default:r.skip()}return i}function p(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function d(e){for(var t={type:a(0)};e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.type=a(e.getEnum());break;case 3:t.alias=e.getString();break;case 4:t.sqlType=l(e.getEnum());break;case 5:case 6:default:e.skip()}return t}function v(e,t,r,i){for(var n=e.createFeature(t),o=0;r.next();)switch(r.tag()){case 1:var s=i[o++].name;n.attributes[s]=p(r.getMessage());break;case 2:n.geometry=h(e,t,r.getMessage());break;case 4:n.centroid=f(e,t,r.getMessage());break;default:r.skip()}return n}function y(e){for(var t=[0,0,0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function m(e){for(var t=[0,0,0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function g(e){for(var t={originPosition:u(0)};e.next();)switch(e.tag()){case 1:t.originPosition=u(e.getEnum());break;case 2:t.scale=y(e.getMessage());break;case 3:t.translate=m(e.getMessage());break;default:e.skip()}return t}function x(e){for(var t={};e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function _(e,t){for(var r=e.createSpatialReference();t.next();)switch(t.tag()){case 1:r.wkid=t.getUInt32();break;case 5:r.wkt=t.getString();break;case 2:case 3:case 4:default:t.skip()}return r}function b(e,t){var r=e.createFeatureResult();r.geometryType=c(e,0);for(var i=!1;t.next();)switch(t.tag()){case 1:r.objectIdFieldName=t.getString();break;case 3:r.globalIdFieldName=t.getString();break;case 4:r.geohashFieldName=t.getString();break;case 5:r.geometryProperties=x(t.getMessage());break;case 7:r.geometryType=c(e,t.getEnum());break;case 8:r.spatialReference=_(e,t.getMessage());break;case 10:r.hasZ=t.getBool();break;case 11:r.hasM=t.getBool();break;case 12:r.transform=g(t.getMessage());break;case 9:var n=t.getBool();r.exceededTransferLimit=n;break;case 13:e.addField(r,d(t.getMessage()));break;case 15:i||(e.prepareFeatures(r),i=!0),e.addFeature(r,v(e,r,t.getMessage(),r.fields));break;case 2:case 6:default:t.skip()}return e.finishFeatureResult(r),r}function I(e,t){for(var r={};t.next();)switch(t.tag()){case 1:r.featureResult=b(e,t.getMessage());break;default:t.skip()}return r}function w(e){return e&&"dehydrated"===e.type?new o.Context(e):new s.Context(e)}Object.defineProperty(t,"__esModule",{value:!0});var C=i.getLogger("esri.tasks.operations.pbfFeatureServiceParser"),T=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],S=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],M=["upperLeft","lowerLeft"];t.parseFeatureQuery=function(e,t){var i=w(t);try{for(var o=new n(new Uint8Array(e),new DataView(e)),s={};o.next();)switch(o.tag()){case 2:s.queryResult=I(i,o.getMessage());break;default:o.skip()}return s}catch(e){var a=new r("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e});return C.error(a),{queryResult:{featureResult:i.createFeatureResult()}}}}}.apply(null,i))||(e.exports=n)},1536:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(79),r(23),r(34),r(354)],void 0===(n=function(e,t,r,i,n,o){function s(e,t,r,i){return t}function a(e,t,r,i){switch(r){case 0:return f(e,t+i,0);case 1:return h(e,t+i,1)}}function l(e,t,r,i){switch(r){case 0:return f(e,t+i,0);case 1:return h(e,t+i,1);case 2:return f(e,t,2)}}function u(e,t,r,i){switch(r){case 0:return f(e,t+i,0);case 1:return h(e,t+i,1);case 2:return f(e,t,3)}}function c(e,t,r,i){switch(r){case 0:return f(e,t+i,0);case 1:return h(e,t+i,1);case 2:case 3:return f(e,t,3)}}function f(e,t,r){var i=e.translate,n=e.scale;return i[r]+t*n[r]}function h(e,t,r){var i=e.translate,n=e.scale;return i[r]-t*n[r]}Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function e(e){this.options=e,this.geometryTypes=["point","multipoint","polyline","polygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=s,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0}return e.prototype.createFeatureResult=function(){return{exceededTransferLimit:!1,features:[],fields:[],hasM:!1,hasZ:!1,geometryType:null,objectIdFieldName:null,globalIdFieldName:null,geometryProperties:null,geohashFieldName:null,spatialReference:null,transform:null}},e.prototype.finishFeatureResult=function(e){this.options.applyTransform&&(e.transform=null)},e.prototype.createSpatialReference=function(){return new n},e.prototype.addField=function(e,t){e.fields.push(o.fromJSON(t))},e.prototype.addFeature=function(e,t){var r=this.options.maxStringAttributeLength?this.options.maxStringAttributeLength:0;if(r>0)for(var i in t.attributes){var n=t.attributes[i];"string"==typeof n&&n.length>r&&delete t.attributes[i]}e.features.push(t)},e.prototype.prepareFeatures=function(e){switch(this.options.applyTransform&&e.transform&&(this.transform=e.transform,this.applyTransform=this.deriveApplyTransform(e)),this.vertexDimension=2,e.hasZ&&this.vertexDimension++,e.hasM&&this.vertexDimension++,e.geometryType){case"point":this.addCoordinate=this.addCoordinatePoint.bind(this),this.createGeometry=this.createPointGeometry.bind(this);break;case"polygon":this.addCoordinate=this.addCoordinatePolygon.bind(this),this.createGeometry=this.createPolygonGeometry.bind(this);break;case"polyline":this.addCoordinate=this.addCoordinatePolyline.bind(this),this.createGeometry=this.createPolylineGeometry.bind(this);break;case"multipoint":this.addCoordinate=this.addCoordinateMultipoint.bind(this),this.createGeometry=this.createMultipointGeometry.bind(this);break;default:i.neverReached(e.geometryType)}},e.prototype.createFeature=function(e){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,{uid:r.generateUID(),objectId:null,attributes:{},geometry:null,visible:!0}},e.prototype.addLength=function(e,t,r){0===this.lengths.length&&(this.toAddInCurrentPath=t),this.lengths.push(t)},e.prototype.createPointGeometry=function(e){var t={type:"point",x:0,y:0,spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM};return t.hasZ&&(t.z=0),t.hasM&&(t.m=0),t},e.prototype.addCoordinatePoint=function(e,t,r,i){switch(t=this.applyTransform(this.transform,t,i,0),i){case 0:e.x=t;break;case 1:e.y=t;break;case 2:e.hasZ?e.z=t:e.m=t;break;case 3:e.m=t}},e.prototype.transformPathLikeValue=function(e,t){var r=0;return t<=1&&(r=this.previousCoordinate[t],this.previousCoordinate[t]+=e),this.applyTransform(this.transform,e,t,r)},e.prototype.addCoordinatePolyline=function(e,t,r,i){this.dehydratedAddPointsCoordinate(e.paths,t,r,i)},e.prototype.addCoordinatePolygon=function(e,t,r,i){this.dehydratedAddPointsCoordinate(e.rings,t,r,i)},e.prototype.addCoordinateMultipoint=function(e,t,r){0===r&&e.points.push([]);var i=this.transformPathLikeValue(t,r);e.points[e.points.length-1].push(i)},e.prototype.createPolygonGeometry=function(e){return{type:"polygon",rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},e.prototype.createPolylineGeometry=function(e){return{type:"polyline",paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},e.prototype.createMultipointGeometry=function(e){return{type:"multipoint",points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},e.prototype.dehydratedAddPointsCoordinate=function(e,t,r,i){if(null===this.coordinateBuffer){var n=this.lengths.reduce(function(e,t){return e+t},0);this.coordinateBuffer=new Float64Array(n*this.vertexDimension)}0===i&&0==this.toAddInCurrentPath--&&(e.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);var o=this.transformPathLikeValue(t,i),s=e[e.length-1];0===i&&s.push(new Float64Array(this.coordinateBuffer.buffer,this.coordinateBufferPtr*Float64Array.BYTES_PER_ELEMENT,this.vertexDimension)),this.coordinateBuffer[this.coordinateBufferPtr++]=o},e.prototype.deriveApplyTransform=function(e){var t=e.hasZ,r=e.hasM;return t&&r?c:t?l:r?u:a},e}();t.Context=p}.apply(null,i))||(e.exports=n)},1537:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(550),r(564),r(553)],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"]}return e.prototype.createFeatureResult=function(){return new i.default},e.prototype.prepareFeatures=function(){},e.prototype.finishFeatureResult=function(){},e.prototype.addFeature=function(e,t){e.features.push(t)},e.prototype.createFeature=function(){return new r.default},e.prototype.createSpatialReference=function(){return{wkid:0}},e.prototype.createGeometry=function(){return new n.default},e.prototype.addField=function(e,t){e.fields.push(t)},e.prototype.addCoordinate=function(e,t){e.coords.push(t)},e.prototype.addCoordinatePoint=function(e,t){e.coords.push(t)},e.prototype.addLength=function(e,t){e.lengths.push(t)},e.prototype.createPointGeometry=function(){return new n.default},e}();t.Context=o}.apply(null,i))||(e.exports=n)},1539:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(96),r(352)],void 0===(n=function(e,t,r,i){function n(e,t){return[e,t]}function o(e,t,r){return e[0]=t,e[1]=r,e}var s=new i("0/0/0/0");return function(){function e(e,t,r,i,n,o,s,a,l,u,c,f){this.level=e,this.resolution=t,this.scale=r,this.origin=i,this.first=n,this.last=o,this.size=s,this.norm=a,this.worldStart=l,this.worldEnd=u,this.worldSize=c,this.wrap=f}return e.create=function(t,i,s){var a,l,u,c,f=r.getInfo(t.spatialReference),h=n(t.origin.x,t.origin.y),p=n(t.size[0]*i.resolution,t.size[1]*i.resolution),d=n(-1/0,-1/0),v=n(1/0,1/0),y=n(1/0,1/0);return s&&(o(d,Math.max(0,Math.floor((s.xmin-h[0])/p[0])),Math.max(0,Math.floor((h[1]-s.ymax)/p[1]))),o(v,Math.max(0,Math.floor((s.xmax-h[0])/p[0])),Math.max(0,Math.floor((h[1]-s.ymin)/p[1]))),o(y,v[0]-d[0]+1,v[1]-d[1]+1)),t.isWrappable?(a=n(Math.ceil(Math.round(2*f.origin[1]/i.resolution)/t.size[0]),y[1]),l=n(Math.floor((f.origin[0]-h[0])/p[0]),d[1]),u=n(a[0]+l[0]-1,v[1]),c=!0):(l=d,u=v,a=y,c=!1),new e(i.level,i.resolution,i.scale,h,d,v,y,p,l,u,a,c)},e.prototype.normalizeCol=function(e){if(!this.wrap)return e;var t=this.worldSize[0];return e<0?t-1-Math.abs((e+1)%t):e%t},e.prototype.denormalizeCol=function(e,t){return this.wrap?this.worldSize[0]*t+e:e},e.prototype.getWorldForColumn=function(e){return this.wrap?Math.floor(e/this.worldSize[0]):0},e.prototype.getFirstColumnForWorld=function(e){return e*this.worldSize[0]+this.first[0]},e.prototype.getLastColumnForWorld=function(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1},e.prototype.getColumnForX=function(e){return(e-this.origin[0])/this.norm[0]},e.prototype.getXForColumn=function(e){return this.origin[0]+e*this.norm[0]},e.prototype.getRowForY=function(e){return(this.origin[1]-e)/this.norm[1]},e.prototype.getYForRow=function(e){return this.origin[1]-e*this.norm[1]},e.prototype.getTileBounds=function(e,t,r){void 0===r&&(r=!1),s.set(t);var i=r?s.col:this.denormalizeCol(s.col,s.world),n=s.row;return function(e,t,r,i,n){e[0]=t,e[1]=r,e[2]=i,e[3]=n}(e,this.getXForColumn(i),this.getYForRow(n+1),this.getXForColumn(i+1),this.getYForRow(n)),e},e.prototype.getTileCoords=function(e,t,r){void 0===r&&(r=!1),s.set(t);var i=r?s.col:this.denormalizeCol(s.col,s.world);return Array.isArray(e)?o(e,this.getXForColumn(i),this.getYForRow(s.row)):(e.x=this.getXForColumn(i),e.y=this.getYForRow(s.row)),e},e}()}.apply(null,i))||(e.exports=n)},1540:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(213),r(80),r(1513)],void 0===(n=function(e,t,r,i,n){return function(){function e(e){this.lodInfo=e,this.spans=r.acquire()}return e.prototype.release=function(){for(var e=0,t=this.spans;e<t.length;e++){var i=t[e];n.pool.release(i)}r.release(this.spans)},e.prototype.forEach=function(e,t){var r=this.spans,i=this.lodInfo,n=i.level;if(0!==r.length)for(var o=0,s=r;o<s.length;o++)for(var a=s[o],l=a.row,u=a.colFrom,c=a.colTo,f=u;f<=c;f++)e.call(t,n,l,i.normalizeCol(f),i.getWorldForColumn(f))},e.pool=new i(e,!0),e}()}.apply(null,i))||(e.exports=n)},1543:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1625)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.quatf32=r}.apply(null,i))||(e.exports=n)},1545:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.queryCapabilities={supportsStatistics:!0,supportsCentroid:!0,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0}}.apply(null,i))||(e.exports=n)},1549:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(5),r(1),r(170),r(48),r(19),r(1533),r(1529),r(352)],void 0===(n=function(e,t,r,i,n,o,s,a,l,u){Object.defineProperty(t,"__esModule",{value:!0});var c={added:[],removed:[]},f=new n.default,h=new u(0,0,0,0),p=function(e){function t(t){var r=e.call(this)||this;return r._tiles=new Map,r._index=a(9,s("csp-restrictions")?function(e){return{minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}}:[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),r.tiles=[],r.tileScheme=t,r}return r(t,e),t.prototype.destroy=function(){this._tiles.clear()},t.prototype.has=function(e){return this._tiles.has(e)},t.prototype.get=function(e){return this._tiles.get(e)},t.prototype.findByKey=function(e){return this._tiles.get(e.id)},t.prototype.intersections=function(e,t){var r="string"==typeof e?this.get(e):e;if(!r)return[];for(var i=t*r.resolution,n=r.bounds[0]-i,o=r.bounds[1]-i,s=r.bounds[2]+i,a=r.bounds[3]+i,l=[],u=0,c=this._index.search({minX:n,minY:o,maxX:s,maxY:a});u<c.length;u++){var f=c[u],h=f.bounds.slice();h[0]=Math.max(h[0],n),h[1]=Math.max(h[1],o),h[2]=Math.min(h[2],s),h[3]=Math.min(h[3],a),h[2]-h[0]>0&&h[3]-h[1]>0&&l.push({bounds:h,tile:f})}return l},t.prototype.boundsIntersections=function(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})},t.prototype.setViewState=function(e){var t=this.tileScheme.getTileCoverage(e,0);if(t){var r=t.spans,i=t.lodInfo,n=i.level;if(r.length>0)for(var o=0,s=r;o<s.length;o++)for(var a=s[o],u=a.row,p=a.colFrom,d=a.colTo,v=p;v<=d;v++){var y=h.set(n,u,i.normalizeCol(v),i.getWorldForColumn(v)).id;if(f.add(y),!this.has(y)){var m=new l.default(this.tileScheme,y);this._tiles.set(y,m),this._index.insert(m),this.tiles.push(m),c.added.push(m)}}for(var g=this.tiles.length-1;g>=0;g--){m=this.tiles[g];f.has(m.id)||(this._tiles.delete(m.id),this.tiles.splice(g,1),this._index.remove(m),c.removed.push(m))}(c.added.length||c.removed.length)&&this.emit("update",c),f.clear(),c.added.length=0,c.removed.length=0}},t}(o);t.default=p}.apply(null,i))||(e.exports=n)},1552:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(8),r(24),r(7),r(0),r(1671),r(1672),r(1673)],void 0===(n=function(e,t,r,i,n,o,s,a,l,u,c){var f=o.strict()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"}),h=function(e){function t(t){var r=e.call(this)||this;return r.type=void 0,r.pointSizeAlgorithm=null,r.colorModulation=null,r.pointsPerInch=10,r}return r(t,e),t.prototype.clone=function(){return console.warn(".clone() is not implemented for "+this.declaredClass),null},t.prototype.cloneProperties=function(){return{pointSizeAlgorithm:s.clone(this.pointSizeAlgorithm),colorModulation:s.clone(this.colorModulation),pointsPerInch:s.clone(this.pointsPerInch)}},i([a.property({type:f.apiValues,readOnly:!0,nonNullable:!0,json:{type:f.jsonValues,read:!1,write:f.write}})],t.prototype,"type",void 0),i([a.property({types:c.pointSizeAlgorithmTypes,json:{read:u.read,write:!0}})],t.prototype,"pointSizeAlgorithm",void 0),i([a.property({type:l.default,json:{write:!0}})],t.prototype,"colorModulation",void 0),i([a.property({json:{write:!0},nonNullable:!0,type:Number})],t.prototype,"pointsPerInch",void 0),i([a.subclass("esri.renderers.PointCloudRenderer")],t)}(a.declared(n));return(h||(h={})).fieldTransformTypeKebabDict=new o.KebabDictionary({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"}),h}.apply(null,i))||(e.exports=n)},1557:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1506),r(1517),r(1532)],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){this.ratio=e,this.x=t,this.y=r},s=function(){function e(e,t,i,n,o){void 0===n&&(n=8),void 0===o&&(o=8),this.lines=[],this.starts=[],this.pixelRatio=n,this.pixelMargin=o,this.tileSize=r.TILE_SIZE*n,this.dz=e,this.yPos=t,this.xPos=i}return e.prototype.setExtent=function(e){this.finalRatio=this.tileSize/e*(1<<this.dz);var t=this.pixelRatio*this.pixelMargin;t/=this.finalRatio;var r=e>>this.dz;r<t&&(t=r),this.margin=t,this.xmin=r*this.xPos-t,this.ymin=r*this.yPos-t,this.xmax=this.xmin+r+2*t,this.ymax=this.ymin+r+2*t},e.prototype.reset=function(e){this.type=e,this.lines=[],this.starts=[],this.line=null,this.start=0},e.prototype.moveTo=function(e,t){this._pushLine(),this._prevIsIn=this._isIn(e,t),this._moveTo(e,t,this._prevIsIn),this._prevPt=new i.Point(e,t),this._firstPt=new i.Point(e,t),this._dist=0},e.prototype.lineTo=function(e,t){var r,n,s,a,l,u,c,f,h=this._isIn(e,t),p=new i.Point(e,t),d=i.Point.distance(this._prevPt,p);if(h)this._prevIsIn?this._lineTo(e,t,!0):(r=this._prevPt,n=p,s=this._intersect(n,r),this.start=this._dist+d*(1-this._r),this._lineTo(s.x,s.y,!0),this._lineTo(n.x,n.y,!0));else if(this._prevIsIn)n=this._prevPt,r=p,s=this._intersect(n,r),this._lineTo(s.x,s.y,!0),this._lineTo(r.x,r.y,!1);else{var v=this._prevPt,y=p;if(v.x<=this.xmin&&y.x<=this.xmin||v.x>=this.xmax&&y.x>=this.xmax||v.y<=this.ymin&&y.y<=this.ymin||v.y>=this.ymax&&y.y>=this.ymax)this._lineTo(y.x,y.y,!1);else{var m=[];if((v.x<this.xmin&&y.x>this.xmin||v.x>this.xmin&&y.x<this.xmin)&&(a=(this.xmin-v.x)/(y.x-v.x),(f=v.y+a*(y.y-v.y))<=this.ymin?u=!1:f>=this.ymax?u=!0:m.push(new o(a,this.xmin,f))),(v.x<this.xmax&&y.x>this.xmax||v.x>this.xmax&&y.x<this.xmax)&&(a=(this.xmax-v.x)/(y.x-v.x),(f=v.y+a*(y.y-v.y))<=this.ymin?u=!1:f>=this.ymax?u=!0:m.push(new o(a,this.xmax,f))),(v.y<this.ymin&&y.y>this.ymin||v.y>this.ymin&&y.y<this.ymin)&&(a=(this.ymin-v.y)/(y.y-v.y),(c=v.x+a*(y.x-v.x))<=this.xmin?l=!1:c>=this.xmax?l=!0:m.push(new o(a,c,this.ymin))),(v.y<this.ymax&&y.y>this.ymax||v.y>this.ymax&&y.y<this.ymax)&&(a=(this.ymax-v.y)/(y.y-v.y),(c=v.x+a*(y.x-v.x))<=this.xmin?l=!1:c>=this.xmax?l=!0:m.push(new o(a,c,this.ymax))),0===m.length)l?u?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):u?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(1<m.length&&m[0].ratio>m[1].ratio)this.start=this._dist+d*m[1].ratio,this._lineTo(m[1].x,m[1].y,!0),this._lineTo(m[0].x,m[0].y,!0);else{this.start=this._dist+d*m[0].ratio;for(var g=0;g<m.length;g++)this._lineTo(m[g].x,m[g].y,!0)}this._lineTo(y.x,y.y,!1)}}this._dist+=d,this._prevIsIn=h,this._prevPt=p},e.prototype.close=function(){if(2<this.line.length){var e=this._firstPt,t=this._prevPt;e.x===t.x&&e.y===t.y||this.lineTo(e.x,e.y);for(var r=this.line,i=r.length;4<=i&&(r[0].x===r[1].x&&r[0].x===r[i-2].x||r[0].y===r[1].y&&r[0].y===r[i-2].y);)r.pop(),r[0].x=r[i-2].x,r[0].y=r[i-2].y,--i}},e.prototype.result=function(e){return void 0===e&&(e=!0),this._pushLine(),0===this.lines.length?null:(3===this.type&&e&&l.simplify(this.tileSize,this.margin*this.finalRatio,this.lines),this.lines)},e.prototype.resultWithStarts=function(){if(2!==this.type)throw new Error("Only valid for lines");this._pushLine();var e=this.lines,t=e.length;if(0===t)return null;for(var r=[],i=0;i<t;i++)r.push({line:e[i],start:this.starts[i]||0});return r},e.prototype._isIn=function(e,t){return e>=this.xmin&&e<=this.xmax&&t>=this.ymin&&t<=this.ymax},e.prototype._intersect=function(e,t){var r,n,o;if(t.x>=this.xmin&&t.x<=this.xmax)o=((n=t.y<=this.ymin?this.ymin:this.ymax)-e.y)/(t.y-e.y),r=e.x+o*(t.x-e.x);else if(t.y>=this.ymin&&t.y<=this.ymax)o=((r=t.x<=this.xmin?this.xmin:this.xmax)-e.x)/(t.x-e.x),n=e.y+o*(t.y-e.y);else{n=t.y<=this.ymin?this.ymin:this.ymax;var s=((r=t.x<=this.xmin?this.xmin:this.xmax)-e.x)/(t.x-e.x),a=(n-e.y)/(t.y-e.y);s<a?(o=s,n=e.y+s*(t.y-e.y)):(o=a,r=e.x+a*(t.x-e.x))}return this._r=o,new i.Point(r,n)},e.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):2===this.type?1<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):3===this.type&&3<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start))),this.line=[],this.start=0},e.prototype._moveTo=function(e,t,r){3!==this.type?r&&(e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line.push(new i.Point(e,t))):(r||(e<this.xmin&&(e=this.xmin),e>this.xmax&&(e=this.xmax),t<this.ymin&&(t=this.ymin),t>this.ymax&&(t=this.ymax)),e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line.push(new i.Point(e,t)),this._is_h=!1,this._is_v=!1)},e.prototype._lineTo=function(e,t,r){var n,o;if(3!==this.type)if(r){if(e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),0<this.line.length&&(n=this.line[this.line.length-1]).equals(e,t))return;this.line.push(new i.Point(e,t))}else this.line&&0<this.line.length&&this._pushLine();else if(r||(e<this.xmin&&(e=this.xmin),e>this.xmax&&(e=this.xmax),t<this.ymin&&(t=this.ymin),t>this.ymax&&(t=this.ymax)),e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){var s=(n=this.line[this.line.length-1]).x===e,a=n.y===t;if(s&&a)return;this._is_h&&s?(n.x=e,n.y=t,(o=this.line[this.line.length-2]).x===e&&o.y===t?(this.line.pop(),this.line.length<=1?(this._is_h=!1,this._is_v=!1):(o=this.line[this.line.length-2],this._is_h=o.x===e,this._is_v=o.y===t)):(this._is_h=o.x===e,this._is_v=o.y===t)):this._is_v&&a?(n.x=e,n.y=t,(o=this.line[this.line.length-2]).x===e&&o.y===t?(this.line.pop(),this.line.length<=1?(this._is_h=!1,this._is_v=!1):(o=this.line[this.line.length-2],this._is_h=o.x===e,this._is_v=o.y===t)):(this._is_h=o.x===e,this._is_v=o.y===t)):(this.line.push(new i.Point(e,t)),this._is_h=s,this._is_v=a)}else this.line.push(new i.Point(e,t))},e}();t.TileClipper=s;var a=function(){function e(){}return e.prototype.setExtent=function(e){this._ratio=4096===e?1:4096/e},e.prototype.reset=function(e){this.type=e,this.lines=[],this.line=null},e.prototype.moveTo=function(e,t){this.line&&this.lines.push(this.line),this.line=[];var r=this._ratio;this.line.push(new i.Point(Math.round(e*r),Math.round(t*r)))},e.prototype.lineTo=function(e,t){var r=this._ratio;this.line.push(new i.Point(Math.round(e*r),Math.round(t*r)))},e.prototype.close=function(){var e=this.line;e&&!e[0].isEqual(e[e.length-1])&&e.push(e[0])},e.prototype.result=function(){return this.line&&this.lines.push(this.line),0===this.lines.length?null:(3===this.type&&1!==this._ratio&&l.simplify(4096,64,this.lines),this.lines)},e}();t.SimpleBuilder=a;var l=function(){function e(){}return e.simplify=function(t,r,i){if(i){for(var n=-r,o=t+r,s=-r,a=t+r,l=[],u=[],c=i.length,f=0;f<c;++f){var h=i[f];if(h&&!(h.length<2))for(var p=h[0],d=void 0,v=h.length,y=1;y<v;++y)d=h[y],p.x===d.x&&(p.x<=n&&(p.y>d.y?(l.push(f),l.push(y),l.push(0),l.push(-1)):(u.push(f),u.push(y),u.push(0),u.push(-1))),p.x>=o&&(p.y<d.y?(l.push(f),l.push(y),l.push(1),l.push(-1)):(u.push(f),u.push(y),u.push(1),u.push(-1)))),p.y===d.y&&(p.y<=s&&(p.x<d.x?(l.push(f),l.push(y),l.push(2),l.push(-1)):(u.push(f),u.push(y),u.push(2),u.push(-1))),p.y>=a&&(p.x>d.x?(l.push(f),l.push(y),l.push(3),l.push(-1)):(u.push(f),u.push(y),u.push(3),u.push(-1)))),p=d}if(0!==l.length&&0!==u.length){e.fillParent(i,u,l),e.fillParent(i,l,u);var m=[];e.calcDeltas(m,u,l),e.calcDeltas(m,l,u),e.addDeltas(m,i)}}},e.fillParent=function(e,t,r){for(var i=r.length,o=t.length,s=0;s<o;s+=4){for(var a=t[s],l=t[s+1],u=t[s+2],c=e[a][l-1],f=e[a][l],h=8092,p=-1,d=0;d<i;d+=4)if(r[d+2]===u){var v=r[d],y=r[d+1],m=e[v][y-1],g=e[v][y];switch(u){case 0:case 1:n.between(c.y,m.y,g.y)&&n.between(f.y,m.y,g.y)&&(x=Math.abs(g.y-m.y))<h&&(h=x,p=d);break;case 2:case 3:var x;n.between(c.x,m.x,g.x)&&n.between(f.x,m.x,g.x)&&(x=Math.abs(g.x-m.x))<h&&(h=x,p=d)}}t[s+3]=p}},e.calcDeltas=function(t,r,i){for(var n=r.length,o=0;o<n;o+=4){var s=e.calcDelta(o,r,i,[]);t.push(r[o]),t.push(r[o+1]),t.push(r[o+2]),t.push(s)}},e.calcDelta=function(t,r,i,n){var o=r[t+3];if(-1===o)return 0;var s=n.length;return 1<s&&n[s-2]===o?0:(n.push(o),e.calcDelta(o,i,r,n)+1)},e.addDeltas=function(e,t){for(var r=e.length,i=0,n=0;n<r;n+=4)i<(a=e[n+3])&&(i=a);for(n=0;n<r;n+=4){var o=t[e[n]],s=e[n+1],a=i-e[n+3];switch(e[n+2]){case 0:o[s-1].x-=a,o[s].x-=a,1===s&&(o[o.length-1].x-=a),s===o.length-1&&(o[0].x-=a);break;case 1:o[s-1].x+=a,o[s].x+=a,1===s&&(o[o.length-1].x+=a),s===o.length-1&&(o[0].x+=a);break;case 2:o[s-1].y-=a,o[s].y-=a,1===s&&(o[o.length-1].y-=a),s===o.length-1&&(o[0].y-=a);break;case 3:o[s-1].y+=a,o[s].y+=a,1===s&&(o[o.length-1].y+=a),s===o.length-1&&(o[0].y+=a)}}},e}(),u=function(){function e(){this.linesIn=[],this.linesOut=[]}return e.prototype.cut=function(e,t){var r;if(this.xCut=t,e.rings)this.closed=!0,r=e.rings,this.minPts=4;else{if(!e.paths)return null;this.closed=!1,r=e.paths,this.minPts=2}for(var i=0,n=r;i<n.length;i++)if((d=n[i])&&!(d.length<this.minPts)){for(var o=!0,s=0,a=d;s<a.length;s++){var l=a[s];o?(this.moveTo(l),o=!1):this.lineTo(l)}this.closed&&this.close()}this._pushLineIn(),this._pushLineOut(),r=[];for(var u=0,c=this.linesIn;u<c.length;u++)(d=c[u])&&d.length>=this.minPts&&r.push(d);for(var f=-2*this.xCut,h=0,p=this.linesOut;h<p.length;h++){var d;if((d=p[h])&&d.length>=this.minPts){for(var v=0,y=d;v<y.length;v++)(l=y[v])[0]+=f;r.push(d)}}return this.closed?e.rings=r:e.paths=r,e},e.prototype.moveTo=function(e){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(e[0]),this._moveTo(e[0],e[1],this._prevSide),this._prevPt=e,this._firstPt=e},e.prototype.lineTo=function(e){var t=this._side(e[0]);if(t*this._prevSide==-1){var r=this._intersect(this._prevPt,e);this._lineTo(this.xCut,r,0),this._prevSide=0,this._lineTo(e[0],e[1],t)}else this._lineTo(e[0],e[1],t);this._prevSide=t,this._prevPt=e},e.prototype.close=function(){var e=this._firstPt,t=this._prevPt;e[0]===t[0]&&e[1]===t[1]||this.lineTo(e),this._checkClosingPt(this.lineIn),this._checkClosingPt(this.lineOut)},e.prototype._moveTo=function(e,t,r){this.closed?(this.lineIn.push([r<=0?e:this.xCut,t]),this.lineOut.push([0<=r?e:this.xCut,t])):(r<=0&&this.lineIn.push([e,t]),0<=r&&this.lineOut.push([e,t]))},e.prototype._lineTo=function(e,t,r){this.closed?(this._addPolyVertex(this.lineIn,r<=0?e:this.xCut,t),this._addPolyVertex(this.lineOut,0<=r?e:this.xCut,t)):r<0?(0===this._prevSide&&this._pushLineOut(),this.lineIn.push([e,t])):0<r?(0===this._prevSide&&this._pushLineIn(),this.lineOut.push([e,t])):this._prevSide<0?(this.lineIn.push([e,t]),this.lineOut.push([e,t])):0<this._prevSide&&(this.lineOut.push([e,t]),this.lineIn.push([e,t]))},e.prototype._addPolyVertex=function(e,t,r){var i=e.length;1<i&&e[i-1][0]===t&&e[i-2][0]===t?e[i-1][1]=r:e.push([t,r])},e.prototype._checkClosingPt=function(e){var t=e.length;3<t&&e[0][0]===this.xCut&&e[t-2][0]===this.xCut&&e[1][0]===this.xCut&&(e[0][1]=e[t-2][1],e.pop())},e.prototype._side=function(e){return e<this.xCut?-1:e>this.xCut?1:0},e.prototype._intersect=function(e,t){var r=(this.xCut-e[0])/(t[0]-e[0]);return e[1]+r*(t[1]-e[1])},e.prototype._pushLineIn=function(){this.lineIn&&this.lineIn.length>=this.minPts&&this.linesIn.push(this.lineIn),this.lineIn=[]},e.prototype._pushLineOut=function(){this.lineOut&&this.lineOut.length>=this.minPts&&this.linesOut.push(this.lineOut),this.lineOut=[]},e}();t.CutVertical=u}.apply(null,i))||(e.exports=n)},1588:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(13)],void 0===(n=function(e,t,r){function i(e,t,r){return{identifier:String.fromCharCode.apply(null,new Uint8Array(e,r+c.identifierOffset,c.identifierLength)),version:t.getUint16(r+c.versionOffset,u),checksum:t.getUint32(r+c.checksumOffset,u)}}function n(e,t){return{sizeLo:e.getUint32(t+f.sizeLo,u),sizeHi:e.getUint32(t+f.sizeHi,u),minX:e.getFloat64(t+f.minX,u),minY:e.getFloat64(t+f.minY,u),minZ:e.getFloat64(t+f.minZ,u),maxX:e.getFloat64(t+f.maxX,u),maxY:e.getFloat64(t+f.maxY,u),maxZ:e.getFloat64(t+f.maxZ,u),errorX:e.getFloat64(t+f.errorX,u),errorY:e.getFloat64(t+f.errorY,u),errorZ:e.getFloat64(t+f.errorZ,u),count:e.getUint32(t+f.count,u),reserved:e.getUint32(t+f.reserved,u)}}function o(e,t,r){var i=[];t=s(e,t,i);for(var n=[],o=0;o<i.length;o++){n.length=0,t=s(e,t,n);for(var a=0;a<n.length;a++)r.push(n[a]+i[o])}return t}function s(e,t,i){var n=new DataView(e,t),o=n.getUint8(0),s=31&o,a=!!(32&o),l=(192&o)>>6,c=0;if(0===l)c=n.getUint32(1,u),t+=5;else if(1===l)c=n.getUint16(1,u),t+=3;else{if(2!==l)throw new r("lepcc-decode-error","Bad count type");c=n.getUint8(1),t+=2}if(a)throw new r("lepcc-decode-error","LUT not implemented");for(var f=Math.ceil(c*s/8),h=new Uint8Array(e,t,f),p=0,d=0,v=0,y=-1>>>32-s,m=0;m<c;m++){for(;d<s;)p|=h[v]<<d,d+=8,v+=1;i[m]=p&y,p>>>=s,(d-=s)+s>32&&(p|=h[v-1]>>8-d)}return t+v}function a(e,t){return{sizeLo:e.getUint32(t+h.sizeLo,u),sizeHi:e.getUint32(t+h.sizeHi,u),count:e.getUint32(t+h.count,u),colorMapCount:e.getUint16(t+h.colorMapCount,u),lookupMethod:e.getUint8(t+h.lookupMethod),compressionMethod:e.getUint8(t+h.compressionMethod)}}function l(e,t){return{sizeLo:e.getUint32(t+p.sizeLo,u),sizeHi:e.getUint32(t+p.sizeHi,u),count:e.getUint32(t+p.count,u),scaleFactor:e.getUint16(t+p.scaleFactor,u),bitsPerPoint:e.getUint8(t+p.bitsPerPoint),reserved:e.getUint8(t+p.reserved)}}Object.defineProperty(t,"__esModule",{value:!0});var u=!0,c={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16},f={sizeLo:0,sizeHi:4,minX:8,minY:16,minZ:24,maxX:32,maxY:40,maxZ:48,errorX:56,errorY:64,errorZ:72,count:80,reserved:84,byteCount:88};t.decodeXYZ=function(e){var t=new DataView(e,0),s=0,a=i(e,t,s),l=a.identifier,u=a.version;if(s+=c.byteCount,"LEPCC     "!==l)throw new r("lepcc-decode-error","Bad identifier");if(u>1)throw new r("lepcc-decode-error","Unknown version");var h=n(t,s);if(s+=f.byteCount,h.sizeHi*Math.pow(2,32)+h.sizeLo!==e.byteLength)throw new r("lepcc-decode-error","Bad size");var p=new Float64Array(3*h.count),d=[],v=[],y=[],m=[];if((s=o(e,s=o(e,s=o(e,s=o(e,s,d),v),y),m))!==e.byteLength)throw new r("lepcc-decode-error","Bad length");for(var g=0,x=0,_=0;_<d.length;_++){x+=d[_];for(var b=0,I=0;I<v[_];I++){b+=y[g];var w=m[g];p[3*g]=Math.min(h.maxX,h.minX+2*h.errorX*b),p[3*g+1]=Math.min(h.maxY,h.minY+2*h.errorY*x),p[3*g+2]=Math.min(h.maxZ,h.minZ+2*h.errorZ*w),g++}}return{errorX:h.errorX,errorY:h.errorY,errorZ:h.errorZ,result:p}};var h={sizeLo:0,sizeHi:4,count:8,colorMapCount:12,lookupMethod:14,compressionMethod:15,byteCount:16};t.decodeRGB=function(e){var t=new DataView(e,0),n=0,o=i(e,t,n),s=o.identifier,l=o.version;if(n+=c.byteCount,"ClusterRGB"!==s)throw new r("lepcc-decode-error","Bad identifier");if(l>1)throw new r("lepcc-decode-error","Unknown version");var u=a(t,n);if(n+=h.byteCount,u.sizeHi*Math.pow(2,32)+u.sizeLo!==e.byteLength)throw new r("lepcc-decode-error","Bad size");if((2===u.lookupMethod||1===u.lookupMethod)&&0===u.compressionMethod){if(3*u.colorMapCount+u.count+n!==e.byteLength||u.colorMapCount>256)throw new r("lepcc-decode-error","Bad count");for(var f=new Uint8Array(e,n,3*u.colorMapCount),p=new Uint8Array(e,n+3*u.colorMapCount,u.count),d=new Uint8Array(3*u.count),v=0;v<u.count;v++){var y=p[v];d[3*v]=f[3*y],d[3*v+1]=f[3*y+1],d[3*v+2]=f[3*y+2]}return d}if(0===u.lookupMethod&&0===u.compressionMethod){if(3*u.count+n!==e.byteLength||0!==u.colorMapCount)throw new r("lepcc-decode-error","Bad count");return new Uint8Array(e,n).slice()}if(u.lookupMethod<=2&&1===u.compressionMethod){if(n+3!==e.byteLength||1!==u.colorMapCount)throw new r("lepcc-decode-error","Bad count");var m=t.getUint8(n),g=t.getUint8(n+1),x=t.getUint8(n+2);for(d=new Uint8Array(3*u.count),v=0;v<u.count;v++)d[3*v]=m,d[3*v+1]=g,d[3*v+2]=x;return d}throw new r("lepcc-decode-error","Bad method "+u.lookupMethod+","+u.compressionMethod)};var p={sizeLo:0,sizeHi:4,count:8,scaleFactor:12,bitsPerPoint:14,reserved:15,byteCount:16};t.decodeIntensity=function(e){var t=new DataView(e,0),n=0,o=i(e,t,n),a=o.identifier,u=o.version;if(n+=c.byteCount,"Intensity "!==a)throw new r("lepcc-decode-error","Bad identifier");if(u>1)throw new r("lepcc-decode-error","Unknown version");var f=l(t,n);if(n+=p.byteCount,f.sizeHi*Math.pow(2,32)+f.sizeLo!==e.byteLength)throw new r("lepcc-decode-error","Bad size");var h=new Uint16Array(f.count);if(8===f.bitsPerPoint){if(f.count+n!==e.byteLength)throw new r("lepcc-decode-error","Bad size");for(var d=new Uint8Array(e,n,f.count),v=0;v<f.count;v++)h[v]=d[v]*f.scaleFactor}else if(16===f.bitsPerPoint){if(2*f.count+n!==e.byteLength)throw new r("lepcc-decode-error","Bad size");for(d=new Uint16Array(e,n,f.count),v=0;v<f.count;v++)h[v]=d[v]*f.scaleFactor}else{if(s(e,n,d=[])!==e.byteLength)throw new r("lepcc-decode-error","Bad size");for(v=0;v<f.count;v++)h[v]=d[v]*f.scaleFactor}return h}}.apply(null,i))||(e.exports=n)},1589:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(8),r(24),r(0)],void 0===(n=function(e,t,r,i,n,o,s){Object.defineProperty(t,"__esModule",{value:!0}),t.typeKebabDictionary=new o.default({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});var a=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r(n,e),i([s.property({type:t.typeKebabDictionary.apiValues,readOnly:!0,nonNullable:!0,json:{type:t.typeKebabDictionary.jsonValues,read:!1,write:t.typeKebabDictionary.write}})],n.prototype,"type",void 0),i([s.subclass("esri.renderers.support.pointCloud.PointSizeAlgorithm")],n)}(s.declared(n));t.PointSizeAlgorithm=a,t.default=a}.apply(null,i))||(e.exports=n)},1599:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1528)],void 0===(n=function(e,t,r){return function(){function e(e,t,r,i,n,o,s,a){this._glyphItems=e,this._maxWidth=t,this._lineHeight=r,this._letterSpacing=i,this._offset=n,this._hAnchor=o,this._vAnchor=s,this._justify=a}return e.prototype.getShaping=function(e,t){for(var r=this._letterSpacing,i=this._lineHeight,n=this._justify,o=this._maxWidth,s=[],a=0,l=0,u=0,c=0,f=-1,h=0,p=-1,d=e.length,v=0;v<d;v++){var y=e.charCodeAt(v);if(10!==y){for(var m=void 0,g=0,x=this._glyphItems;g<x.length&&!(m=x[g][y]);g++);if(m){if(s.push({codePoint:y,x:a,y:l,glyphMosaicItem:m}),a+=m.metrics.advance+r,0<o&&o<a&&0<=p){var _=p+1;I=s[_].x,h=Math.max(I,h);for(var b=_;b<s.length;b++)t?s[b].y-=i:s[b].y+=i,s[b].x-=I;n&&this._applyJustification(s,c,p),t?l-=i:l+=i,a-=I,++u,c=_,p=-1}++f,32===y&&(p=s.length-1)}}else{if(v===d-1)continue;if(c<=f){var I=(w=s[f]).x+w.glyphMosaicItem.metrics.advance;h=Math.max(I,h),n&&this._applyJustification(s,c,f),c=s.length}t?l-=i:l+=i,a=0,++u}}if(c<=f){var w,C=(w=s[f]).x+w.glyphMosaicItem.metrics.advance;h=Math.max(h,C),n&&this._applyJustification(s,c,f)}if(0<s.length){var T=(n-this._hAnchor)*h,S=(-this._vAnchor*(u+1)+.5)*i;t&&u&&(S+=u*i),T+=this._offset[0],S+=this._offset[1];for(var M=0,P=s;M<P.length;M++){var A=P[M];A.x+=T,A.y+=S}}return s},e.getBox=function(e){if(!e.length)return null;for(var t=1/0,r=1/0,i=0,n=0,o=0,s=e;o<s.length;o++){var a=s[o],l=a.glyphMosaicItem.metrics,u=l.height,c=l.left,f=l.top,h=l.width,p=a.x,d=a.y-(u-Math.abs(f)),v=p+h+c,y=d+u;t=Math.min(t,p),i=Math.max(i,v),r=Math.min(r,d),n=Math.max(n,y)}return{x:t,y:r,width:i-t,height:n-r}},e.addDecoration=function(e,t){var i=e.length;if(0!==i){for(var n=e[0].x+e[0].glyphMosaicItem.metrics.left,o=e[0].y,s=1;s<i;s++){var a=e[s];if(a.y!==o){var l=e[s-1].x+e[s-1].glyphMosaicItem.metrics.left+e[s-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:n,y:o+t-3,glyphMosaicItem:{sdf:!0,rect:new r(4,0,4,8),metrics:{width:l-n,height:8,left:0,top:0,advance:0},page:0}}),o=a.y,n=a.x+a.glyphMosaicItem.metrics.left}}var u=e[i-1].x+e[i-1].glyphMosaicItem.metrics.left+e[i-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:n,y:o+t-3,glyphMosaicItem:{sdf:!0,rect:new r(4,0,4,8),metrics:{width:u-n,height:8,left:0,top:0,advance:0},page:0}})}},e.prototype._applyJustification=function(e,t,r){for(var i=e[r],n=i.glyphMosaicItem.metrics.advance,o=(i.x+n)*this._justify,s=t;s<=r;s++)e[s].x-=o},e}()}.apply(null,i))||(e.exports=n)},1600:function(e,t,r){var i,n;i=[r(30),r(351),r(1527)],void 0===(n=function(e,t,r){e.getObject("string",!0,dojox);var i=t("dojox.string.BidiEngine",r,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(e,t,r){if(this.sourceToTarget=[],this.targetToSource=[],!e)return"";if(function(e,t,r){C=[],S=[];for(var i=0;i<r;i++)e[i]=i,t[i]=i,C[i]=i}(this.sourceToTarget,this.targetToSource,e.length),!this.checkParameters(t,r))return e;t=this.inputFormat,r=this.outputFormat;var i=e,s=M,a=_(t.charAt(1)),p=_(r.charAt(1)),d=("I"===t.charAt(0)?"L":t.charAt(0))+a,v=("I"===r.charAt(0)?"L":r.charAt(0))+p,P=t.charAt(2)+r.charAt(2);s.defInFormat=d,s.defOutFormat=v,s.defSwap=P;var A=function e(t,r,i,s,a){var u=function(e,t,r){void 0===t.inFormat&&(t.inFormat=r.defInFormat);void 0===t.outFormat&&(t.outFormat=r.defOutFormat);void 0===t.swap&&(t.swap=r.defSwap);if(t.inFormat===t.outFormat)return t;var i,o=t.inFormat.substring(0,1),s=t.inFormat.substring(1,4),a=t.outFormat.substring(0,1),l=t.outFormat.substring(1,4);"C"===s.charAt(0)&&(i=n(e),s="ltr"===i||"rtl"===i?i.toUpperCase():"L"===t.inFormat.charAt(2)?"LTR":"RTL",t.inFormat=o+s);"C"===l.charAt(0)&&("rtl"===(i=n(e))?l="RTL":"ltr"===i?(i=function(e){var t=e.split("");return t.reverse(),n(t.join(""))}(e),l=i.toUpperCase()):l="L"===t.outFormat.charAt(2)?"LTR":"RTL",t.outFormat=a+l);return t}(t,{inFormat:r,outFormat:i,swap:s},a);if(u.inFormat===u.outFormat)return t;r=u.inFormat;i=u.outFormat;s=u.swap;var c=r.substring(0,1),f=r.substring(1,4),h=i.substring(0,1),p=i.substring(1,4);a.inFormat=r;a.outFormat=i;a.swap=s;if("L"===c&&"VLTR"===i){if("LTR"===f)return a.dir=B,o(t,a);if("RTL"===f)return a.dir=E,o(t,a)}if("V"===c&&"V"===h)return a.dir="RTL"===f?E:B,l(t,a);if("L"===c&&"VRTL"===i)return"LTR"===f?(a.dir=B,t=o(t,a)):(a.dir=E,t=o(t,a)),l(t);if("VLTR"===r&&"LLTR"===i)return a.dir=B,o(t,a);if("V"===c&&"L"===h&&f!==p)return t=l(t),"RTL"===f?e(t,"LLTR","VLTR",s,a):e(t,"LRTL","VRTL",s,a);if("VRTL"===r&&"LRTL"===i)return e(t,"LRTL","VRTL",s,a);if("L"===c&&"L"===h){var d=a.swap;return a.swap=d.substr(0,1)+"N","RTL"===f?(a.dir=E,t=o(t,a),a.swap="N"+d.substr(1,2),a.dir=B,t=o(t,a)):(a.dir=B,t=o(t,a),a.swap="N"+d.substr(1,2),t=e(t,"VLTR","LRTL",a.swap,a)),t}}(e,d,v,P,s),D=!1;return"R"===r.charAt(1)?D=!0:"C"!==r.charAt(1)&&"D"!==r.charAt(1)||(D=this.checkContextual(A)),this.sourceToTarget=C,this.targetToSource=function(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[e[r]]=r;return t}(this.sourceToTarget),T=this.targetToSource,i=t.charAt(3)===r.charAt(3)?A:"S"===r.charAt(3)?function(e,t,r){if(0===t.length)return;void 0===e&&(e=!0);void 0===r&&(r=!0);var i=(t=String(t)).split(""),n=0,o=1,s=i.length;e||(n=i.length-1,o=-1,s=1);for(var a=function(e,t,r,i,n){for(var o=0,s=[],a=0,l=t;l*r<i;l+=r)if(c(e[l])||x(e[l])){if("ل"===e[l]&&h(e,l+r,r,i)){e[l]=I(e[l+r],0===o?R:N),b(e,l+=r,r,i),n&&(s[a]=l,a++),o=0;continue}var u=e[l];1===o?e[l]=f(e,l+r,r,i)?m(e[l]):g(e[l],z):!0===f(e,l+r,r,i)?e[l]=g(e[l],U):e[l]=g(e[l],O),x(u)||(o=1),!0===y(u)&&(o=0)}else o=0;return s}(i,n,o,s,r),l="",p=0;p<i.length;p++)r&&u(a,a.length,p)>-1?(w(T,p,!e,-1),C.splice(p,1)):l+=i[p];return l}(D,A,!0):function(e,t,r){if(0===e.length)return;void 0===r&&(r=!0);void 0===t&&(t=!0);e=String(e);var i="",n=[];n=e.split("");for(var o=0;o<e.length;o++){var s=!1;if(n[o]>="ﹰ"&&n[o]<"\ufeff"){var a=e.charCodeAt(o);n[o]>="ﻵ"&&n[o]<="ﻼ"?(t?(o>0&&r&&" "===n[o-1]?i=i.substring(0,i.length-1)+"ل":(i+="ل",s=!0),i+=L[(a-65269)/2]):(i+=L[(a-65269)/2],i+="ل",o+1<e.length&&r&&" "===n[o+1]?o++:s=!0),s&&(w(T,o,!0,1),C.splice(o,0,C[o]))):i+=G[a-65136]}else i+=n[o]}return i}(A,D,!0),this.sourceToTarget=C,this.targetToSource=T,this.levels=S,i},_inputFormatSetter:function(e){if(!D.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=e},_outputFormatSetter:function(e){if(!D.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=e},checkParameters:function(e,t){return e?this.set("inputFormat",e):e=this.inputFormat,t?this.set("outputFormat",t):t=this.outputFormat,e!==t},checkContextual:function(e){var t=n(e);if("ltr"!==t&&"rtl"!==t){try{t=document.dir.toLowerCase()}catch(e){}"ltr"!==t&&"rtl"!==t&&(t="ltr")}return t},hasBidiChar:function(e){return F.test(e)}});function n(e){var t=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(e);return t?t[0]<="z"?"ltr":"rtl":""}function o(e,t){var r=e.split(""),i=[];return s(r,i,t),function(e,t,r){if(0===r.hiLevel||r.swap.substr(0,1)===r.swap.substr(1,2))return;for(var i=0;i<e.length;i++)1===t[i]&&(e[i]=v(e[i]))}(r,i,t),p(2,r,i,t),p(1,r,i,t),S=i,r.join("")}function s(e,t,r){var i=e.length,n=r.dir?J:Z,o=null,s=null,l=null,u=0,c=null,f=-1,h=null,p=null,v=[],y=[];for(r.hiLevel=r.dir,r.lastArabic=!1,r.hasUbatAl=!1,r.hasUbatB=!1,r.hasUbatS=!1,h=0;h<i;h++)v[h]=a(e[h]);for(p=0;p<i;p++){if(o=u,y[p]=s=d(e,v,y,p,r),c=240&(u=n[o][s]),u&=15,t[p]=l=n[u][P],c>0)if(16===c){for(h=f;h<p;h++)t[h]=1;f=-1}else f=-1;if(n[u][A])-1===f&&(f=p);else if(f>-1){for(h=f;h<p;h++)t[h]=l;f=-1}v[p]===ee&&(t[p]=0),r.hiLevel|=l}r.hasUbatS&&function(e,t,r,i){for(var n=0;n<r;n++)if(e[n]===te){t[n]=i.dir;for(var o=n-1;o>=0&&e[o]===ie;o--)t[o]=i.dir}}(v,t,i,r)}function a(e){var t=e.charCodeAt(0),r=le[t>>8];return r<ae?r:ue[r-ae][255&t]}function l(e,t){var r=e.split("");if(t){var i=[];s(r,i,t),S=i}return r.reverse(),C.reverse(),r.join("")}function u(e,t,r){for(var i=0;i<t;i++)if(e[i]===r)return i;return-1}function c(e){for(var t=0;t<Y.length;t++)if(e>=Y[t]&&e<=X[t])return!0;return!1}function f(e,t,r,i){for(;t*r<i&&x(e[t]);)t+=r;return!!(t*r<i&&c(e[t]))}function h(e,t,r,i){for(;t*r<i&&x(e[t]);)t+=r;var n=" ";if(!(t*r<i))return!1;n=e[t];for(var o=0;o<L.length;o++)if(L[o]===n)return!0;return!1}function p(e,t,r,i){if(!(i.hiLevel<e)){if(1===e&&i.dir===E&&!i.hasUbatB)return t.reverse(),void C.reverse();for(var n,o,s,a,l=t.length,u=0;u<l;){if(r[u]>=e){for(n=u+1;n<l&&r[n]>=e;)n++;for(o=u,s=n-1;o<s;o++,s--)a=t[o],t[o]=t[s],t[s]=a,a=C[o],C[o]=C[s],C[s]=a;u=n}u++}}}function d(e,t,r,i,n){var o=t[i];return{UBAT_L:function(){return n.lastArabic=!1,W},UBAT_R:function(){return n.lastArabic=!1,H},UBAT_ON:function(){return $},UBAT_AN:function(){return Q},UBAT_EN:function(){return n.lastArabic?Q:K},UBAT_AL:function(){return n.lastArabic=!0,n.hasUbatAl=!0,H},UBAT_WS:function(){return $},UBAT_CS:function(){var e,o;return i<1||i+1>=t.length||(e=r[i-1])!==K&&e!==Q||(o=t[i+1])!==K&&o!==Q?$:(n.lastArabic&&(o=Q),o===e?o:$)},UBAT_ES:function(){return(i>0?r[i-1]:ee)===K&&i+1<t.length&&t[i+1]===K?K:$},UBAT_ET:function(){if(i>0&&r[i-1]===K)return K;if(n.lastArabic)return $;for(var e=i+1,o=t.length;e<o&&t[e]===ne;)e++;return e<o&&t[e]===K?K:$},UBAT_NSM:function(){if("VLTR"===n.inFormat){for(var o=t.length,s=i+1;s<o&&t[s]===oe;)s++;if(s<o){var a=e[i],l=a>=1425&&a<=2303||64286===a,u=t[s];if(l&&(u===H||u===re))return H}}return i<1||t[i-1]===ee?$:r[i-1]},UBAT_B:function(){return n.lastArabic=!0,n.hasUbatB=!0,n.dir},UBAT_S:function(){return n.hasUbatS=!0,$},UBAT_LRE:function(){return n.lastArabic=!1,$},UBAT_RLE:function(){return n.lastArabic=!1,$},UBAT_LRO:function(){return n.lastArabic=!1,$},UBAT_RLO:function(){return n.lastArabic=!1,$},UBAT_PDF:function(){return n.lastArabic=!1,$},UBAT_BN:function(){return $}}[se[o]]()}function v(e){for(var t,r=0,i=V.length-1;r<=i;)if(t=Math.floor((r+i)/2),e<V[t][0])i=t-1;else{if(!(e>V[t][0]))return V[t][1];r=t+1}return e}function y(e){for(var t=0;t<q.length;t++)if(q[t]===e)return!0;return!1}function m(e){for(var t=0;t<k.length;t++)if(e===k[t])return j[t];return e}function g(e,t){for(var r=0;r<k.length;r++)if(e===k[r])return t[r];return e}function x(e){return e>="ً"&&e<="ٕ"}function _(e){return"L"===e?"LTR":"R"===e?"RTL":"C"===e?"CLR":"D"===e?"CRL":void 0}function b(e,t,r,i){for(;t*r<i&&x(e[t]);)t+=r;return t*r<i&&(e[t]=" ",!0)}function I(e,t){for(var r=0;r<L.length;r++)if(e===L[r])return t[r];return e}function w(e,t,r,i){for(var n=0;n<e.length;n++)(e[n]>t||!r&&e[n]===t)&&(e[n]+=i)}var C=[],T=[],S=[],M={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},P=5,A=6,B=0,E=1,D=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,F=/[\u0591-\u06ff\ufb1d-\ufefc]/,V=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["«","»"],["»","«"],["‹","›"],["›","‹"],["⁽","⁾"],["⁾","⁽"],["₍","₎"],["₎","₍"],["≤","≥"],["≥","≤"],["〈","〉"],["〉","〈"],["﹙","﹚"],["﹚","﹙"],["﹛","﹜"],["﹜","﹛"],["﹝","﹞"],["﹞","﹝"],["﹤","﹥"],["﹥","﹤"]],L=["آ","أ","إ","ا"],R=["ﻵ","ﻷ","ﻹ","ﻻ"],N=["ﻶ","ﻸ","ﻺ","ﻼ"],k=["ا","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ی","ئ","ؤ"],O=["ﺍ","ﺏ","ﺕ","ﺙ","ﺝ","ﺡ","ﺥ","ﺩ","ﺫ","ﺭ","ﺯ","ﺱ","ﺵ","ﺹ","ﺽ","ﻁ","ﻅ","ﻉ","ﻍ","ﻑ","ﻕ","ﻙ","ﻝ","ﻡ","ﻥ","ﻩ","ﻭ","ﻱ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯼ","ﺉ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺉ","ﺅ"],z=["ﺎ","ﺐ","ﺖ","ﺚ","ﺞ","ﺢ","ﺦ","ﺪ","ﺬ","ﺮ","ﺰ","ﺲ","ﺶ","ﺺ","ﺾ","ﻂ","ﻆ","ﻊ","ﻎ","ﻒ","ﻖ","ﻚ","ﻞ","ﻢ","ﻦ","ﻪ","ﻮ","ﻲ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯽ","ﺊ","ﺆ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺊ","ﺆ"],j=["ﺎ","ﺒ","ﺘ","ﺜ","ﺠ","ﺤ","ﺨ","ﺪ","ﺬ","ﺮ","ﺰ","ﺴ","ﺸ","ﺼ","ﻀ","ﻄ","ﻈ","ﻌ","ﻐ","ﻔ","ﻘ","ﻜ","ﻠ","ﻤ","ﻨ","ﻬ","ﻮ","ﻴ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯿ","ﺌ","ﺆ","ﹱ","ﹲ","ﹴ","ﹷ","ﹹ","ﹻ","ﹽ","ﹿ","ﺀ","ﺌ","ﺆ"],U=["ﺍ","ﺑ","ﺗ","ﺛ","ﺟ","ﺣ","ﺧ","ﺩ","ﺫ","ﺭ","ﺯ","ﺳ","ﺷ","ﺻ","ﺿ","ﻃ","ﻇ","ﻋ","ﻏ","ﻓ","ﻗ","ﻛ","ﻟ","ﻣ","ﻧ","ﻫ","ﻭ","ﻳ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯾ","ﺋ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺋ","ﺅ"],q=["ء","آ","أ","ؤ","إ","ا","ة","د","ذ","ر","ز","و","ى"],G=["ً","ً","ٌ","؟","ٍ","؟","َ","َ","ُ","ُ","ِ","ِ","ّ","ّ","ْ","ْ","ء","آ","آ","أ","أ","ؤ","ؤ","إ","إ","ئ","ئ","ئ","ئ","ا","ا","ب","ب","ب","ب","ة","ة","ت","ت","ت","ت","ث","ث","ث","ث","ج","ج","ج","ج","ح","ح","ح","ح","خ","خ","خ","خ","د","د","ذ","ذ","ر","ر","ز","ز","س","س","س","س","ش","ش","ش","ش","ص","ص","ص","ص","ض","ض","ض","ض","ط","ط","ط","ط","ظ","ظ","ظ","ظ","ع","ع","ع","ع","غ","غ","غ","غ","ف","ف","ف","ف","ق","ق","ق","ق","ك","ك","ك","ك","ل","ل","ل","ل","م","م","م","م","ن","ن","ن","ن","ه","ه","ه","ه","و","و","ى","ى","ي","ي","ي","ي","ﻵ","ﻶ","ﻷ","ﻸ","ﻹ","ﻺ","ﻻ","ﻼ","؟","؟","؟"],Y=["ء","ف"],X=["غ","ي"],Z=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],J=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],W=0,H=1,K=2,Q=3,$=4,ee=5,te=6,re=7,ie=8,ne=11,oe=12,se=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],ae=100,le=[ae+0,W,W,W,W,ae+1,ae+2,ae+3,H,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,ae+4,$,$,$,W,$,W,$,W,$,$,$,W,W,$,$,W,W,W,W,W,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,W,W,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,W,W,W,W,W,W,W,W,W,W,W,W,W,W,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,W,W,$,$,W,W,$,$,W,W,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,W,W,W,ae+5,re,re,ae+6,ae+7],ue=[[18,18,18,18,18,18,18,18,18,te,ee,te,ie,ee,18,18,18,18,18,18,18,18,18,18,18,18,18,18,ee,ee,ee,te,ie,$,$,ne,ne,ne,$,$,$,$,$,10,9,10,9,9,K,K,K,K,K,K,K,K,K,K,9,$,$,$,$,$,$,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,$,$,$,$,$,$,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,$,$,$,$,18,18,18,18,18,18,ee,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,$,ne,ne,ne,ne,$,$,$,$,W,$,$,18,$,$,ne,ne,K,K,$,W,$,$,$,K,W,$,$,$,$,$,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,$,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,$,W,W,W,W,W,W,W,W],[W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,$,$,$,$,$,$,$,$,$,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,$,$,W,W,W,W,W,W,W,$,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,$,W,$,$,$,$,$,$,$,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,H,oe,H,oe,oe,H,oe,oe,H,oe,$,$,$,$,$,$,$,$,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,$,$,$,$,$,H,H,H,H,H,$,$,$,$,$,$,$,$,$,$,$],[Q,Q,Q,Q,$,$,$,$,re,ne,ne,re,9,re,$,$,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,re,$,$,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,ne,Q,Q,re,re,re,oe,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,oe,oe,oe,oe,oe,oe,oe,Q,$,oe,oe,oe,oe,oe,oe,re,re,oe,oe,$,oe,oe,oe,oe,re,re,K,K,K,K,K,K,K,K,K,K,re,re,re,re,re,re],[re,re,re,re,re,re,re,re,re,re,re,re,re,re,$,re,re,oe,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,$,$,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,re,$,$,$,$,$,$,$,$,$,$,$,$,$,$,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,oe,oe,oe,oe,oe,oe,oe,oe,oe,H,H,$,$,$,$,H,$,$,$,$,$],[ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,18,18,18,W,H,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,ie,ee,13,14,15,16,17,9,ne,ne,ne,ne,ne,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,9,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,ie,18,18,18,18,18,$,$,$,$,$,18,18,18,18,18,18,K,W,$,$,K,K,K,K,K,K,10,10,$,$,$,W,K,K,K,K,K,K,K,K,K,K,10,10,$,$,$,$,W,W,W,W,W,W,W,W,W,W,W,W,W,$,$,$,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[W,W,W,W,W,W,W,$,$,$,$,$,$,$,$,$,$,$,$,W,W,W,W,W,$,$,$,$,$,H,oe,H,H,H,H,H,H,H,H,H,H,10,H,H,H,H,H,H,H,H,H,H,H,H,H,$,H,H,H,H,H,$,H,$,H,H,$,H,H,$,H,H,H,H,H,H,H,H,H,H,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re],[oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,oe,oe,oe,oe,oe,oe,oe,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,9,$,9,$,$,9,$,$,$,$,$,$,$,$,$,ne,$,$,10,10,$,$,$,$,$,ne,ne,$,$,$,$,$,re,re,re,re,re,$,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,$,$,18],[$,$,$,ne,ne,ne,$,$,$,$,$,10,9,10,9,9,K,K,K,K,K,K,K,K,K,K,9,$,$,$,$,$,$,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,$,$,$,$,$,$,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,$,$,$,$,$,$,$,$,$,$,$,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,$,$,$,W,W,W,W,W,W,$,$,W,W,W,W,W,W,$,$,W,W,W,W,W,W,$,$,W,W,W,$,$,$,ne,ne,$,$,$,ne,ne,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$]];return i}.apply(null,i))||(e.exports=n)},1601:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){var r,i,n,o;Object.defineProperty(t,"__esModule",{value:!0}),(i=r=t.VectorRole||(t.VectorRole={}))[i.ENTRY=1]="ENTRY",i[i.EXIT=2]="EXIT",i[i.CAP=3]="CAP",(o=n=t.CapPosition||(t.CapPosition={}))[o.START=1]="START",o[o.END=2]="END",t.SYSTEM_MAG_LIMIT=3.8,t.MITER_SAFE_RADS=2*Math.acos(1/t.SYSTEM_MAG_LIMIT);var s=t.SYSTEM_MAG_LIMIT*t.SYSTEM_MAG_LIMIT,a=-1,l=8/(2*Math.PI);function u(e){var t,r={items:new Array,count:0};for(t=0;t<e;++t)r.items.push(void 0);return r}t.allocTriangles=function(e){var t,r={items:new Array,count:0};for(t=0;t<e;++t)r.items.push({v1:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v2:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v3:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]}});return r},t.allocExtrudeVectors=function(){var e=function(e){var t,r={items:new Array,count:0};for(t=0;t<30;++t)r.items.push({vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]});return r}(),t={};return t[r.ENTRY]=u(20),t[r.EXIT]=u(20),t[r.CAP]=u(20),{vectors:e,lists:t}},t.copyExtrudeVectors=function(e,t){var i;for(i=0;i<t.vectors.count;++i)e.vectors.items[i].vector[0]=t.vectors.items[i].vector[0],e.vectors.items[i].vector[1]=t.vectors.items[i].vector[1],e.vectors.items[i].texCoords[0]=t.vectors.items[i].texCoords[0],e.vectors.items[i].texCoords[1]=t.vectors.items[i].texCoords[1],e.vectors.items[i].direction[0]=t.vectors.items[i].direction[0],e.vectors.items[i].direction[1]=t.vectors.items[i].direction[1],e.vectors.items[i].base=t.vectors.items[i].base;e.vectors.count=t.vectors.count;var n=t.lists[r.ENTRY],o=e.lists[r.ENTRY],s=t.lists[r.EXIT],a=e.lists[r.EXIT],l=t.lists[r.CAP],u=e.lists[r.CAP];for(i=0;i<n.count;++i)o.items[i]=n.items[i];for(o.count=n.count,i=0;i<s.count;++i)a.items[i]=s.items[i];for(a.count=s.count,i=0;i<l.count;++i)u.items[i]=l.items[i];u.count=l.count,e.capCenter=t.capCenter};var c={vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0],base:void 0};function f(e,t){c.vector[0]=e.vector[0],c.vector[1]=e.vector[1],c.texCoords[0]=e.texCoords[0],c.texCoords[1]=e.texCoords[1],c.direction[0]=e.direction[0],c.direction[1]=e.direction[1],c.base=e.base,e.vector[0]=t.vector[0],e.vector[1]=t.vector[1],e.texCoords[0]=t.texCoords[0],e.texCoords[1]=t.texCoords[1],e.direction[0]=t.direction[0],e.direction[1]=t.direction[1],e.base=t.base,t.vector[0]=c.vector[0],t.vector[1]=c.vector[1],t.texCoords[0]=c.texCoords[0],t.texCoords[1]=c.texCoords[1],t.direction[0]=c.direction[0],t.direction[1]=c.direction[1],t.base=c.base}t.swapExtrudeVectors=f;var h,p=[];for(h=0;h<32;++h)p.push([void 0,void 0]);var d=function(e){var t,r={items:new Array,count:0};for(t=0;t<8;++t)r.items.push([void 0,void 0]);return r}();function v(e,t){return e[0]*t[0]+e[1]*t[1]}function y(e){return Math.sqrt(v(e,e))}function m(e,t){var r=y(t);return e[0]=t[0]/r,e[1]=t[1]/r,e}function g(e,t){return e[0]=-t[1],e[1]=t[0],e}function x(e,t){return e[0]*t[1]-e[1]*t[0]}function _(e,t){return e[0]=-t[0],e[1]=-t[1],e}function b(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function I(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function w(e,t,r){return i=e,o=r,((n=t)[0]-i[0])*(o[1]-i[1])-(o[0]-i[0])*(n[1]-i[1])<0;var i,n,o}function C(e,t){var r=v(e,t);return.999<r?0:r<-.999?Math.PI:Math.acos(r)}function T(e,t,r,i,n){if(0!==i){var o,s=y(t),a=(n?-1:1)*C(b(p[0],t,1/s),b(p[1],r,1/s))/i,l=Math.cos(a),u=Math.sin(a),c=t[0],f=t[1];for(o=0;o<i-1;++o){var h=c;c=l*h-u*f,f=u*h+l*f,e.items[o][0]=c,e.items[o][1]=f}e.count=i-1}else e.count=0}function S(e){var t,r=e.count,i=Math.floor(r/2);for(t=0;t<i;++t){var n=e.items[t];e.items[t]=e.items[r-t-1],e.items[r-t-1]=n}}t.length=y,t.normalize=m,t.getNumberOfSlices=function(e){return Math.max(Math.round(e*l),1)},t.getRads=C,t.reverse=S;var M=[void 0,void 0],P=[void 0,void 0],A=[0,0],B=[0,0],E=[0,0],D=[0,0],F=Math.cos(Math.PI/4),V=Math.sin(Math.PI/4),L=Math.sqrt(2),R=function(){function e(e){this._distanceAlongCorrection=e.distanceAlongCorrection}return e.prototype.bridge=function(e,t,i){var n,o,s,a,l=t.vectors,u=t.lists[r.EXIT],c=i.vectors,h=i.lists[r.ENTRY];if(u.count===h.count+1)n=u.items,o=l.items,s=h.items,a=c.items;else if(h.count===u.count+1)n=h.items,o=c.items,s=u.items,a=l.items;else{if(u.count!==h.count)return console.error("Cannot bridge "+u.count+" to "+h.count+"."),void(e.count=0);n=h.items,o=c.items,s=u.items,a=l.items}var p,d=u.count+h.count-2;for(e.count=d,M[0]=n,M[1]=s,P[0]=o,P[1]=a,p=0;p<d;++p){var v=e.items[p],y=(p+0)%2,m=Math.floor((p+0)/2),g=P[y][M[y][m]];v.v1.vector[0]=g.vector[0],v.v1.vector[1]=g.vector[1],v.v1.texCoords[0]=g.texCoords[0],v.v1.texCoords[1]=g.texCoords[1],v.v1.direction[0]=g.direction[0],v.v1.direction[1]=g.direction[1],v.v1.base=g.base;var x=(p+1)%2,_=Math.floor((p+1)/2),b=P[x][M[x][_]];v.v2.vector[0]=b.vector[0],v.v2.vector[1]=b.vector[1],v.v2.texCoords[0]=b.texCoords[0],v.v2.texCoords[1]=b.texCoords[1],v.v2.direction[0]=b.direction[0],v.v2.direction[1]=b.direction[1],v.v2.base=b.base;var I=(p+2)%2,C=Math.floor((p+2)/2),T=P[I][M[I][C]];v.v3.vector[0]=T.vector[0],v.v3.vector[1]=T.vector[1],v.v3.texCoords[0]=T.texCoords[0],v.v3.texCoords[1]=T.texCoords[1],v.v3.direction[0]=T.direction[0],v.v3.direction[1]=T.direction[1],v.v3.base=T.base;var S=v.v1.base&&v.v1.base.point||A,F=v.v2.base&&v.v2.base.point||A,V=v.v3.base&&v.v3.base.point||A;B[0]=S[0]+v.v1.vector[0],B[1]=S[1]+v.v1.vector[1],E[0]=F[0]+v.v2.vector[0],E[1]=F[1]+v.v2.vector[1],D[0]=V[0]+v.v3.vector[0],D[1]=V[1]+v.v3.vector[1],w(B,E,D)||f(v.v2,v.v3)}},e.prototype.pie=function(e,t){if(0!==t.lists[r.CAP].count){if(1===t.lists[r.CAP].count)return console.error("A single vector is not enough to define a pie."),void(e.count=0);var i;for(e.count=t.lists[r.CAP].count-1,i=0;i<e.count;++i){var n=e.items[i],o=t.lists[r.CAP].items[i],s=t.vectors.items[o];n.v1.vector[0]=s.vector[0],n.v1.vector[1]=s.vector[1],n.v1.texCoords[0]=s.texCoords[0],n.v1.texCoords[1]=s.texCoords[1],n.v1.direction[0]=s.direction[0],n.v1.direction[1]=s.direction[1],n.v1.base=s.base;var a=t.lists[r.CAP].items[i+1],l=t.vectors.items[a];n.v2.vector[0]=l.vector[0],n.v2.vector[1]=l.vector[1],n.v2.texCoords[0]=l.texCoords[0],n.v2.texCoords[1]=l.texCoords[1],n.v2.direction[0]=l.direction[0],n.v2.direction[1]=l.direction[1],n.v2.base=l.base;var u=t.capCenter,c=t.vectors.items[u];n.v3.vector[0]=c.vector[0],n.v3.vector[1]=c.vector[1],n.v3.texCoords[0]=c.texCoords[0],n.v3.texCoords[1]=c.texCoords[1],n.v3.direction[0]=c.direction[0],n.v3.direction[1]=c.direction[1],n.v3.base=c.base;var h=n.v1.base&&n.v1.base.point||A,p=n.v2.base&&n.v2.base.point||A,d=n.v3.base&&n.v3.base.point||A;B[0]=h[0]+n.v1.vector[0],B[1]=h[1]+n.v1.vector[1],E[0]=p[0]+n.v2.vector[0],E[1]=p[1]+n.v2.vector[1],D[0]=d[0]+n.v3.vector[0],D[1]=d[1]+n.v3.vector[1],w(B,E,D)||f(n.v2,n.v3)}}else e.count=0},e.prototype.buttCap=function(e,t,r){this.fastMiterJoin(e,t,r)},e.prototype.roundCap=function(e,t,i,o,s,a){void 0===a&&(a=0),this.fastMiterJoin(e,t,i);var l=o===n.START?0:1,u=o===n.START?1:0;e.capCenter=e.vectors.count;var c=e.vectors.items[e.capCenter];c.vector[0]=0,c.vector[1]=0,c.texCoords[0]=0,c.texCoords[1]=0,c.direction[0]=0,c.direction[1]=0,++e.vectors.count,T(d,e.vectors.items[l].vector,e.vectors.items[u].vector,s,!1);var f=e.vectors.count,h=e.lists[r.CAP];h.items[0]=l;var p,v=e.vectors.items[l].texCoords[1],y=e.vectors.items[u].texCoords[1];for(p=0;p<d.count;++p){var m=a*(1-Math.abs(d.count/2-p)/(d.count/2)),g=v+p/(d.count-1)*(y-v),x=d.items[p],_=e.vectors.items[f+p];_.vector[0]=x[0],_.vector[1]=x[1],_.texCoords[0]=m,_.texCoords[1]=g,_.direction[0]=0,_.direction[1]=0,h.items[p+1]=f+p}h.items[d.count+1]=u,h.count=d.count+2,e.vectors.count=f+d.count},e.prototype.squareCap=function(e,t,r,i){this.fastMiterJoin(e,t,r);var o=i===n.START?0:1,s=i===n.START?1:0,a=p[0],l=p[1],u=p[2],c=p[3],f=p[4],h=e.vectors.items[o].vector;a[0]=F*h[0]-V*h[1],a[1]=V*h[0]+F*h[1],b(c,a,L),l[0]=F*a[0]-V*a[1],l[1]=V*a[0]+F*a[1],u[0]=F*l[0]-V*l[1],u[1]=V*l[0]+F*l[1],b(f,u,L);var d=e.vectors.items[o];d.vector[0]=c[0],d.vector[1]=c[1];var v=e.vectors.items[s];v.vector[0]=f[0],v.vector[1]=f[1]},e.prototype.squareCapForDashedLines=function(e,t,i,o){if(o===n.START){var s=g(p[0],i),a=_(p[4],s),l=p[1],u=p[2],c=p[3];l[0]=F*s[0]-V*s[1],l[1]=V*s[0]+F*s[1],u[0]=F*l[0]-V*l[1],u[1]=V*l[0]+F*l[1],c[0]=F*u[0]-V*u[1],c[1]=V*u[0]+F*u[1],(f=p[5])[0]=0,f[1]=0,e.capCenter=0,(h=e.vectors.items)[0].vector[0]=f[0],h[0].vector[1]=f[1],h[0].direction[0]=0,h[0].direction[1]=0,h[0].texCoords[0]=0,h[0].texCoords[1]=0,h[1].vector[0]=s[0],h[1].vector[1]=s[1],h[1].direction[0]=0,h[1].direction[1]=0,h[1].texCoords[0]=0,h[1].texCoords[1]=-1,h[2].vector[0]=l[0]*L,h[2].vector[1]=l[1]*L,h[2].direction[0]=0,h[2].direction[1]=0,h[2].texCoords[0]=-1,h[2].texCoords[1]=-1,h[3].vector[0]=c[0]*L,h[3].vector[1]=c[1]*L,h[3].direction[0]=0,h[3].direction[1]=0,h[3].texCoords[0]=-1,h[3].texCoords[1]=1,h[4].vector[0]=a[0],h[4].vector[1]=a[1],h[4].direction[0]=0,h[4].direction[1]=0,h[4].texCoords[0]=0,h[4].texCoords[1]=1,e.vectors.count=5,e.lists[r.CAP].count=4,e.lists[r.CAP].items[0]=1,e.lists[r.CAP].items[1]=2,e.lists[r.CAP].items[2]=3,e.lists[r.CAP].items[3]=4,e.lists[r.ENTRY].count=0,e.lists[r.EXIT].count=3,e.lists[r.EXIT].items[0]=1,e.lists[r.EXIT].items[1]=0,e.lists[r.EXIT].items[2]=4}else{var f,h;s=g(p[0],i),a=_(p[4],s),l=p[1],u=p[2],c=p[3],l[0]=F*a[0]-V*a[1],l[1]=V*a[0]+F*a[1],u[0]=F*l[0]-V*l[1],u[1]=V*l[0]+F*l[1],c[0]=F*u[0]-V*u[1],c[1]=V*u[0]+F*u[1],(f=p[5])[0]=0,f[1]=0,e.capCenter=0,(h=e.vectors.items)[0].vector[0]=f[0],h[0].vector[1]=f[1],h[0].direction[0]=0,h[0].direction[1]=0,h[0].texCoords[0]=0,h[0].texCoords[1]=0,h[1].vector[0]=a[0],h[1].vector[1]=a[1],h[1].direction[0]=0,h[1].direction[1]=0,h[1].texCoords[0]=0,h[1].texCoords[1]=1,h[2].vector[0]=l[0]*L,h[2].vector[1]=l[1]*L,h[2].direction[0]=0,h[2].direction[1]=0,h[2].texCoords[0]=1,h[2].texCoords[1]=1,h[3].vector[0]=c[0]*L,h[3].vector[1]=c[1]*L,h[3].direction[0]=0,h[3].direction[1]=0,h[3].texCoords[0]=1,h[3].texCoords[1]=-1,h[4].vector[0]=s[0],h[4].vector[1]=s[1],h[4].direction[0]=0,h[4].direction[1]=0,h[4].texCoords[0]=0,h[4].texCoords[1]=-1,e.vectors.count=5,e.lists[r.CAP].count=4,e.lists[r.CAP].items[0]=1,e.lists[r.CAP].items[1]=2,e.lists[r.CAP].items[2]=3,e.lists[r.CAP].items[3]=4,e.lists[r.ENTRY].count=3,e.lists[r.ENTRY].items[0]=4,e.lists[r.ENTRY].items[1]=0,e.lists[r.ENTRY].items[2]=1,e.lists[r.EXIT].count=0}},e.prototype.fastMiterJoin=function(e,t,i){var n=g(p[0],i),o=n,s=_(p[1],n),l=e.vectors.items[0];l.vector[0]=o[0],l.vector[1]=o[1],l.texCoords[0]=0,l.texCoords[1]=a,l.direction[0]=0,l.direction[1]=0;var u=e.vectors.items[1];u.vector[0]=s[0],u.vector[1]=s[1],u.texCoords[0]=0,u.texCoords[1]=1,u.direction[0]=0,u.direction[1]=0,e.vectors.count=2;var c=e.lists[r.ENTRY];c.items[0]=0,c.items[1]=1,c.count=2;var f=e.lists[r.EXIT];f.items[0]=0,f.items[1]=1,f.count=2,e.lists[r.CAP].count=0,e.capCenter=void 0},e.prototype.miterJoin=function(e,t,i){var n=g(p[0],t),o=g(p[1],i),s=p[2];s[0]=n[0]+o[0],s[1]=n[1]+o[1];var l=m(p[3],s),u=v(l,n);l=b(p[4],l,1/u);var c=_(p[5],l);if(this._distanceAlongCorrection){(d=e.vectors.items[0]).vector[0]=l[0],d.vector[1]=l[1],d.texCoords[0]=0,d.texCoords[1]=a,d.direction[0]=t[0],d.direction[1]=t[1],(y=e.vectors.items[1]).vector[0]=c[0],y.vector[1]=c[1],y.texCoords[0]=0,y.texCoords[1]=1,y.direction[0]=t[0],y.direction[1]=t[1];var f=e.vectors.items[2];f.vector[0]=l[0],f.vector[1]=l[1],f.texCoords[0]=0,f.texCoords[1]=a,f.direction[0]=i[0],f.direction[1]=i[1];var h=e.vectors.items[3];h.vector[0]=c[0],h.vector[1]=c[1],h.texCoords[0]=0,h.texCoords[1]=1,h.direction[0]=i[0],h.direction[1]=i[1],e.vectors.count=4,(x=e.lists[r.ENTRY]).items[0]=0,x.items[1]=1,x.count=2,(I=e.lists[r.EXIT]).items[0]=2,I.items[1]=3,I.count=2}else{var d,y,x,I;(d=e.vectors.items[0]).vector[0]=l[0],d.vector[1]=l[1],d.texCoords[0]=0,d.texCoords[1]=a,d.direction[0]=0,d.direction[1]=0,(y=e.vectors.items[1]).vector[0]=c[0],y.vector[1]=c[1],y.texCoords[0]=0,y.texCoords[1]=1,y.direction[0]=0,y.direction[1]=0,e.vectors.count=2,(x=e.lists[r.ENTRY]).items[0]=0,x.items[1]=1,x.count=2,(I=e.lists[r.EXIT]).items[0]=0,I.items[1]=1,I.count=2}e.lists[r.CAP].count=0,e.capCenter=void 0},e.prototype.bevelJoin=function(e,t,i,n){var o=n*n,l=x(t,i),u=0<l?[a,1]:[1,a],c=u[0],f=u[1],h=0<l?_(p[0],g(p[1],t)):g(p[2],t),d=0<l?_(p[3],g(p[4],i)):g(p[5],i),y=p[6];y[0]=h[0]+d[0],y[1]=h[1]+d[1];var w=m(p[7],y),C=_(p[8],w),T=v(w,h),M=x(w,h),P=Math.abs(M/T),A=1+P*P,B=A<s?[P,this._distanceAlongCorrection]:[Math.sqrt(s-1),!0],E=B[0],D=B[1],F=A<o?[P,this._distanceAlongCorrection]:[Math.sqrt(o-1),!0],V=F[0],L=F[1];if(L&&D){I((z=e.vectors.items[0]).vector,_(p[9],h),b(p[10],_(p[11],t),E)),z.texCoords[0]=0,z.texCoords[1]=c,z.direction[0]=this._distanceAlongCorrection?t[0]:0,z.direction[1]=this._distanceAlongCorrection?t[1]:0,I((j=e.vectors.items[1]).vector,_(p[12],d),b(p[13],i,E)),j.texCoords[0]=0,j.texCoords[1]=c,j.direction[0]=this._distanceAlongCorrection?i[0]:0,j.direction[1]=this._distanceAlongCorrection?i[1]:0,(N=e.vectors.items[2]).vector[0]=0,N.vector[1]=0,N.texCoords[0]=0,N.texCoords[1]=0,N.direction[0]=0,N.direction[1]=0,I((k=e.vectors.items[3]).vector,h,b(p[14],t,V)),k.texCoords[0]=0,k.texCoords[1]=f,k.direction[0]=this._distanceAlongCorrection?t[0]:0,k.direction[1]=this._distanceAlongCorrection?t[1]:0;var R=e.vectors.items[4];I(R.vector,d,b(p[15],_(p[16],i),V)),R.texCoords[0]=0,R.texCoords[1]=f,R.direction[0]=this._distanceAlongCorrection?i[0]:0,R.direction[1]=this._distanceAlongCorrection?i[1]:0,e.vectors.count=5,(U=e.lists[r.ENTRY]).items[0]=0,U.items[1]=2,U.items[2]=3,U.count=3,(q=e.lists[r.EXIT]).items[0]=1,q.items[1]=2,q.items[2]=4,q.count=3,A<o?((O=e.lists[r.CAP]).count=0,e.capCenter=void 0):((O=e.lists[r.CAP]).items[0]=3,O.items[1]=4,O.count=2,e.capCenter=2)}else if(!L&&D)I((z=e.vectors.items[0]).vector,_(p[9],h),b(p[10],_(p[11],t),E)),z.texCoords[0]=0,z.texCoords[1]=c,z.direction[0]=this._distanceAlongCorrection?t[0]:0,z.direction[1]=this._distanceAlongCorrection?t[1]:0,I((j=e.vectors.items[1]).vector,_(p[12],d),b(p[13],i,E)),j.texCoords[0]=0,j.texCoords[1]=c,j.direction[0]=this._distanceAlongCorrection?i[0]:0,j.direction[1]=this._distanceAlongCorrection?i[1]:0,(N=e.vectors.items[2]).vector[0]=0,N.vector[1]=0,N.texCoords[0]=0,N.texCoords[1]=0,N.direction[0]=0,N.direction[1]=0,b((k=e.vectors.items[3]).vector,w,1/T),k.texCoords[0]=0,k.texCoords[1]=f,k.direction[0]=0,k.direction[1]=0,e.vectors.count=4,(U=e.lists[r.ENTRY]).items[0]=0,U.items[1]=2,U.items[2]=3,U.count=3,(q=e.lists[r.EXIT]).items[0]=1,q.items[1]=2,q.items[2]=3,q.count=3,e.lists[r.CAP].count=0,e.capCenter=void 0;else if(L&&!D){var N,k,O;b((z=e.vectors.items[0]).vector,C,1/T),z.texCoords[0]=0,z.texCoords[1]=c,z.direction[0]=0,z.direction[1]=0,(j=e.vectors.items[1]).vector[0]=0,j.vector[1]=0,j.texCoords[0]=0,j.texCoords[1]=0,j.direction[0]=0,j.direction[1]=0,I((N=e.vectors.items[2]).vector,h,b(p[9],t,V)),N.texCoords[0]=0,N.texCoords[1]=f,N.direction[0]=this._distanceAlongCorrection?t[0]:0,N.direction[1]=this._distanceAlongCorrection?t[1]:0,I((k=e.vectors.items[3]).vector,d,b(p[10],_(p[11],i),V)),k.texCoords[0]=0,k.texCoords[1]=f,k.direction[0]=this._distanceAlongCorrection?i[0]:0,k.direction[1]=this._distanceAlongCorrection?i[1]:0,e.vectors.count=4,(U=e.lists[r.ENTRY]).items[0]=0,U.items[1]=1,U.items[2]=2,U.count=3,(q=e.lists[r.EXIT]).items[0]=0,q.items[1]=1,q.items[2]=3,q.count=3,A<o?((O=e.lists[r.CAP]).count=0,e.capCenter=void 0):((O=e.lists[r.CAP]).items[0]=2,O.items[1]=3,O.count=2,e.capCenter=1)}else if(!L&&!D){var z,j,U,q;b((z=e.vectors.items[0]).vector,C,1/T),z.texCoords[0]=0,z.texCoords[1]=c,z.direction[0]=0,z.direction[1]=0,b((j=e.vectors.items[1]).vector,w,1/T),j.texCoords[0]=0,j.texCoords[1]=f,j.direction[0]=0,j.direction[1]=0,e.vectors.count=2,(U=e.lists[r.ENTRY]).items[0]=0,U.items[1]=1,U.count=2,(q=e.lists[r.EXIT]).items[0]=0,q.items[1]=1,q.count=2,e.lists[r.CAP].count=0,e.capCenter=void 0}l<0&&(S(e.lists[r.ENTRY]),S(e.lists[r.EXIT]))},e.prototype.roundJoin=function(e,t,i,n){var o=x(t,i),l=0<o?[a,1]:[1,a],u=l[0],c=l[1],f=0<o?_(p[0],g(p[1],t)):g(p[2],t),h=0<o?_(p[3],g(p[4],i)):g(p[5],i),y=p[6];y[0]=f[0]+h[0],y[1]=f[1]+h[1];var w=m(p[7],y),C=_(p[8],w),M=v(w,f),P=x(w,f),A=Math.abs(P/M),B=1+A*A<s?[A,this._distanceAlongCorrection]:[Math.sqrt(s-1),!0],E=B[0];if(B[1]){(F=e.vectors.items[0]).vector[0]=f[0],F.vector[1]=f[1],F.texCoords[0]=0,F.texCoords[1]=c,F.direction[0]=0,F.direction[1]=0,(V=e.vectors.items[1]).vector[0]=h[0],V.vector[1]=h[1],V.texCoords[0]=0,V.texCoords[1]=c,V.direction[0]=0,V.direction[1]=0,I((L=e.vectors.items[2]).vector,_(p[9],f),b(p[10],_(p[11],t),E)),L.texCoords[0]=0,L.texCoords[1]=u,L.direction[0]=this._distanceAlongCorrection?t[0]:0,L.direction[1]=this._distanceAlongCorrection?t[1]:0,I((R=e.vectors.items[3]).vector,_(p[12],h),b(p[13],i,E)),R.texCoords[0]=0,R.texCoords[1]=u,R.direction[0]=this._distanceAlongCorrection?i[0]:0,R.direction[1]=this._distanceAlongCorrection?i[1]:0;var D=e.vectors.items[4];D.vector[0]=0,D.vector[1]=0,D.texCoords[0]=0,D.texCoords[1]=0,D.direction[0]=0,D.direction[1]=0,e.vectors.count=5,(N=e.lists[r.ENTRY]).items[0]=2,N.items[1]=4,N.items[2]=0,N.count=3,(k=e.lists[r.EXIT]).items[0]=3,k.items[1]=4,k.items[2]=1,k.count=3,e.capCenter=4}else{var F,V,L,R,N,k;(F=e.vectors.items[0]).vector[0]=f[0],F.vector[1]=f[1],F.texCoords[0]=0,F.texCoords[1]=c,F.direction[0]=0,F.direction[1]=0,(V=e.vectors.items[1]).vector[0]=h[0],V.vector[1]=h[1],V.texCoords[0]=0,V.texCoords[1]=c,V.direction[0]=0,V.direction[1]=0,b((L=e.vectors.items[2]).vector,C,1/M),L.texCoords[0]=0,L.texCoords[1]=u,L.direction[0]=0,L.direction[1]=0,(R=e.vectors.items[3]).vector[0]=0,R.vector[1]=0,R.texCoords[0]=0,R.texCoords[1]=0,R.direction[0]=0,R.direction[1]=0,e.vectors.count=4,(N=e.lists[r.ENTRY]).items[0]=2,N.items[1]=3,N.items[2]=0,N.count=3,(k=e.lists[r.EXIT]).items[0]=2,k.items[1]=3,k.items[2]=1,k.count=3,e.capCenter=3}T(d,f,h,n,o<0);var O,z=e.vectors.count,j=e.lists[r.CAP];for(O=j.items[0]=0;O<d.count;++O){var U=d.items[O],q=e.vectors.items[z+O];q.vector[0]=U[0],q.vector[1]=U[1],q.texCoords[0]=0,q.texCoords[1]=c,q.direction[0]=0,q.direction[1]=0,j.items[O+1]=z+O}j.items[d.count+1]=1,j.count=d.count+2,e.vectors.count=z+d.count,o<0&&(S(e.lists[r.ENTRY]),S(e.lists[r.EXIT]))},e.prototype.unitRoundJoin=function(e,t,i,n){var o=x(t,i),s=0<o?[a,1]:[1,a],l=s[0],u=s[1],c=0<o?_(p[0],g(p[1],t)):g(p[2],t),f=0<o?_(p[3],g(p[4],i)):g(p[5],i),h=e.vectors.items[0];h.vector[0]=c[0],h.vector[1]=c[1],h.texCoords[0]=0,h.texCoords[1]=u,h.direction[0]=0,h.direction[1]=0;var v=e.vectors.items[1];v.vector[0]=f[0],v.vector[1]=f[1],v.texCoords[0]=0,v.texCoords[1]=u,v.direction[0]=0,v.direction[1]=0;var y=e.vectors.items[2];_(y.vector,c),y.texCoords[0]=0,y.texCoords[1]=l,y.direction[0]=0,y.direction[1]=0;var m=e.vectors.items[3];_(m.vector,f),m.texCoords[0]=0,m.texCoords[1]=l,m.direction[0]=0,m.direction[1]=0;var b=e.vectors.items[4];b.vector[0]=0,b.vector[1]=0,b.texCoords[0]=0,b.texCoords[1]=0,b.direction[0]=0,b.direction[1]=0,e.vectors.count=5;var I=e.lists[r.ENTRY];I.items[0]=2,I.items[1]=0,I.count=2;var w=e.lists[r.EXIT];w.items[0]=3,w.items[1]=1,w.count=2,e.capCenter=4,T(d,c,f,n,o<0);var C,M=e.vectors.count,P=e.lists[r.CAP];for(C=P.items[0]=0;C<d.count;++C){var A=d.items[C],B=e.vectors.items[M+C];B.vector[0]=A[0],B.vector[1]=A[1],B.texCoords[0]=0,B.texCoords[1]=u,B.direction[0]=0,B.direction[1]=0,P.items[C+1]=M+C}P.items[d.count+1]=1,P.count=d.count+2,e.vectors.count=M+d.count,o<0&&(S(e.lists[r.ENTRY]),S(e.lists[r.EXIT]))},e.prototype.rectJoin=function(e,t,i){var n=g(p[0],t),o=g(p[1],i),s=e.vectors.items[0];s.vector[0]=n[0],s.vector[1]=n[1],s.texCoords[0]=0,s.texCoords[1]=a,s.direction[0]=0,s.direction[1]=0;var l=e.vectors.items[1];l.vector[0]=o[0],l.vector[1]=o[1],l.texCoords[0]=0,l.texCoords[1]=a,l.direction[0]=0,l.direction[1]=0;var u=e.vectors.items[2];_(u.vector,n),u.texCoords[0]=0,u.texCoords[1]=1,u.direction[0]=0,u.direction[1]=0;var c=e.vectors.items[3];_(c.vector,o),c.texCoords[0]=0,c.texCoords[1]=1,c.direction[0]=0,c.direction[1]=0,e.vectors.count=4;var f=e.lists[r.ENTRY];f.items[0]=0,f.items[1]=2,f.count=2;var h=e.lists[r.EXIT];h.items[0]=1,h.items[1]=3,h.count=2,e.capCenter=void 0},e}();t.Tessellator=R}.apply(null,i))||(e.exports=n)},1624:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(e,t){this.layerExtent=4096,this._features=[],this.layer=e,this.zoom=t,this._filter=e.getFeatureFilter()}return e.prototype.pushFeature=function(e){this._filter.filter(e)&&this._features.push(e)},e.prototype.hasFeatures=function(){return this._features.length>0},e.prototype.processFeatures=function(e,t){},e.prototype.assignBufferInfo=function(e){},e}()}.apply(null,i))||(e.exports=n)},1625:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){var e=new Float32Array(4);return e[3]=1,e},t.clone=function(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},t.fromValues=function(e,t,r,i){var n=new Float32Array(4);return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n},t.createView=function(e,t){return new Float32Array(e,t,4)}}.apply(null,i))||(e.exports=n)},1626:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(11),r(2),r(1),r(7),r(0),r(1552),r(269),r(1674)],void 0===(n=function(e,t,r,i,n,o,s,a,l,u){return function(e){function t(t){var r=e.call(this)||this;return r.type="point-cloud-class-breaks",r.field=null,r.legendOptions=null,r.fieldTransformType=null,r.colorClassBreakInfos=null,r}var c;return i(t,e),c=t,t.prototype.clone=function(){return new c(r({},this.cloneProperties(),{field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:o.clone(this.colorClassBreakInfos),legendOptions:o.clone(this.legendOptions)}))},n([s.enumeration.serializable()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],t.prototype,"type",void 0),n([s.property({json:{write:!0},type:String})],t.prototype,"field",void 0),n([s.property({type:l.default,json:{write:!0}})],t.prototype,"legendOptions",void 0),n([s.property({type:a.fieldTransformTypeKebabDict.apiValues,json:{type:a.fieldTransformTypeKebabDict.jsonValues,read:a.fieldTransformTypeKebabDict.read,write:a.fieldTransformTypeKebabDict.write}})],t.prototype,"fieldTransformType",void 0),n([s.property({type:[u.default],json:{write:!0}})],t.prototype,"colorClassBreakInfos",void 0),c=n([s.subclass("esri.renderers.PointCloudClassBreaksRenderer")],t)}(s.declared(a))}.apply(null,i))||(e.exports=n)},1627:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(0),r(1589)],void 0===(n=function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="fixed-size",t.size=0,t.useRealWorldSymbolSizes=null,t}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})},i([n.enumeration.serializable()({pointCloudFixedSizeAlgorithm:"fixed-size"})],t.prototype,"type",void 0),i([n.property({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"size",void 0),i([n.property({type:Boolean,json:{write:!0}})],t.prototype,"useRealWorldSymbolSizes",void 0),o=i([n.subclass("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],t)}(n.declared(o.default));t.PointSizeFixedSizeAlgorithm=s,t.default=s}.apply(null,i))||(e.exports=n)},1628:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(0),r(1589)],void 0===(n=function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="splat",t.scaleFactor=1,t}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o({scaleFactor:this.scaleFactor})},i([n.enumeration.serializable()({pointCloudSplatAlgorithm:"splat"})],t.prototype,"type",void 0),i([n.property({type:Number,value:1,nonNullable:!0,json:{write:!0}})],t.prototype,"scaleFactor",void 0),o=i([n.subclass("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],t)}(n.declared(o.default));t.PointSizeSplatAlgorithm=s,t.default=s}.apply(null,i))||(e.exports=n)},1629:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(11),r(2),r(1),r(7),r(0),r(1552),r(269),r(1675)],void 0===(n=function(e,t,r,i,n,o,s,a,l,u){return function(e){function t(t){var r=e.call(this)||this;return r.type="point-cloud-stretch",r.field=null,r.legendOptions=null,r.fieldTransformType=null,r.stops=null,r}var c;return i(t,e),c=t,t.prototype.clone=function(){return new c(r({},this.cloneProperties(),{field:o.clone(this.field),fieldTransformType:o.clone(this.fieldTransformType),stops:o.clone(this.stops),legendOptions:o.clone(this.legendOptions)}))},n([s.enumeration.serializable()({pointCloudStretchRenderer:"point-cloud-stretch"})],t.prototype,"type",void 0),n([s.property({json:{write:!0},type:String})],t.prototype,"field",void 0),n([s.property({type:l.default,json:{write:!0}})],t.prototype,"legendOptions",void 0),n([s.property({type:a.fieldTransformTypeKebabDict.apiValues,json:{type:a.fieldTransformTypeKebabDict.jsonValues,read:a.fieldTransformTypeKebabDict.read,write:a.fieldTransformTypeKebabDict.write}})],t.prototype,"fieldTransformType",void 0),n([s.property({type:[u.default],json:{write:!0}})],t.prototype,"stops",void 0),c=n([s.subclass("esri.renderers.PointCloudStretchRenderer")],t)}(s.declared(a))}.apply(null,i))||(e.exports=n)},1630:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(11),r(2),r(1),r(7),r(0),r(1552),r(269),r(1676)],void 0===(n=function(e,t,r,i,n,o,s,a,l,u){return function(e){function t(t){var r=e.call(this)||this;return r.type="point-cloud-unique-value",r.field=null,r.fieldTransformType=null,r.colorUniqueValueInfos=null,r.legendOptions=null,r}var c;return i(t,e),c=t,t.prototype.clone=function(){return new c(r({},this.cloneProperties(),{field:o.clone(this.field),fieldTransformType:o.clone(this.fieldTransformType),colorUniqueValueInfos:o.clone(this.colorUniqueValueInfos),legendOptions:o.clone(this.legendOptions)}))},n([s.enumeration.serializable()({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],t.prototype,"type",void 0),n([s.property({json:{write:!0},type:String})],t.prototype,"field",void 0),n([s.property({type:a.fieldTransformTypeKebabDict.apiValues,json:{type:a.fieldTransformTypeKebabDict.jsonValues,read:a.fieldTransformTypeKebabDict.read,write:a.fieldTransformTypeKebabDict.write}})],t.prototype,"fieldTransformType",void 0),n([s.property({type:[u.default],json:{write:!0}})],t.prototype,"colorUniqueValueInfos",void 0),n([s.property({type:l.default,json:{write:!0}})],t.prototype,"legendOptions",void 0),c=n([s.subclass("esri.renderers.PointCloudUniqueValueRenderer")],t)}(s.declared(a))}.apply(null,i))||(e.exports=n)},1631:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){function r(e,t,r,i,n,s,a,l,u,c,f){return function(e,t,r){for(var i=x(e.maxVert[0],e.minVert[0]),n=0,o=1;o<7;++o){var s=x(e.maxVert[o],e.minVert[o]);s>i&&(i=s,n=o)}v(t,e.minVert[n]),v(r,e.maxVert[n])}(e,i,n),x(i,n)<b?1:(p(a,i,n),m(a,a),function(e,t,r,i){for(var n=e.data,o=e.offsetIdx,s=e.strideIdx,a=Number.NEGATIVE_INFINITY,l=0,u=o;u<n.length;u+=s){D[0]=n[u]-t[0],D[1]=n[u+1]-t[1],D[2]=n[u+2]-t[2];var c=r[0]*D[0]+r[1]*D[1]+r[2]*D[2],f=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],h=D[0]*D[0]+D[1]*D[1]+D[2]*D[2],p=h-c*c/f;p>a&&(a=p,l=u)}return v(i,n,l),a}(t,i,a,s)<b?2:(p(l,n,s),m(l,l),p(u,s,i),m(u,u),y(r,l,a),m(r,r),o(t,r,a,l,u,c),0))}function i(e,t,r,i,s,a,l,u,c,f){n(e,t,r,i,s,C,T),void 0!==C[0]&&(p(S,C,r),m(S,S),p(M,C,i),m(M,M),p(P,C,s),m(P,P),y(A,M,a),m(A,A),y(B,P,l),m(B,B),y(E,S,u),m(E,E),o(e,A,a,M,S,c),o(e,B,l,P,M,c),o(e,E,u,S,P,c)),void 0!==T[0]&&(p(S,T,r),m(S,S),p(M,T,i),m(M,M),p(P,T,s),m(P,P),y(A,M,a),m(A,A),y(B,P,l),m(B,B),y(E,S,u),m(E,E),o(e,A,a,M,S,c),o(e,B,l,P,M,c),o(e,E,u,S,P,c))}function n(e,t,r,i,n,o,s){!function(e,t,r,i,n){var o=e.data,s=e.offsetIdx,a=e.strideIdx;v(i,o,s),v(n,i),r[0]=_(z,t),r[1]=r[0];for(var l=s+a;l<o.length;l+=a){var u=o[l]*t[0]+o[l+1]*t[1]+o[l+2]*t[2];u<r[0]&&(r[0]=u,v(i,o,l)),u>r[1]&&(r[1]=u,v(n,o,l))}}(e,t,F,s,o);var a=_(r,t);F[1]-b<=a&&(o[0]=void 0),F[0]+b>=a&&(s[0]=void 0)}function o(e,t,r,i,n,o){if(!(g(t)<b)){y(V,r,t),y(L,i,t),y(R,n,t),s(e,t,F),k[1]=F[0],N[1]=F[1],O[1]=N[1]-k[1];for(var a=[r,i,n],l=[V,L,R],u=0;u<3;++u){s(e,a[u],F),k[0]=F[0],N[0]=F[1],s(e,l[u],F),k[2]=F[0],N[2]=F[1],O[0]=N[0]-k[0],O[2]=N[2]-k[2];var c=f(O);c<o.quality&&(v(o.b0,a[u]),v(o.b1,t),v(o.b2,l[u]),o.quality=c)}}}function s(e,t,r){var i=e.data,n=e.offsetIdx,o=e.strideIdx;r[0]=Number.POSITIVE_INFINITY,r[1]=Number.NEGATIVE_INFINITY;for(var s=n;s<i.length;s+=o){var a=i[s]*t[0]+i[s+1]*t[1]+i[s+2]*t[2];r[0]=Math.min(r[0],a),r[1]=Math.max(r[1],a)}}function a(e,t,r){v(r.center,e),d(r.halfSize,t,.5),r.quaternion[0]=0,r.quaternion[1]=0,r.quaternion[2]=0,r.quaternion[3]=1}function l(e,t,r){v(j,t),Math.abs(t[0])>Math.abs(t[1])&&Math.abs(t[0])>Math.abs(t[2])?j[0]=0:Math.abs(t[1])>Math.abs(t[2])?j[1]=0:j[2]=0,g(j)<b&&(j[0]=j[1]=j[2]=1),y(U,t,j),m(U,U),y(q,t,U),m(q,q),u(e,t,U,q,G,Y),p(X,Y,G),c(t,U,q,G,Y,X,r)}function u(e,t,r,i,n,o){s(e,t,F),n[0]=F[0],o[0]=F[1],s(e,r,F),n[1]=F[0],o[1]=F[1],s(e,i,F),n[2]=F[0],o[2]=F[1]}function c(e,t,r,i,n,o,s){J[0]=e[0],J[1]=e[1],J[2]=e[2],J[3]=t[0],J[4]=t[1],J[5]=t[2],J[6]=r[0],J[7]=r[1],J[8]=r[2],function(e,t){var r=t[0]+t[4]+t[8];if(r>0){var i=Math.sqrt(r+1);e[3]=.5*i,i=.5/i,e[0]=(t[5]-t[7])*i,e[1]=(t[6]-t[2])*i,e[2]=(t[1]-t[3])*i}else{var n=0;t[4]>t[0]&&(n=1),t[8]>t[3*n+n]&&(n=2);var o=(n+1)%3,s=(n+2)%3,i=Math.sqrt(t[3*n+n]-t[3*o+o]-t[3*s+s]+1);e[n]=.5*i,i=.5/i,e[3]=(t[3*o+s]-t[3*s+o])*i,e[o]=(t[3*o+n]+t[3*n+o])*i,e[s]=(t[3*s+n]+t[3*n+s])*i}}(s.quaternion,J),h(W,i,n),d(W,W,.5),d(s.center,e,W[0]),d(Z,t,W[1]),h(s.center,s.center,Z),d(Z,r,W[2]),h(s.center,s.center,Z),d(s.halfSize,o,.5)}function f(e){return e[0]*e[1]+e[0]*e[2]+e[1]*e[2]}function h(e,t,r){e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2]}function p(e,t,r){e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2]}function d(e,t,r){e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r}function v(e,t,r){void 0===r&&(r=0),e[0]=t[r+0],e[1]=t[r+1],e[2]=t[r+2]}function y(e,t,r){var i=t[0],n=t[1],o=t[2],s=r[0],a=r[1],l=r[2];e[0]=n*l-o*a,e[1]=o*s-i*l,e[2]=i*a-n*s}function m(e,t){var r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(r>0){var i=1/Math.sqrt(r);e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i}}function g(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}function x(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return r*r+i*i+n*n}function _(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}Object.defineProperty(t,"__esModule",{value:!0});var b=1e-6,I=[0,0,0],w=[0,0,0];t.computeOBB=function(e,t){var n=e.data,o=e.strideIdx,s=n.length/o;if(!(s<=0)){var v=new K(e);h(I,v.minProj,v.maxProj),d(I,I,.5),p(w,v.maxProj,v.minProj);var y=f(w),m=new Q;m.quality=y,s<14&&(e={data:new Float64Array(v.buffer,112,42),size:3,offsetIdx:0,strideIdx:3});var g=[0,0,0],x=[0,0,0],_=[0,0,0],b=[0,0,0],C=[0,0,0],T=[0,0,0],S=[0,0,0];switch(r(v,e,S,g,x,_,b,C,T,m)){case 1:return void a(I,w,t);case 2:return void l(e,b,t)}i(e,S,g,x,_,b,C,T,m),u(e,m.b0,m.b1,m.b2,G,Y);var M=[0,0,0];p(M,Y,G),m.quality=f(M),m.quality<y?c(m.b0,m.b1,m.b2,G,Y,M,t):a(I,w,t)}};var C=[0,0,0],T=[0,0,0],S=[0,0,0],M=[0,0,0],P=[0,0,0],A=[0,0,0],B=[0,0,0],E=[0,0,0],D=[0,0,0],F=[0,0],V=[0,0,0],L=[0,0,0],R=[0,0,0],N=[0,0,0],k=[0,0,0],O=[0,0,0],z=[0,0,0],j=[0,0,0],U=[0,0,0],q=[0,0,0],G=[0,0,0],Y=[0,0,0],X=[0,0,0],Z=[0,0,0],J=[1,0,0,0,1,0,0,0,1],W=[0,0,0],H=7,K=function(){return function(e){this.minVert=new Array(H),this.maxVert=new Array(H);var t=64*H;this.buffer=new ArrayBuffer(t);var r=0;this.minProj=new Float64Array(this.buffer,r,H),r+=8*H,this.maxProj=new Float64Array(this.buffer,r,H),r+=8*H;for(var i=0;i<H;++i)this.minVert[i]=new Float64Array(this.buffer,r,3),r+=24;for(i=0;i<H;++i)this.maxVert[i]=new Float64Array(this.buffer,r,3),r+=24;for(i=0;i<H;++i)this.minProj[i]=Number.POSITIVE_INFINITY,this.maxProj[i]=Number.NEGATIVE_INFINITY;var n=new Array(H),o=new Array(H),s=e.data,a=e.offsetIdx,l=e.strideIdx;for(i=a;i<s.length;i+=l){var u=s[i];u<this.minProj[0]&&(this.minProj[0]=u,n[0]=i),u>this.maxProj[0]&&(this.maxProj[0]=u,o[0]=i),(u=s[i+1])<this.minProj[1]&&(this.minProj[1]=u,n[1]=i),u>this.maxProj[1]&&(this.maxProj[1]=u,o[1]=i),(u=s[i+2])<this.minProj[2]&&(this.minProj[2]=u,n[2]=i),u>this.maxProj[2]&&(this.maxProj[2]=u,o[2]=i),(u=s[i]+s[i+1]+s[i+2])<this.minProj[3]&&(this.minProj[3]=u,n[3]=i),u>this.maxProj[3]&&(this.maxProj[3]=u,o[3]=i),(u=s[i]+s[i+1]-s[i+2])<this.minProj[4]&&(this.minProj[4]=u,n[4]=i),u>this.maxProj[4]&&(this.maxProj[4]=u,o[4]=i),(u=s[i]-s[i+1]+s[i+2])<this.minProj[5]&&(this.minProj[5]=u,n[5]=i),u>this.maxProj[5]&&(this.maxProj[5]=u,o[5]=i),(u=s[i]-s[i+1]-s[i+2])<this.minProj[6]&&(this.minProj[6]=u,n[6]=i),u>this.maxProj[6]&&(this.maxProj[6]=u,o[6]=i)}for(i=0;i<H;++i){var c=n[i];v(this.minVert[i],s,c),c=o[i],v(this.maxVert[i],s,c)}}}(),Q=function(){return function(){this.b0=[1,0,0],this.b1=[0,1,0],this.b2=[0,0,1],this.quality=0}}()}.apply(null,i))||(e.exports=n)},1632:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(11),r(19),r(7)],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0});var o={type:"esriSMS",style:"esriSMSCircle",size:6,color:[252,146,31,255],outline:{width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:1,color:[252,146,31,255]},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{width:.75,color:[255,255,255,191]}};t.createDrawingInfo=function(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?o:"esriGeometryPolyline"===e?s:a}}},t.createDefaultAttributesFunction=function(e,t){if(i("csp-restrictions"))return function(){var i;return r(((i={})[t]=null,i),e)};try{var n="this."+t+" = null;";for(var o in e)n+="this."+o+" = "+JSON.stringify(e[o])+";";var s=new Function(n);return function(){return new s}}catch(i){return function(){var i;return r(((i={})[t]=null,i),e)}}},t.createDefaultTemplate=function(e){return void 0===e&&(e={}),[{name:"New Feature",description:"",prototype:{attributes:n.clone(e)}}]}}.apply(null,i))||(e.exports=n)},1648:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(e){this._array=[],e<=0&&console.error("strideInBytes must be positive!"),this._stride=e}return Object.defineProperty(e.prototype,"array",{get:function(){return this._array},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.array.length=0},e.prototype.toBuffer=function(){return new Uint32Array(this._array).buffer},e.i1616to32=function(e,t){return 65535&e|t<<16},e.i8888to32=function(e,t,r,i){return 255&e|(255&t)<<8|(255&r)<<16|i<<24},e.i8816to32=function(e,t,r){return 255&e|(255&t)<<8|r<<16},e}()}.apply(null,i))||(e.exports=n)},1649:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(11),r(22),r(25),r(13),r(9)],void 0===(n=function(e,t,i,n,o,s,a){function l(e){switch(e){case"on-demand":return a.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(5),r.e(44)]).then(function(){var t=[r(1790)];e.apply(null,t)}.bind(this)).catch(r.oe)});case"memory":return a.create(function(e){return Promise.all([r.e(0),r.e(4),r.e(48)]).then(function(){var t=[r(1791)];e.apply(null,t)}.bind(this)).catch(r.oe)});case"stream":return a.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(5),r.e(52)]).then(function(){var t=[r(1792)];e.apply(null,t)}.bind(this)).catch(r.oe)});default:return a.reject(new s("mapview-controller:bad-type","Unable to create controller for unknown type: "+e))}}Object.defineProperty(t,"__esModule",{value:!0}),t.getControllerConfiguration=function(e,t){var r=e.source,i=t&&t.toJSON();if("stream"===e.type){var n={type:"stream",purgeOptions:e.purgeOptions,filter:i,serviceFilter:function(e){if(!e)return null;var t={};return e.geometry&&(t.geometry=e.geometry.toJSON()),e.where&&(t.where=e.where),t}(e.filter),processing:null};return a.resolve(n)}if(!e.capabilities.operations.supportsQuery)return a.reject(new s("graphicscontroller:query-capability-required","Service requires query capabilities to be used as a feature layer",{layer:e}));if(function(e){return e&&"openPorts"in e}(r)){var o={type:"memory",filter:i,processing:"processing"in e&&e.processing&&e.processing.toWorker()||null};return a.resolve(o)}var l={type:"on-demand",gdbVersion:"gdbVersion"in e?e.gdbVersion:null,historicMoment:"historicMoment"in e&&e.historicMoment?e.historicMoment.getTime():null,processing:"processing"in e&&e.processing?e.processing.toWorker():null,filter:i};return a.resolve(l)},t.createController=function(e,t){return o(this,void 0,void 0,function(){var r,o,s,a,u;return n(this,function(n){switch(n.label){case 0:return[4,l(e.type)];case 1:return r=n.sent().default,o=t.serviceAndViewInfo,s=t.remoteClient,a=t.tileStore,[4,(u=new r(i({},o,{configuration:e,tileStore:a,remoteClient:s}))).setFilter({index:0,filter:e.filter})];case 2:return n.sent(),[2,u]}})})}}.apply(null,i))||(e.exports=n)},1650:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1626),r(1629),r(1630),r(1530)],void 0===(n=function(e,t,r,i,n,o){function s(e){for(var t=0,r=0,i=e||[];r<i.length;r++)t|=1<<i[r];return t}function a(e,t){for(var r=0,i=e;r<i.length;r++){var n=i[r];if(n.name===t&&null!=n.attributeValues&&"UInt8"===n.attributeValues.valueType&&3===n.attributeValues.valuesPerElement)return{storageInfo:n,useElevation:!1}}return null}function l(e,t){for(var r=0,i=e;r<i.length;r++){var n=i[r];if(n.name===t){var o="embedded-elevation"===n.encoding;return{storageInfo:o?null:n,useElevation:o}}}return"elevation"===t.toLowerCase()?{storageInfo:null,useElevation:!0}:null}function u(e,t,r,i){if(e&&e.useElevation){for(var n=new Float64Array(i),s=0;s<i;s++)n[s]=r[3*s+2];return n}return e&&t?o.readBinaryAttribute(e.storageInfo,t,i):null}function c(e){return null==e||"none"===e?null:"low-four-bit"===e?function(e){return 15&e}:"high-four-bit"===e?function(e){return(240&e)>>4}:"absolute-value"===e?function(e){return Math.abs(e)}:"modulo-ten"===e?function(e){return e%10}:null}Object.defineProperty(t,"__esModule",{value:!0}),t.getRendererInfo=function(e){var t=e.renderer,r=t&&t.type,i=t&&e.renderer.toJSON()||null,n=null,o=!1;"point-cloud-unique-value"===r?n=l(e.attributeStorageInfo,t.field):"point-cloud-stretch"===r?n=l(e.attributeStorageInfo,t.field):"point-cloud-class-breaks"===r?n=l(e.attributeStorageInfo,t.field):o="point-cloud-rgb"===r?null!=(n=a(e.attributeStorageInfo,t.field)):null!=(n=a(e.attributeStorageInfo,"RGB"));var s=null;return t&&t.colorModulation&&(s=l(e.attributeStorageInfo,t.colorModulation.field)),{rendererJSON:i,isRGBRenderer:o,primaryAttribute:n,modulationAttribute:s}},t.getFilterInfo=function(e){var t=e.filters;return t?t.map(function(t){return{filterJSON:t.toJSON(),attributeInfo:l(e.attributeStorageInfo,t.field)}}):[]},t.evaluateRenderer=function(e,t,o,s,a){var l=e.rendererJSON,f=e.isRGBRenderer,h=e.primaryAttribute,p=e.modulationAttribute,d=u(h,t,s,a),v=u(p,o,s,a),y=null,m=null;if(d&&f)y=d;else if(d&&"pointCloudUniqueValueRenderer"===l.type){var g=(m=n.fromJSON(l)).colorUniqueValueInfos;y=new Uint8Array(3*a);for(var x=c(m.fieldTransformType),_=0;_<a;_++)for(var b=(C=x?x(d[_]):d[_])+"",I=0;I<g.length;I++)if(g[I].values.indexOf(b)>=0){y[3*_]=g[I].color.r,y[3*_+1]=g[I].color.g,y[3*_+2]=g[I].color.b;break}}else if(d&&"pointCloudStretchRenderer"===l.type){var w=(m=i.fromJSON(l)).stops;for(y=new Uint8Array(3*a),x=c(m.fieldTransformType),_=0;_<a;_++){var C=x?x(d[_]):d[_],T=w.length-1;if(C<w[0].value)y[3*_]=w[0].color.r,y[3*_+1]=w[0].color.g,y[3*_+2]=w[0].color.b;else if(C>=w[T].value)y[3*_]=w[T].color.r,y[3*_+1]=w[T].color.g,y[3*_+2]=w[T].color.b;else for(I=1;I<w.length;I++)if(C<w[I].value){var S=(C-w[I-1].value)/(w[I].value-w[I-1].value);y[3*_]=w[I].color.r*S+w[I-1].color.r*(1-S),y[3*_+1]=w[I].color.g*S+w[I-1].color.g*(1-S),y[3*_+2]=w[I].color.b*S+w[I-1].color.b*(1-S);break}}}else if(d&&"pointCloudClassBreaksRenderer"===l.type){var M=(m=r.fromJSON(l)).colorClassBreakInfos;for(y=new Uint8Array(3*a),x=c(m.fieldTransformType),_=0;_<a;_++)for(C=x?x(d[_]):d[_],I=0;I<M.length;I++)if(C>=M[I].minValue&&C<=M[I].maxValue){y[3*_]=M[I].color.r,y[3*_+1]=M[I].color.g,y[3*_+2]=M[I].color.b;break}}else for(y=new Uint8Array(3*a),_=0;_<y.length;_++)y[_]=255;if(v&&m&&m.colorModulation){var P=m.colorModulation.minValue,A=m.colorModulation.maxValue;for(_=0;_<a;_++){var B=(C=v[_])>=A?1:C<=P?.3:.3+.7*(C-P)/(A-P);y[3*_]=B*y[3*_],y[3*_+1]=B*y[3*_+1],y[3*_+2]=B*y[3*_+2]}}return y},t.filterInPlace=function(e,t,r,i){for(var n=e.length/3,o=i.map(function(t,i){return u(r[i].attributeInfo,t,e,n)}),a=0,l=0;l<n;l++){for(var c=!0,f=0;f<r.length&&c;f++){var h=r[f].filterJSON,p=o[f][l];switch(h.type){case"pointCloudValueFilter":var d="exclude"===h.mode;-1!==h.values.indexOf(p)===d&&(c=!1);break;case"pointCloudBitfieldFilter":var v=s(h.requiredSetBits),y=s(h.requiredClearBits);(p&v)===v&&0==(p&y)||(c=!1);break;case"pointCloudReturnFilter":for(var m=15&p,g=p>>>4&15,x=g>1,_=1===m,b=m===g,I=!1,w=0,C=h.includedReturns;w<C.length;w++){var T=C[w];if("last"===T&&b||"firstOfMany"===T&&_&&x||"lastOfMany"===T&&b&&x||"single"===T&&!x){I=!0;break}}I||(c=!1)}}c&&(e[3*a]=e[3*l],e[3*a+1]=e[3*l+1],e[3*a+2]=e[3*l+2],t[3*a]=t[3*l],t[3*a+1]=t[3*l+1],t[3*a+2]=t[3*l+2],a++)}return a},t.getSplatSizeAlgorithm=function(e){var t=e&&e.pointSizeAlgorithm;return t&&"splat"===t.type?t:null},t.getFixedSizeAlgorithm=function(e){var t=e&&e.pointSizeAlgorithm;return t&&"fixed-size"===t.type?t:null},t.rendererUsesFixedSizes=function(e){var t=e&&e.pointSizeAlgorithm;return!(!t||!t.type)&&"fixed-size"===t.type}}.apply(null,i))||(e.exports=n)},1651:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(9),r(212),r(4),r(262),r(45),r(374),r(1530),r(50),r(16)],void 0===(n=function(e,t,i,n,o,s,a,l,u,c,f){function h(e,t,r,i,n,o,s){switch(r){case 1:for(var a=0;a<s;a++)i[n]=e[t],t+=1,n+=o;break;case 2:for(a=0;a<s;a++)i[n]=e[t],i[n+1]=e[t+1],t+=2,n+=o;break;case 3:for(a=0;a<s;a++)i[n]=e[t],i[n+1]=e[t+1],i[n+2]=e[t+2],t+=3,n+=o;break;case 4:for(a=0;a<s;a++)i[n]=e[t],i[n+1]=e[t+1],i[n+2]=e[t+2],i[n+3]=e[t+3],t+=4,n+=o;break;default:throw g("Unhandled stride size "+r)}}function p(e,t,r,i,n,o){switch(t){case 1:for(var s=0;s<o;s++)r[i]=e,i+=n;break;case 2:for(s=0;s<o;s++)r[i]=e,r[i+1]=e,i+=n;break;case 3:for(s=0;s<o;s++)r[i]=e,r[i+1]=e,r[i+2]=e,i+=n;break;case 4:for(s=0;s<o;s++)r[i]=e,r[i+1]=e,r[i+2]=e,r[i+3]=e,i+=n;break;default:throw g("Unhandled stride size "+t)}}function d(e){switch(e){case 5120:return Int8Array;case 5126:return Float32Array;case 5124:return Int32Array;case 5122:return Int16Array;case 5121:return Uint8Array;case 5125:return Uint32Array;case 5123:return Uint16Array}throw new Error("Unhandled data type: "+e)}function v(e){switch(e){case 5120:return"Int8";case 5126:return"Float32";case 5124:return"Int32";case 5122:return"Int16";case 5121:return"UInt8";case 5125:return"UInt32";case 5123:return"UInt16"}throw new Error("Unhandled data type: "+e)}function y(e){return e%Uint32Array.BYTES_PER_ELEMENT==0}function m(e){return e>0&&e%Uint32Array.BYTES_PER_ELEMENT==0}function g(e){return new Error("I3SGeometryUtil processing failed: "+e)}function x(e){var t=e.normals,r=e.positions,i=e.normalInd,a=e.positionInd;f.assert(e.normalInd.length===e.positionInd.length);for(var l=s.vec3f32.create(),u=s.vec3f32.create(),c=n.vec2f32.create(),h=r.data,p=r.offsetIdx,d=r.strideIdx,v=t.data,y=t.offsetIdx,m=t.strideIdx,g=0;g<a.length;g+=3){var x=a[g],_=p+d*x,b=h[_],I=h[_+1],w=h[_+2];_=p+d*(x=a[g+1]),l[0]=h[_]-b,l[1]=h[_+1]-I,l[2]=h[_+2]-w,_=p+d*(x=a[g+2]),u[0]=h[_]-b,u[1]=h[_+1]-I,u[2]=h[_+2]-w,o.vec3.cross(l,l,u),f.encodeNormal(l,c);for(var C=0;C<3;C++){var T=y+m*i[g+C];v[T]=f.encodeInt16(c[0]),v[T+1]=f.encodeInt16(c[1])}}}function _(e,t){switch(t){case 0:switch(e.type){case"intersects":case"contains":case"crosses":case"envelope-intersects":case"overlaps":case"touches":case"within":return 1;case"disjoint":return 0}break;case 2:switch(e.type){case"intersects":case"contains":case"envelope-intersects":case"within":return 0;case"disjoint":case"crosses":case"overlaps":case"touches":return 1}break;case 1:switch(e.type){case"envelope-intersects":return 0}}return 2}function b(e,t){return w.contains(e.mask,t)?2:w.intersects(e.mask,t)?1:0}Object.defineProperty(t,"__esModule",{value:!0});var I=new Uint8Array(64);t.interleaveGeometryBuffer=function(e,t,r,i,n){void 0===i&&(i=[]),void 0===n&&(n=[]);var o=e.params.vertexAttributes,s=o.position.count;if(!m(r[0].stride))throw g("Layout stride must use "+Uint32Array.BYTES_PER_ELEMENT+"-byte words");for(var a=r[0].stride/Uint32Array.BYTES_PER_ELEMENT,l=new Uint32Array(a*s),u=0,c=r=r.slice(0).sort(function(e,t){return e.offset-t.offset});u<c.length;u++)!function(e){if(-1!==n.indexOf(e.name))return"continue";var r=o[e.name],a=d(e.type),u=void 0,c=!1;if(null==r){var f=i.filter(function(t){return t.name===e.name})[0];if(!f)throw g("Geometry definition is missing attribute");r={valueType:v(e.type),byteOffset:0,count:s,valuesPerElement:e.count};for(var x=0;x<I.length;x++)I[x]=f.byteValue;u=I.buffer,c=!0}else u=t;if(v(e.type)!==r.valueType)throw g("Geometry definition type must match attribute type");if(!y(r.byteOffset)||!y(e.offset))throw g(e.name+" offset must use "+Uint32Array.BYTES_PER_ELEMENT+"-byte words");if(!m(r.valuesPerElement*a.BYTES_PER_ELEMENT)||!m(e.count*a.BYTES_PER_ELEMENT))throw g(e.name+" data must use "+Uint32Array.BYTES_PER_ELEMENT+"-byte words");var _=new Uint32Array(u),b=r.byteOffset/Uint32Array.BYTES_PER_ELEMENT,w=r.valuesPerElement*a.BYTES_PER_ELEMENT/Uint32Array.BYTES_PER_ELEMENT,C=e.offset/Uint32Array.BYTES_PER_ELEMENT,T=e.stride/Uint32Array.BYTES_PER_ELEMENT;c?p(_[0],w,l,C,T,s):h(_,b,w,l,C,T,s)}(c[u]);return l.buffer},t.processAndInterleaveNormals=function(e,t,r,i,n){if("none"===e)x(n);else{var o=u.createTypedView(r,t.params.vertexAttributes.normal),s="earth-centered"===e?i:null;!function(e,t,r){var i=e.length/3,n=t.data,o=t.offsetIdx,s=t.strideIdx;if(null!=r)for(var a=r,l=a[0],u=a[1],c=a[2],h=a[4],p=a[5],d=a[6],v=a[8],y=a[9],m=a[10],g=0;g<i;g++){var x=e[3*g],_=e[3*g+1],b=e[3*g+2];M[0]=l*x+u*_+c*b,M[1]=h*x+p*_+d*b,M[2]=v*x+y*_+m*b,f.encodeNormal(M,P),n[o+g*s]=f.encodeInt16(P[0]),n[o+g*s+1]=f.encodeInt16(P[1])}else for(var g=0;g<i;g++)M[0]=e[3*g],M[1]=e[3*g+1],M[2]=e[3*g+2],f.encodeNormal(M,P),n[o+g*s]=f.encodeInt16(P[0]),n[o+g*s+1]=f.encodeInt16(P[1])}(o,n.normals,s)}};var w,C=65536;t.extractPositionData=function(e,t,r){var i=t[0];if(null==i||"position"!==i.name||5126!==i.type)return null;for(var n=new Float32Array(e),o=i.stride/4,s=i.offset/4,a=3*n.length/o,u=new Float32Array(a),c=0;c<a/3;c++)u[3*c]=n[c*o+s],u[3*c+1]=n[c*o+s+1],u[3*c+2]=n[c*o+s+2];var f=l.default(u.buffer,3,r);return f.uniqueCount<C?{data:new Float32Array(f.buffer),indices:new Uint16Array(f.indices)}:{data:new Float32Array(f.buffer),indices:f.indices}},t.loadGeometryEngine=function(){return null!=w?i.resolve():i.create(function(e,t){return Promise.resolve().then(function(){var t=[r(176)];e.apply(null,t)}.bind(this)).catch(r.oe)}).then(function(e){return w=e})},t.acquireMaskFilterContext=function(e,t,r,i){var n=r.spatialReference||t.spatialReference,o=t.renderSpatialReference,s={rings:[[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]]],hasZ:!1,hasM:!1,type:"polygon",spatialReference:n};s.rings[0][4]=s.rings[0][0];var a=i.objectTransformation,l=i.getGeometryRecords()[0].geometry,u={rings:[[[0,0,0],[0,0,0],[0,0,0],[0,0,0]]],hasZ:!1,hasM:!1,type:"polygon",spatialReference:n};u.rings[0][3]=u.rings[0][0];var c=w[e];return c||(console.error("Spatial relationship",e,"not supported"),c=function(){return!0}),{type:e,mask:r,maskSR:n,renderSR:o,aabb:s,transform:a,geometry:l,triangle:u,testFunction:c}},t.getIntersectRelation=_,t.intersectMaskWithMbs=function(e,t){var r={x:t[0],y:t[1],hasZ:!1,hasM:!1,type:"point",spatialReference:e.maskSR};return b(e,w.buffer(r,t[3],1,!0))};var T=Math.pow(2,-32);t.filterMask=function(e,t){var r=t.type,i=t.mask,n=t.transform,s=t.renderSR,a=t.maskSR,l=t.geometry,u=t.triangle,h=t.testFunction,p=t.aabb;l.getComponentAABB(e,S);var d=[p.rings[0][0],p.rings[0][1],p.rings[0][2],p.rings[0][3]];o.vec3.set(d[0],S[0],S[1],0),o.vec3.set(d[1],S[0],S[4],0),o.vec3.set(d[2],S[3],S[4],0),o.vec3.set(d[3],S[3],S[1],0);for(var v=0;v<4;++v)o.vec3.transformMat4(d[v],d[v],n),c.vectorToVector(d[v],s,d[v],a);switch(delete p._geVersion,_(t,b(t,p))){case 1:return!1;case 0:return!0}var y,m=u.rings[0][0],g=u.rings[0][1],x=u.rings[0][2],I=l.data.getIndices(f.VertexAttrConstants.POSITION),w=l.data.componentOffsets,C=l.data.getAttribute(f.VertexAttrConstants.POSITION),M=C.data,P=C.offsetIdx,A=C.strideIdx,B=w.length?w[e]:0,E=w.length?w[e+1]:I.length;switch(r){case"intersects":case"crosses":case"envelope-intersects":case"index-intersects":case"overlaps":case"touches":y=function(){return h(i,u)?0:2};break;case"contains":case"disjoint":case"within":default:y=function(){return h(i,u)?2:1}}for(v=B;v<E;v+=3){var D=P+A*I[v+0],F=P+A*I[v+1],V=P+A*I[v+2];o.vec3.set(m,M[D+0],M[D+1],M[D+2]),o.vec3.set(g,M[F+0],M[F+1],M[F+2]),o.vec3.set(x,M[V+0],M[V+1],M[V+2]),o.vec3.transformMat4(m,m,n),o.vec3.transformMat4(g,g,n),o.vec3.transformMat4(x,x,n),c.vectorToVector(m,s,m,a),c.vectorToVector(g,s,g,a),c.vectorToVector(x,s,x,a);var L=g[0]-m[0],R=g[1]-m[1],N=x[0]-m[0],k=x[1]-m[1];if(!(Math.abs(L*k-R*N)<T))switch(delete u._geVersion,y()){case 1:return!1;case 0:return!0}}switch(r){case"intersects":case"crosses":case"envelope-intersects":case"index-intersects":case"overlaps":case"touches":return!1;case"contains":case"disjoint":case"within":default:return!0}};var S=a.create(),M=s.vec3f32.create(),P=n.vec2f32.create()}.apply(null,i))||(e.exports=n)},1652:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(15),r(4),r(3),r(49),r(50),r(276)],void 0===(n=function(e,t,r,i,n,o,s,a){function l(e,t,r){var i,s,a,l=n.vec3f64.create(),u=e[3],c=Math.ceil(Math.log(u)*Math.LOG2E/p),f=Math.pow(2,c*p+h);if(r.isGeographic){var d=f/o.earthRadius*180/Math.PI;s=Math.round(e[1]/d);var v=Math.max(-90,Math.min(90,s*d)),y=d/Math.cos((Math.abs(v)-d/2)/180*Math.PI),m=(i=Math.round(e[0]/y))*y;l[0]=m,l[1]=v}else i=Math.round(e[0]/f),s=Math.round(e[1]/f),l[0]=i*f,l[1]=s*f;var g=e[2]+t;return a=Math.round(g/f),l[2]=a*f,{center:l,id:c+"_"+i+"_"+s+"_"+a}}Object.defineProperty(t,"__esModule",{value:!0});var u=1e3,c=new Float64Array(3*u),f=n.vec3f64.create();t.computeGlobalTransformation=function(e,t,i,n){var o=l(e,t,i).center,a=r.mat4f64.create();return s.computeLinearTransformation(i,o,a,n),a},t.reprojectPoints=function(e,t,r,n,o,a,l){var h=e.data,p=e.offsetIdx,d=e.strideIdx;i.vec3.copy(f,t),f[2]+=n;var v=[0,0,0],y=h.length/d;s.vectorToVector(f,o,v,a);for(var m=0;m<y;m+=u){for(var g=Math.min(u,y-m),x=0;x<g;x++){var _=p+d*(m+x);c[3*x+0]=h[_+0]+v[0],c[3*x+1]=h[_+1]+v[1],c[3*x+2]=h[_+2]+v[2]}for(s.bufferToBuffer(c,a,0,c,l,0,g),x=0;x<g;x++){var b=c[3*x+0],I=c[3*x+1],w=c[3*x+2],C=p+d*(m+x);h[C+0]=r[0]*b+r[4]*I+r[8]*w+r[12],h[C+1]=r[1]*b+r[5]*I+r[9]*w+r[13],h[C+2]=r[2]*b+r[6]*I+r[10]*w+r[14]}}},t.createOrigin=function(e,t,r,i){var n=l(e,t,r),o=n.center,u=n.id;return s.vectorToVector(o,r,o,i),a.fromVector(o,u)};var h=1,p=5-h}.apply(null,i))||(e.exports=n)},1670:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.NO_DATA=1]="NO_DATA",e[e.READY=2]="READY",e[e.MODIFIED=3]="MODIFIED",e[e.INVALID=4]="INVALID"}(t.TileStatus||(t.TileStatus={}))}.apply(null,i))||(e.exports=n)},1671:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(8),r(0)],void 0===(n=function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.field=null,t.minValue=0,t.maxValue=255,t}var n;return r(t,e),n=t,t.prototype.clone=function(){return new n({field:this.field,minValue:this.minValue,maxValue:this.maxValue})},i([o.property({type:String,json:{write:!0}})],t.prototype,"field",void 0),i([o.property({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minValue",void 0),i([o.property({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxValue",void 0),n=i([o.subclass("esri.renderers.support.pointCloud.ColorModulation")],t)}(o.declared(n));t.ColorModulation=s,t.default=s}.apply(null,i))||(e.exports=n)},1672:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(131),r(1627),r(1628)],void 0===(n=function(e,t,r,i,n){function o(e){return e&&s[e.type]||null}Object.defineProperty(t,"__esModule",{value:!0});var s={pointCloudFixedSizeAlgorithm:i.default,pointCloudSplatAlgorithm:n.default};t.read=function(e,t,i){var n=o(e);if(n){var s=new n;return s.read(e,i),s}return i&&i.messages&&e&&i.messages.push(new r("pointsizealgorithm:unsupported","Point size algorithms of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:i})),null},t.fromJSON=function(e){var t=o(e);return t?t.fromJSON(e):null}}.apply(null,i))||(e.exports=n)},1673:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1589),r(1627),r(1628)],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0}),t.pointSizeAlgorithmTypes={key:"type",base:r.default,typeMap:{"fixed-size":i.default,splat:n.default}}}.apply(null,i))||(e.exports=n)},1674:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(20),r(8),r(7),r(0),r(28)],void 0===(n=function(e,t,r,i,n,o,s,a,l){Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.description=null,t.label=null,t.minValue=0,t.maxValue=0,t.color=null,t}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:s.clone(this.color)})},i([a.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),i([a.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),i([a.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],t.prototype,"minValue",void 0),i([a.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],t.prototype,"maxValue",void 0),i([a.property({type:n,json:{type:[l.Integer],write:!0}})],t.prototype,"color",void 0),o=i([a.subclass("esri.renderers.support.pointCloud.ColorClassBreakInfo")],t)}(a.declared(o));t.ColorClassBreakInfo=u,t.default=u}.apply(null,i))||(e.exports=n)},1675:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(20),r(8),r(7),r(0),r(28)],void 0===(n=function(e,t,r,i,n,o,s,a,l){Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.value=0,t.color=null,t}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o({label:this.label,value:this.value,color:s.clone(this.color)})},i([a.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),i([a.property({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"value",void 0),i([a.property({type:n,json:{type:[l.Integer],write:!0}})],t.prototype,"color",void 0),o=i([a.subclass("esri.renderers.support.pointCloud.StopInfo")],t)}(a.declared(o));t.StopInfo=u,t.default=u}.apply(null,i))||(e.exports=n)},1676:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(20),r(8),r(7),r(0),r(28)],void 0===(n=function(e,t,r,i,n,o,s,a,l){Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.description=null,t.label=null,t.values=null,t.color=null,t}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o({description:this.description,label:this.label,values:s.clone(this.values),color:s.clone(this.color)})},i([a.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),i([a.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),i([a.property({type:[String],json:{write:!0}})],t.prototype,"values",void 0),i([a.property({type:n,json:{type:[l.Integer],write:!0}})],t.prototype,"color",void 0),o=i([a.subclass("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],t)}(a.declared(o));t.ColorUniqueValueInfo=u,t.default=u}.apply(null,i))||(e.exports=n)},1677:function(e,t,r){var i,n;i=[r(30),r(351)],void 0===(n=function(e,t){var r=/^\s*"([\S\s]*)"\s*$/,i=/""/g,n=/"/g;function o(e,t){var r,i={},n=e.length;for(r=0;r<n;r++)i[e[r]]=t[r];return i}return t(null,{fieldNames:null,delimiter:",",newline:"\r\n",trim:!1,parse:function(t){var n,s,a,l,u,c,f,h,p=[],d=t.split(this.newline),v=this.fieldNames,y=0,m=[],g="",x="";e:for(c=0,a=d.length;c<a;c++)if(e.trim(d[c])){for(f=0,l=(n=d[c].split(this.delimiter)).length;f<l;f++){for(h=-1,g+=x+(s=n[f]),x="";(h=s.indexOf('"',h+1))>=0;)y++;if(y%2==0){if(y>0){if(!(u=r.exec(g))){console.warn("Csv: discarding row with invalid value: "+g),m=[],g="",y=0;continue e}m.push(u[1].replace(i,'"'))}else m.push(this.trim||!v?e.trim(g):g);g="",y=0}else x=this.delimiter}0===y?(v?p.push(o(v,m)):v=this.fieldNames=m,m=[]):x=this.newline}return p},toCsv:function(e){return this.stringify(this.data,e)},stringify:function(e,t){var r,i,o,s,a=(t=t||{}).alwaysQuote,l=this.fieldNames,u=this.delimiter,c=this.newline,f="";for(r=-1;r<e.length;r++)for(r>-1&&(f+=c),i=0;i<l.length;i++)null!==(o=r<0?l[i]:e[r][l[i]])&&void 0!==o||(o=""),"string"!=typeof o&&(o=o.toString()),s=a||o.indexOf('"')>=0||o.indexOf(u)>=0,f+=(i>0?u:"")+(s?'"'+o.replace(n,'""')+'"':o);return t.trailingNewline&&(f+=c),f}})}.apply(null,i))||(e.exports=n)},1766:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(19),r(273),r(132),r(9)],void 0===(n=function(e,t,r,i,n,o){function s(){var e=0===l.length;if(!e){for(var t=n();!e&&n()-t<a;){var r=l[c];if(r){if(!0===r()){var o=u.get(r);l[c]=null,u.delete(r),o()}c=(c+1)%l.length}else l.splice(c,1),(e=0===l.length)?c=0:c%=l.length}e||i(s)}}var a=r("host-browser")?6:200,l=[],u=new Map,c=0;return function(e){return e?o.create(function(t){l.push(e),u.set(e,t),1===l.length&&i(s)},function(){l[l.indexOf(e)]=null,u.delete(e)}):o.reject(new TypeError("callback is not a function"))}}.apply(null,i))||(e.exports=n)},1767:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(5),r(1),r(1624)],void 0===(n=function(e,t,r,i,n){return function(e){function t(t,r){return e.call(this,t,r)||this}return r(t,e),t}(n)}.apply(null,i))||(e.exports=n)},1768:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(5),r(1),r(1624)],void 0===(n=function(e,t,r,i,n){return function(e){function t(t,r,i,n){var o=e.call(this,t,r)||this;return o._circleVertexBuffer=i,o._circleIndexBuffer=n,o}return r(t,e),Object.defineProperty(t.prototype,"circleIndexStart",{get:function(){return this._circleIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"circleIndexCount",{get:function(){return this._circleIndexCount},enumerable:!0,configurable:!0}),t.prototype.assignBufferInfo=function(e){var t=e;t._circleIndexStart=this._circleIndexStart,t._circleIndexCount=this._circleIndexCount},t.prototype.processFeatures=function(e,t){var r=this._circleVertexBuffer,i=this._circleIndexBuffer;this._circleIndexStart=i.index,this._circleIndexCount=0;var n=this.layer,o=this.zoom;e&&e.setExtent(this.layerExtent);for(var s=1,a=[1,1,1,1],l=1,u=0,c=1,f=[1,1,1,1],h=1,p=0,d=this._features;p<d.length;p++){var v=d[p],y=v.getGeometry(e);if(y){n.hasDataDrivenRadius&&(s=n.getPaintValue("circle-radius",o,v)),n.hasDataDrivenColor&&(a=n.getPaintValue("circle-color",o,v)),n.hasDataDrivenOpacity&&(l=n.getPaintValue("circle-opacity",o,v)),n.hasDataDrivenStrokeWidth&&(c=n.getPaintValue("circle-stroke-width",o,v)),n.hasDataDrivenStrokeColor&&(f=n.getPaintValue("circle-stroke-color",o,v)),n.hasDataDrivenStrokeOpacity&&(h=n.getPaintValue("circle-stroke-opacity",o,v)),n.hasDataDrivenBlur&&(u=n.getPaintValue("circle-blur",o,v));for(var m=0,g=y;m<g.length;m++){var x=g[m];if(x)for(var _=0,b=x;_<b.length;_++){var I=b[_],w=r.index;r.add(I.x,I.y,0,0,s,a,l,u,c,f,h),r.add(I.x,I.y,0,1,s,a,l,u,c,f,h),r.add(I.x,I.y,1,0,s,a,l,u,c,f,h),r.add(I.x,I.y,1,1,s,a,l,u,c,f,h),i.add(w+0,w+1,w+2),i.add(w+1,w+2,w+3),this._circleIndexCount+=6}}}}},t}(n)}.apply(null,i))||(e.exports=n)},1769:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(5),r(1),r(213),r(275),r(1517),r(1624)],void 0===(n=function(e,t,r,i,n,o,s,a){return function(e){function t(t,r,i,n,o,s){var a=e.call(this,t,r)||this;if(t.hasDataDrivenFill!==i.isDataDriven())throw new Error("incompatible fill buffer");if(t.hasDataDrivenOutline!==o.isDataDriven())throw new Error("incompatible outline buffer");return a._fillVertexBuffer=i,a._fillIndexBuffer=n,a._outlineVertexBuffer=o,a._outlineIndexBuffer=s,a}return r(t,e),Object.defineProperty(t.prototype,"fillIndexStart",{get:function(){return this._fillIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillIndexCount",{get:function(){return this._fillIndexCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outlineIndexStart",{get:function(){return this._outlineIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outlineIndexCount",{get:function(){return this._outlineIndexCount},enumerable:!0,configurable:!0}),t.prototype.assignBufferInfo=function(e){var t=e;t._fillIndexStart=this._fillIndexStart,t._fillIndexCount=this._fillIndexCount,e.layer.getPaintProperty("fill-outline-color")?(t._outlineIndexStart=this._outlineIndexStart,t._outlineIndexCount=this._outlineIndexCount):(t._outlineIndexStart=0,t._outlineIndexCount=0)},t.prototype.processFeatures=function(e,t){this._fillIndexStart=this._fillIndexBuffer.index,this._fillIndexCount=0,this._outlineIndexStart=this._outlineIndexBuffer.index,this._outlineIndexCount=0;var r=this.layer,i=this.zoom,n=r.hasDataDrivenFill,o=r.hasDataDrivenOutline;e&&e.setExtent(this.layerExtent);var s=r.getPaintValue("fill-pattern",i),a=r.getPaintValue("fill-antialias",i)&&void 0===s,l=[1,1,1,1],u=[1,1,1,1],c=1;if(r.outlineUsesFillColor){if(a&&!r.hasDataDrivenOpacity){var f=r.getPaintValue("fill-opacity",i),h=r.getPaintValue("fill-opacity",i+1);f<1&&h<1&&(a=!1)}if(a&&!r.hasDataDrivenColor){var p=r.getPaintValue("fill-color",i),d=r.getPaintValue("fill-color",i+1);p[3]<1&&d[3]<1&&(a=!1)}}for(var v=0,y=this._features;v<y.length;v++){var m=y[v];!s&&r.hasDataDrivenColor&&(l=r.getPaintValue("fill-color",i,m)),r.hasDataDrivenOpacity&&(c=r.getPaintValue("fill-opacity",i,m)),!s&&r.hasDataDrivenOutlineColor&&(u=r.getPaintValue("fill-outline-color",i,m));var g=void 0;n&&(g={color:l,opacity:c});var x=void 0;o&&(x={color:r.outlineUsesFillColor?l:u,opacity:c});var _=m.getGeometry(e);this._processFeature(_,a,r.outlineUsesFillColor,g,x)}},t.prototype._processFeature=function(e,r,i,n,o){if(e){var s=e.length;if(r&&(!i||!o||o.color[3]*o.opacity==1))for(var a=0;a<s;a++)this._processOutline(e[a],o);var l;for(a=0;a<s;a++){var u=t._area(e[a]);u>128?(void 0!==l&&this._processFill(e,l,n),l=[a]):u<-128&&void 0!==l&&l.push(a)}void 0!==l&&this._processFill(e,l,n)}},t.prototype._processOutline=function(e,t){var r,i,n,o=this._outlineVertexBuffer,a=this._outlineIndexBuffer,l=a.index,u=new s.Point(0,0),c=new s.Point(0,0),f=new s.Point(0,0),h=-1,p=-1,d=-1,v=-1,y=-1,m=!1,g=e.length;if(!(g<2)){for(var x=e[0],_=e[g-1];g&&_.isEqual(x);)_=e[--g-1];if(!(g-0<2)){for(var b=0;b<g;++b){0===b?(r=e[g-1],i=e[0],n=e[1],u.assignSub(i,r),u.normalize(),u.rightPerpendicular()):(r=i,i=n,n=b!==g-1?e[b+1]:e[0],u.assign(c));var I=this._isClipEdge(r,i);-1===v&&(m=I),c.assignSub(n,i),c.normalize(),c.rightPerpendicular();var w=u.x*c.y-u.y*c.x;f.assignAdd(u,c),f.normalize();var C=-f.x*-u.x+-f.y*-u.y,T=Math.abs(0!==C?1/C:1);T>8&&(T=8),w>=0?(d=o.add(i.x,i.y,u.x,u.y,0,1,t),-1===v&&(v=d),h>=0&&p>=0&&d>=0&&!I&&a.add(h,p,d),p=o.add(i.x,i.y,T*-f.x,T*-f.y,0,-1,t),-1===y&&(y=p),h>=0&&p>=0&&d>=0&&!I&&a.add(h,p,d),h=p,p=d,d=o.add(i.x,i.y,f.x,f.y,0,1,t),h>=0&&p>=0&&d>=0&&!I&&a.add(h,p,d),p=o.add(i.x,i.y,c.x,c.y,0,1,t),h>=0&&p>=0&&d>=0&&!I&&a.add(h,p,d)):(d=o.add(i.x,i.y,T*f.x,T*f.y,0,1,t),-1===v&&(v=d),h>=0&&p>=0&&d>=0&&!I&&a.add(h,p,d),p=o.add(i.x,i.y,-u.x,-u.y,0,-1,t),-1===y&&(y=p),h>=0&&p>=0&&d>=0&&!I&&a.add(h,p,d),h=p,p=d,d=o.add(i.x,i.y,-f.x,-f.y,0,-1,t),h>=0&&p>=0&&d>=0&&!I&&a.add(h,p,d),(h=o.add(i.x,i.y,-c.x,-c.y,0,-1,t))>=0&&p>=0&&d>=0&&!I&&a.add(h,p,d))}h>=0&&p>=0&&v>=0&&!m&&a.add(h,p,v),h>=0&&v>=0&&y>=0&&!m&&a.add(h,y,v),this._outlineIndexCount+=3*(a.index-l)}}},t.prototype._processFill=function(e,t,r){var i;t.length>1&&(i=[]);for(var s=0,a=0,l=t;a<l.length;a++){var u=l[a];0!==s&&i.push(s),s+=e[u].length}for(var c=2*s,f=n.acquire(),h=0,p=t;h<p.length;h++)for(var d=e[u=p[h]],v=d.length,y=0;y<v;++y)f.push(d[y].x),f.push(d[y].y);var m=o(f,i,2),g=m.length;if(g>0){for(var x=this._fillVertexBuffer.index,_=0;_<c;)this._fillVertexBuffer.add(f[_++],f[_++],r);for(var b=0;b<g;)this._fillIndexBuffer.add(x+m[b++],x+m[b++],x+m[b++]);this._fillIndexCount+=g}n.release(f)},t.prototype._isClipEdge=function(e,t){return e.x===t.x?e.x<=-64||e.x>=4160:e.y===t.y&&(e.y<=-64||e.y>=4160)},t._area=function(e){for(var t=0,r=e.length-1,i=0;i<r;i++)t+=(e[i].x-e[i+1].x)*(e[i].y+e[i+1].y);return.5*(t+(e[r].x-e[0].x)*(e[r].y+e[0].y))},t}(a)}.apply(null,i))||(e.exports=n)},1770:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(5),r(1),r(1601),r(1624),r(587)],void 0===(n=function(e,t,r,i,n,o,s){var a=20,l=new n.Tessellator({distanceAlongCorrection:!0});return function(e){function t(t,r,i,o){var s=e.call(this,t,r)||this;if(s.extrudeVectorsDoubleBuffer=[n.allocExtrudeVectors(),n.allocExtrudeVectors()],s.firstExtrudeVectors=n.allocExtrudeVectors(),s.recycledTriangleBridge=n.allocTriangles(a),s.recycledTrianglePie=n.allocTriangles(a),t.hasDataDrivenLine!==i.isDataDriven())throw new Error("incompatible line buffer");return s._lineVertexBuffer=i,s._lineIndexBuffer=o,s}return r(t,e),Object.defineProperty(t.prototype,"lineIndexStart",{get:function(){return this._lineIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineIndexCount",{get:function(){return this._lineIndexCount},enumerable:!0,configurable:!0}),t.prototype.assignBufferInfo=function(e){var t=e;t._lineIndexStart=this._lineIndexStart,t._lineIndexCount=this._lineIndexCount},t.prototype.processFeatures=function(e,t){this._lineIndexStart=this._lineIndexBuffer.index,this._lineIndexCount=0;var r=this.layer,i=this.zoom,n=r.hasDataDrivenLine;e&&e.setExtent(this.layerExtent);for(var o=r.getPaintValue("line-pattern",i),a=[1,1,1,1],l=1,u=1,c=0,f=this._features;c<f.length;c++){var h=f[c],p=new s.LineLayout(r,i,h);!o&&r.hasDataDrivenColor&&(a=r.getPaintValue("line-color",i,h)),r.hasDataDrivenOpacity&&(l=r.getPaintValue("line-opacity",i,h)),r.hasDataDrivenWidth&&(u=r.getPaintValue("line-width",i,h));var d=void 0;if(!(n&&(d={color:a,opacity:l,size:Math.max(Math.min(u,256),0)},d.size<=0||d.opacity<=0||d.color[3]<=0))){var v=h.getGeometry(e);this._processFeature(p,v,d)}}},t.prototype._processFeature=function(e,t,r){if(t)for(var i=t.length,n=0;n<i;n++)this._processGeometry(t[n],e,r)},t.prototype._processGeometry=function(e,t,r){if(!(e.length<2)){for(var i=e[0],o=e[e.length-1],s=o.x-i.x,a=o.y-i.y,l=s*s+a*a<1e-6,u=e[0],c=1;c<e.length;)(s=e[c].x-u.x)*s+(a=e[c].y-u.y)*a<1e-6?e.splice(c,1):(u=e[c],++c);if(!(e.length<2)){this.vertices=e,this.verticesLen=e.length,this.isClosed=l,this.cap=t.cap,this.join=t.join,this.almostParallelRads=.05,this.veryShallowRads=.1,this.miterSafeRads=n.MITER_SAFE_RADS,this.miterLimitMag=Math.min(t.miterLimit,n.SYSTEM_MAG_LIMIT),this.roundLimitRads=Math.min(t.roundLimit,.5),this.newRoundJoinsSafeRads=2.3;for(var f=this._lineIndexBuffer.index,h=0,p=void 0,d=this.verticesLen,v=0;v<d;++v){var y=e[v],m=e[(v+d-1)%d],g=l&&this._isClipEdge(m,y),x=p===this.extrudeVectorsDoubleBuffer[v%2]?this.extrudeVectorsDoubleBuffer[(v+1)%2]:this.extrudeVectorsDoubleBuffer[v%2];if(v<d-1||!l||this.hasPattern?(this._computeExtrudeVectors(x,v),this._writeGPUVertices(y.x,y.y,h,x,r),!x.capCenter||l&&v===d-1||this._writeGPUPieElements(x,g),l&&0===v&&!this.hasPattern&&n.copyExtrudeVectors(this.firstExtrudeVectors,x)):n.copyExtrudeVectors(x,this.firstExtrudeVectors),p&&this._writeGPUBridgeElements(p,x,g),v<d-1){var _=e[v+1];h+=n.length([_.x-y.x,_.y-y.y])}p=x}this._lineIndexCount+=3*(this._lineIndexBuffer.index-f)}}},t.prototype._computeExtrudeVectors=function(e,t){var r=this.vertices,i=this.verticesLen,o=this.isClosed,s=r[t],a=[void 0,void 0],l=[void 0,void 0];if(t>0&&t<i-1){var u=r[(t+i-1)%i],c=r[(t+1)%i];n.normalize(a,[s.x-u.x,s.y-u.y]),n.normalize(l,[c.x-s.x,c.y-s.y])}else if(0===t){c=r[(t+1)%i];if(n.normalize(l,[c.x-s.x,c.y-s.y]),o){var f=r[i-2];n.normalize(a,[s.x-f.x,s.y-f.y])}else a=l}else{if(t!==i-1)return void console.error("Vertex index 'i' out of range.");u=r[(t+i-1)%i];if(n.normalize(a,[s.x-u.x,s.y-u.y]),o){var h=r[1];n.normalize(l,[h.x-s.x,h.y-s.y])}else l=a}o||0!==t?o||t!==i-1?this._computeJoinExtrudeVectors(e,a,l):this._computeCapExtrudeVectors(e,a,l,n.CapPosition.END):this._computeCapExtrudeVectors(e,a,l,n.CapPosition.START)},t.prototype._computeCapExtrudeVectors=function(e,t,r,i){0===this.cap?l.buttCap(e,t,r):1===this.cap?l.roundCap(e,t,r,i,n.getNumberOfSlices(Math.PI),i===n.CapPosition.START?-1:1):2===this.cap?l.squareCap(e,t,r,i):l.buttCap(e,t,r)},t.prototype._computeJoinExtrudeVectors=function(e,t,r){var i=n.getRads(t,r);if(i>Math.PI-this.almostParallelRads)l.rectJoin(e,t,r);else if(0===this.join&&i>=this.veryShallowRads)l.bevelJoin(e,t,r,1);else if(1===this.join&&i>=this.veryShallowRads){var o=n.getNumberOfSlices(i);i<this.newRoundJoinsSafeRads?o<2||i<this.roundLimitRads?l.bevelJoin(e,t,r,1):l.roundJoin(e,t,r,o):l.unitRoundJoin(e,t,r,o)}else i<this.almostParallelRads?l.fastMiterJoin(e,t,r):i<this.miterSafeRads?l.miterJoin(e,t,r):l.bevelJoin(e,t,r,this.miterLimitMag)},t.prototype._writeGPUVertices=function(e,t,r,i,n){for(var o=0;o<i.vectors.count;++o){var s=i.vectors.items[o].vector[0],a=i.vectors.items[o].vector[1],l=i.vectors.items[o].texCoords[0],u=i.vectors.items[o].texCoords[1];i.vectors.items[o].base=this._lineVertexBuffer.index,this._lineVertexBuffer.add(e,t,s,a,l,u,r,n)}},t.prototype._writeGPUBridgeElements=function(e,t,r){if(l.bridge(this.recycledTriangleBridge,e,t),!r)for(var i=0;i<this.recycledTriangleBridge.count;++i){var n=this.recycledTriangleBridge.items[i];this._lineIndexBuffer.add(n.v1.base,n.v2.base,n.v3.base)}},t.prototype._writeGPUPieElements=function(e,t){if(l.pie(this.recycledTrianglePie,e),!t)for(var r=0;r<this.recycledTrianglePie.count;++r){var i=this.recycledTrianglePie.items[r];this._lineIndexBuffer.add(i.v1.base,i.v2.base,i.v3.base)}},t.prototype._isClipEdge=function(e,t){return e.x===t.x?e.x<=-64||e.x>=4160:e.y===t.y&&(e.y<=-64||e.y>=4160)},t}(o)}.apply(null,i))||(e.exports=n)},1771:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1517),r(2141),r(545)],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t,r,i,n){void 0===r&&(r=0),void 0===i&&(i=-1),void 0===n&&(n=u),this.x=e,this.y=t,this.angle=r,this.segment=i,this.minzoom=n}}();t.Anchor=o;var s=function(){return function(e,t,r,i,o,s,a){void 0===o&&(o=!1),void 0===s&&(s=u),void 0===a&&(a=n.C_INFINITY),this.anchor=e,this.labelAngle=t,this.glyphAngle=r,this.page=i,this.upsideDown=o,this.minzoom=s,this.maxzoom=a}}(),a=function(){return function(e,t,r,i,n,o,s,a,l,u){this.tl=e,this.tr=t,this.bl=r,this.br=i,this.mosaicRect=n,this.labelAngle=o,this.anchor=s,this.minzoom=a,this.maxzoom=l,this.page=u}}();t.PlacedSymbol=a;var l=function(){return function(e,t){this.footprint=e,this.shapes=t}}();t.Placement=l;var u=.5,c=function(){function e(){this.mapAngle=0,this._conflictEngine=new i.ConflictEngine}return e.prototype.reset=function(){this._conflictEngine.reset()},e.prototype.setAngle=function(e){this.mapAngle=e,this._conflictEngine.setAngle(e)},e.prototype.getIconPlacement=function(e,t,o,s,c,f,h){var p=o.width/o.pixelRatio,d=o.height/o.pixelRatio,v=f.offset[0]-p/2,y=f.offset[1]-d/2,m=v+p,g=y+d,x=o.rect,_=o.sdf?17:2,b=v-_,I=y-_,w=b+x.width/o.pixelRatio,C=I+x.height/o.pixelRatio,T=new r.Point(b,I),S=new r.Point(w,C),M=new r.Point(b,C),P=new r.Point(w,I),A=f.rotate*n.C_DEG_TO_RAD,B=1===f.rotationAlignment;if(e.segment>=0&&!B&&(A+=e.angle),0!==A){var E=Math.cos(A),D=Math.sin(A);T.rotate(E,D),S.rotate(E,D),M.rotate(E,D),P.rotate(E,D)}var F=8*f.padding,V=new r.Point(e.x,e.y),L=new i.Footprint(this.mapAngle,F,B);L.addBox(V,new i.Box(v,y,m,g),s,A,t,u,n.C_INFINITY);var R=new a(T,P,M,S,x,0,V,u,n.C_INFINITY,0),N=new l(L,[R]),k=u;return f.allowOverlap||(k=this._conflictEngine.getMinZoom(N.footprint,k,h,B)),L.minzoom=k,N},e.prototype.getTextPlacement=function(e,t,o,c,f,h,p,d){for(var v,y=new r.Point(e.x,e.y),m=p.rotate*n.C_DEG_TO_RAD,g=0===p.rotationAlignment,x=p.keepUpright,_=u,b=!g,I=b?0:e.angle,w=e.segment>=0&&g,C=8*p.padding,T=new i.Footprint(this.mapAngle,C,b),S=[],M=!w,P=Number.POSITIVE_INFINITY,A=Number.NEGATIVE_INFINITY,B=P,E=A,D=w?x:g&&x,F=0,V=c;F<V.length;F++){var L=V[F],R=L.glyphMosaicItem;if(R&&!R.rect.isEmpty){var N=R.rect,k=R.metrics,O=R.page;M&&(v&&v!==L.y&&(T.addBox(y,new i.Box(P,B,A,E),f,m,t,u,n.C_INFINITY),B=P=Number.POSITIVE_INFINITY,E=A=Number.NEGATIVE_INFINITY),v=L.y);var z=[];if(w){var j=.5*R.metrics.width,U=(o.x+L.x+k.left-4+j)*f;if(_=this._placeGlyph(e,_,U,h,e.segment,1,O,z),x&&(_=this._placeGlyph(e,_,U,h,e.segment,-1,O,z)),_>=2)break}else z.push(new s(y,I,I,O)),g&&x&&z.push(new s(y,I+n.C_PI,I+n.C_PI,O,!0));for(var q=L.x+o.x+k.left,G=L.y+o.y-k.top,Y=q+k.width,X=G+k.height,Z=new r.Point(q-4,G-4),J=new r.Point(Z.x+N.width,Z.y+N.height),W=new r.Point(Z.x,J.y),H=new r.Point(J.x,Z.y),K=0,Q=z;K<Q.length;K++){var $=Q[K],ee=Z.clone(),te=W.clone(),re=H.clone(),ie=J.clone(),ne=G,oe=X,se=$.glyphAngle+m;if(0!==se){var ae=Math.cos(se),le=Math.sin(se);ee.rotate(ae,le),ie.rotate(ae,le),te.rotate(ae,le),re.rotate(ae,le)}S.push(new a(ee,re,te,ie,N,$.labelAngle,$.anchor,$.minzoom,$.maxzoom,$.page)),D&&!this._legible($.labelAngle)||(M?(q<P&&(P=q),ne<B&&(B=ne),Y>A&&(A=Y),oe>E&&(E=oe)):$.minzoom<2&&T.addBox($.anchor,new i.Box(q,ne,Y,oe),f,se,t,$.minzoom,$.maxzoom))}}}if(_>=2)return null;M&&T.addBox(y,new i.Box(P,B,A,E),f,m,t,u,n.C_INFINITY);var ue=new l(T,S);return p.allowOverlap||(_=this._conflictEngine.getMinZoom(ue.footprint,_,d,b)),T.minzoom=_,ue},e.prototype.add=function(e){this._conflictEngine.add(e.footprint)},e.prototype._legible=function(e){var t=n.radToByte(e);return t<65||t>=193},e.prototype._placeGlyph=function(e,t,i,o,a,l,u,c){var f=l,h=f<0?n.positiveMod(e.angle+n.C_PI,n.C_2PI):e.angle,p=this._legible(h),d=0;i<0&&(f*=-1,i*=-1,d=n.C_PI),f>0&&++a;var v=new r.Point(e.x,e.y),y=o[a],m=n.C_INFINITY;if(o.length<=a)return m;for(;;){var g=y.x-v.x,x=y.y-v.y,_=Math.sqrt(g*g+x*x),b=Math.max(i/_,t),I=g/_,w=x/_,C=n.positiveMod(Math.atan2(w,I)+d,n.C_2PI);if(c.push(new s(v,h,C,u,p,b,m)),b<=t)return b;v=y.clone();do{if(a+=f,o.length<=a||a<0)return b;y=o[a]}while(v.isEqual(y));var T=y.x-v.x,S=y.y-v.y,M=Math.sqrt(T*T+S*S);T*=_/M,S*=_/M,v.x-=T,v.y-=S,m=b}},e}();t.PlacementEngine=c}.apply(null,i))||(e.exports=n)},1772:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(5),r(1),r(1600),r(1517),r(1599),r(1624),r(545),r(1771),r(587)],void 0===(n=function(e,t,r,i,n,o,s,a,l,u,c){function f(e,t){return e.iconMosaicItem&&t.iconMosaicItem?e.iconMosaicItem.page===t.iconMosaicItem.page?0:e.iconMosaicItem.page<t.iconMosaicItem.page?-1:1:e.iconMosaicItem&&!t.iconMosaicItem?1:!e.iconMosaicItem&&t.iconMosaicItem?-1:0}return function(e){function t(t,r,i,n,o,s,a,l){var u=e.call(this,t,r)||this;if(u._markerMap=new Map,u._glyphMap=new Map,u._glyphBufferDataStorage=new Map,u._sdfMarkers=!1,t.hasDataDrivenIcon!==i.isDataDriven())throw new Error("incompatible icon buffer");if(t.hasDataDrivenText!==o.isDataDriven())throw new Error("incompatible text buffer");return u._iconVertexBuffer=i,u._iconIndexBuffer=n,u._textVertexBuffer=o,u._textIndexBuffer=s,u._placementEngine=a,u._workerTileHandler=l,u}return r(t,e),Object.defineProperty(t.prototype,"markerPageMap",{get:function(){return this._markerMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"glyphsPageMap",{get:function(){return this._glyphMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sdfMarker",{get:function(){return this._sdfMarkers},enumerable:!0,configurable:!0}),t.prototype.copy=function(e,r,i,n,o){var s=new t(this.layer,this.zoom,e,r,i,n,o,this._workerTileHandler);return s.layerIndex=this.layerIndex,s.layerExtent=this.layerExtent,s._iconIndexStart=r.index,s._textIndexStart=n.index,s._iconIndexCount=0,s._textIndexCount=0,s._symbolInstances=this._symbolInstances,s._workerTileHandler=this._workerTileHandler,s._fontArray=this._fontArray,s._textLayout=this._textLayout,s._iconLayout=this._iconLayout,s._isLinePlacement=this._isLinePlacement,s._avoidEdges=this._avoidEdges,s},t.prototype.getResources=function(e,r,i){var n=this.layer,o=this.zoom,s=n.hasDataDrivenIcon,a=n.hasDataDrivenText;e&&e.setExtent(this.layerExtent);for(var l=n.getLayoutProperty("icon-image"),u=n.getLayoutProperty("text-field"),c=n.getLayoutValue("text-font",o),f=n.getLayoutValue("text-transform",o),h=[],p=[1,1,1,1],d=1,v=1,y=[1,1,1,1],m=1,g=1,x=0,_=this._features;x<_.length;x++){var b=_[x],I=b.getGeometry(e);if(I&&0!==I.length){var w=void 0;l&&(w=n.getLayoutValue("icon-image",o,b),l.isDataDriven||(w=this._replaceKeys(w,b.values)),w&&r.add(w));var C=void 0,T=!1;if(u&&(C=n.getLayoutValue("text-field",o,b),u.isDataDriven||(C=this._replaceKeys(C,b.values)),C=C.replace(/\\n/g,"\n"))){switch(f){case 2:C=C.toLowerCase();break;case 1:C=C.toUpperCase()}if(t._bidiEngine.hasBidiChar(C)){var S;S="rtl"===t._bidiEngine.checkContextual(C)?"IDNNN":"ICNNN",C=t._bidiEngine.bidiTransform(C,S,"VLYSN"),T=!0}var M=C.length;if(M>0)for(var P=0,A=c;P<A.length;P++){var B=A[P],E=i[B];E||(E=i[B]=new Set);for(var D=0;D<M;D++){var F=C.charCodeAt(D);E.add(F)}}}if(w||C){var V=n.getLayoutValue("icon-size",o,b),L=n.getLayoutValue("text-size",o,b);n.hasDataDrivenIconColor&&(p=n.getPaintValue("icon-color",o,b)),n.hasDataDrivenIconOpacity&&(d=n.getPaintValue("icon-opacity",o,b)),n.hasDataDrivenIconSize&&(v=V),n.hasDataDrivenTextColor&&(y=n.getPaintValue("text-color",o,b)),n.hasDataDrivenTextOpacity&&(m=n.getPaintValue("text-opacity",o,b)),n.hasDataDrivenTextSize&&(g=L);var R={sprite:w,label:C,rtl:T,type:b.type,geometry:I,iconSize:V,iconRotate:n.getLayoutValue("icon-rotate",o,b),ddIconValues:s?{color:p,opacity:d,size:v}:null,textSize:L,textRotate:n.getLayoutValue("text-rotate",o,b),ddTextValues:a?{color:y,opacity:m,size:g}:null};h.push(R)}}}this._symbolFeatures=h},t.prototype.processFeatures=function(e,r){e&&e.setExtent(this.layerExtent);var i,n,o,a,h,p=this.layer,d=this.zoom,v=this._isLinePlacement=1===p.getLayoutValue("symbol-placement",d),y=this._avoidEdges=p.getLayoutValue("symbol-avoid-edges",d)&&!v,m=8*p.getLayoutValue("symbol-spacing",d),g=p.getLayoutProperty("icon-image"),x=p.getLayoutProperty("text-field"),_=this._workerTileHandler;if(g&&(this._iconLayout=new c.IconLayout(p,d,v),i=_.getSpriteItems(),n=this._getTranslate(!0)),x){var b=this._textLayout=new c.TextLayout(p,d,v);this._fontArray=b.fontArray;var I=.5;switch(b.anchor){case 5:case 1:case 7:I=0;break;case 6:case 2:case 8:I=1}var w=.5;switch(b.anchor){case 5:case 3:case 6:w=0;break;case 7:case 4:case 8:w=1}var C=.5;switch(b.justify){case 0:C=0;break;case 2:C=1}var T=24*b.letterSpacing,S=v?0:24*b.maxWidth,M=24*b.lineHeight,P=[24*b.offset[0],24*b.offset[1]];o=this._fontArray.map(function(e){return _.getGlyphItems(e)}),a=new s(o,S,M,T,P,I,w,C),h=this._getTranslate(!1)}this._iconIndexStart=this._iconIndexBuffer.index,this._textIndexStart=this._textIndexBuffer.index,this._iconIndexCount=0,this._textIndexCount=0,this._markerMap.clear(),this._glyphMap.clear();var A=[];this._symbolInstances=A;var B=this._textLayout,E=1;B&&B.size&&(E=B.size/24);for(var D=B?B.maxAngle*l.C_DEG_TO_RAD:0,F=B?8*B.size:0,V=0,L=this._symbolFeatures;V<L.length;V++){var R=L[V],N=void 0;R.sprite&&(N=i[R.sprite])&&N.sdf&&(this._sdfMarkers=!0);var k=void 0,O=R.label,z=0;if(O&&(k=a.getShaping(O,R.rtl))&&k.length>0){for(var j=1e30,U=-1e30,q=0,G=k;q<G.length;q++){var Y=G[q];j=Math.min(j,Y.x),U=Math.max(U,Y.x)}z=(U-j+48)*E*8}for(var X=0,Z=R.geometry;X<Z.length;X++){var J=Z[X],W=void 0;if(v){if(k&&k.length>0&&B&&B.size){var H=8*B.size*(2+Math.min(2,4*Math.abs(B.offset[1])));t._smoothVertices(J,H)}W=t._findAnchors(J,m,z)}else W=3===R.type?t._findCentroid(J):[new u.Anchor(J[0].x,J[0].y)];for(var K=0,Q=W;K<Q.length;K++){var $=Q[K];$.x<0||$.x>4096||$.y<0||$.y>4096||v&&z>0&&0===B.rotationAlignment&&!t._honorsTextMaxAngle(J,$,z,D,F)||A.push({shaping:k,line:J,iconMosaicItem:N,anchor:$,iconSize:R.iconSize,iconRotate:R.iconRotate,ddIconValues:R.ddIconValues,textSize:R.textSize,textRotate:R.textRotate,ddTextValues:R.ddTextValues})}}}A.sort(f);for(var ee=0,te=A;ee<te.length;ee++){var re=te[ee];this._processFeature(re,n,h,y)}this._addPlacedGlyphs()},t.prototype.updateSymbols=function(){this._iconIndexStart=this._iconIndexBuffer.index,this._textIndexStart=this._textIndexBuffer.index,this._iconIndexCount=0,this._textIndexCount=0,this._markerMap.clear(),this._glyphMap.clear();var e,t,r=this._avoidEdges,i=this.layer;i.getLayoutProperty("icon-image")&&(e=this._getTranslate(!0)),i.getLayoutProperty("text-field")&&(t=this._getTranslate(!1));for(var n=0,o=this._symbolInstances;n<o.length;n++){var s=o[n];this._processFeature(s,e,t,r)}this._addPlacedGlyphs()},t.prototype._getTranslate=function(e){var t=this.layer.getPaintValue(e?"icon-translate":"text-translate",this.zoom);if(0!==t[0]||0!==t[1]){var r=this._placementEngine.mapAngle;if(0!==r&&0===this.layer.getPaintValue(e?"icon-translate-anchor":"text-translate-anchor",this.zoom)){var i=Math.sin(r),n=Math.cos(r);return[8*(t[0]*n-t[1]*i),8*(t[0]*i+t[1]*n)]}return[8*t[0],8*t[1]]}},t.prototype._replaceKeys=function(e,t){return e.replace(/{([^{}]+)}/g,function(e,r){return r in t?t[r]:""})},t.prototype._processFeature=function(e,t,r,i){var n=e.line,s=e.iconMosaicItem,a=e.shaping,u=e.anchor,c=this._iconLayout,f=c&&!!s,h=!0,p=1;f&&(c.size=e.iconSize,c.rotate=e.iconRotate,p=8*c.size,h=c.optional||!s);var d=this._textLayout,v=d&&a&&a.length>0,y=1,m=y,g=!0;v&&(d.size=e.textSize,d.rotate=e.textRotate,m=8*(y=d.size/24),g=d.optional||!a||0===a.length);var x,_,b=new o.Point(0,-17);if((f&&(x=this._placementEngine.getIconPlacement(u,t,s,p,n,c,i),u.minzoom>x.footprint.minzoom&&(x.footprint.minzoom=u.minzoom),x.footprint.minzoom===l.C_INFINITY&&(x=null)),x||h)&&(v&&(_=this._placementEngine.getTextPlacement(u,r,b,a,m,n,d,i))&&(u.minzoom>_.footprint.minzoom&&(_.footprint.minzoom=u.minzoom),_.footprint.minzoom===l.C_INFINITY&&(_=null)),_||g)){if(x&&_||(g||h?g||_?h||x||(_=null):x=null:(x=null,_=null)),x&&_&&!g&&!h){var I=Math.max(x.footprint.minzoom,_.footprint.minzoom);x.footprint.minzoom=I,_.footprint.minzoom=I}_&&(d.ignorePlacement||this._placementEngine.add(_),this._storePlacedGlyphs(_.shapes,_.footprint.minzoom,this.zoom,e.ddTextValues)),x&&(c.ignorePlacement||this._placementEngine.add(x),this._addPlacedIcons(x.shapes,x.footprint.minzoom,this.zoom,s.page,e.ddIconValues))}},t.prototype._addPlacedIcons=function(e,t,r,i,n){for(var o=Math.max(r+l.log2(t),0),s=this._iconVertexBuffer,a=this._iconIndexBuffer,u=0,c=e;u<c.length;u++){var f=c[u],h=Math.max(r+l.log2(f.minzoom),o),p=Math.min(r+l.log2(f.maxzoom),25);if(!(p<=h)){var d=f.tl,v=f.tr,y=f.bl,m=f.br,g=f.mosaicRect,x=f.labelAngle,_=f.anchor,b=s.index,I=g.x,w=g.y,C=I+g.width,T=w+g.height;s.add(_.x,_.y,d.x,d.y,I,w,x,h,p,o,n),s.add(_.x,_.y,v.x,v.y,C,w,x,h,p,o,n),s.add(_.x,_.y,y.x,y.y,I,T,x,h,p,o,n),s.add(_.x,_.y,m.x,m.y,C,T,x,h,p,o,n),a.add(b+0,b+1,b+2),a.add(b+1,b+2,b+3),this._markerMap.has(i)?this._markerMap.get(i)[1]+=6:this._markerMap.set(i,[this._iconIndexStart+this._iconIndexCount,6]),this._iconIndexCount+=2}}},t.prototype._addPlacedGlyphs=function(){var e=this,t=this._textVertexBuffer,r=this._textIndexBuffer;this._glyphBufferDataStorage.forEach(function(i,n){for(var o=0,s=i;o<s.length;o++){var a=s[o],l=t.index;t.add(a.glyphAnchor[0],a.glyphAnchor[1],a.tl[0],a.tl[1],a.xmin,a.ymin,a.labelAngle,a.minLod,a.maxLod,a.placementLod,a.ddValues),t.add(a.glyphAnchor[0],a.glyphAnchor[1],a.tr[0],a.tr[1],a.xmax,a.ymin,a.labelAngle,a.minLod,a.maxLod,a.placementLod,a.ddValues),t.add(a.glyphAnchor[0],a.glyphAnchor[1],a.bl[0],a.bl[1],a.xmin,a.ymax,a.labelAngle,a.minLod,a.maxLod,a.placementLod,a.ddValues),t.add(a.glyphAnchor[0],a.glyphAnchor[1],a.br[0],a.br[1],a.xmax,a.ymax,a.labelAngle,a.minLod,a.maxLod,a.placementLod,a.ddValues),r.add(l+0,l+1,l+2),r.add(l+1,l+2,l+3),e._glyphMap.has(n)?e._glyphMap.get(n)[1]+=6:e._glyphMap.set(n,[e._textIndexStart+e._textIndexCount,6]),e._textIndexCount+=2}}),this._glyphBufferDataStorage.clear()},t.prototype._storePlacedGlyphs=function(e,t,r,i){for(var n=Math.max(r+l.log2(t),0),o=0,s=e;o<s.length;o++){var a=s[o],u=Math.max(r+l.log2(a.minzoom),n),c=Math.min(r+l.log2(a.maxzoom),25);if(!(c<=u)){var f=a.tl,h=a.tr,p=a.bl,d=a.br,v=a.labelAngle,y=a.anchor,m=a.mosaicRect;this._glyphBufferDataStorage.has(a.page)||this._glyphBufferDataStorage.set(a.page,[]),this._glyphBufferDataStorage.get(a.page).push({glyphAnchor:[y.x,y.y],tl:[f.x,f.y],tr:[h.x,h.y],bl:[p.x,p.y],br:[d.x,d.y],xmin:m.x,ymin:m.y,xmax:m.x+m.width,ymax:m.y+m.height,labelAngle:v,minLod:u,maxLod:c,placementLod:n,ddValues:i})}}},t._findAnchors=function(e,t,r){t+=r;for(var i=0,n=e.length-1,s=0;s<n;s++)i+=o.Point.distance(e[s],e[s+1]);var a=r||t;if(i<=(a*=.5))return[];var c=a/i,f=0,h=-(t=i/Math.max(Math.round(i/t),1))/2,p=[],d=e.length-1;for(s=0;s<d;s++){for(var v=e[s],y=e[s+1],m=y.x-v.x,g=y.y-v.y,x=Math.sqrt(m*m+g*g),_=void 0;h+t<f+x;){var b=((h+=t)-f)/x,I=l.interpolate(v.x,y.x,b),w=l.interpolate(v.y,y.y,b);void 0===_&&(_=Math.atan2(g,m)),p.push(new u.Anchor(I,w,_,s,c))}f+=x}return p},t._deviation=function(e,t,r){var i=(t.x-e.x)*(r.x-t.x)+(t.y-e.y)*(r.y-t.y),n=(t.x-e.x)*(r.y-t.y)-(t.y-e.y)*(r.x-t.x);return Math.atan2(n,i)},t._honorsTextMaxAngle=function(e,t,r,i,n){for(var s=0,a=r/2,l=new o.Point(t.x,t.y),u=t.segment+1;s>-a;){if(--u<0)return!1;s-=o.Point.distance(e[u],l),l=e[u]}s+=o.Point.distance(e[u],e[u+1]);for(var c=[],f=0,h=e.length;s<a;){var p=e[u],d=u,v=void 0;do{if(++d===h)return!1;v=e[d]}while(v.isEqual(p));var y=d,m=void 0;do{if(++y===h)return!1;m=e[y]}while(m.isEqual(v));var g=this._deviation(p,v,m);for(c.push({deviation:g,distToAnchor:s}),f+=g;s-c[0].distToAnchor>n;)f-=c.shift().deviation;if(Math.abs(f)>i)return!1;s+=o.Point.distance(v,m),u=d}return!0},t._smoothVertices=function(e,t){if(!(t<=0)){var r=e.length;if(!(r<3)){var i=[],n=0;i.push(0);for(var s=1;s<r;s++)n+=o.Point.distance(e[s],e[s-1]),i.push(n);t=Math.min(t,.2*n);var a=[];a.push(e[0].x),a.push(e[0].y);var l=e[r-1].x,u=e[r-1].y,c=o.Point.sub(e[0],e[1]);c.normalize(),e[0].x+=t*c.x,e[0].y+=t*c.y,c.assignSub(e[r-1],e[r-2]),c.normalize(),e[r-1].x+=t*c.x,e[r-1].y+=t*c.y;for(s=1;s<r;s++)i[s]+=t;i[r-1]+=t;var f=.5*t;for(s=1;s<r-1;s++){for(var h=0,p=0,d=0,v=s-1;v>=0&&!(i[v+1]<i[s]-f);v--){var y=f+i[v+1]-i[s],m=i[v+1]-i[v],g=i[s]-i[v]<f?1:y/m;if(Math.abs(g)<1e-6)break;var x=g*y-.5*(C=g*g)*m,_=g*m/t,b=e[v+1],I=e[v].x-b.x,w=e[v].y-b.y;h+=_/x*(b.x*g*y+.5*C*(y*I-m*b.x)-C*g*m*I/3),p+=_/x*(b.y*g*y+.5*C*(y*w-m*b.y)-C*g*m*w/3),d+=_}for(v=s+1;v<r&&!(i[v-1]>i[s]+f);v++){y=f-i[v-1]+i[s],m=i[v]-i[v-1],g=i[v]-i[s]<f?1:y/m;if(Math.abs(g)<1e-6)break;var C;x=g*y-.5*(C=g*g)*m,_=g*m/t,b=e[v-1],I=e[v].x-b.x,w=e[v].y-b.y;h+=_/x*(b.x*g*y+.5*C*(y*I-m*b.x)-C*g*m*I/3),p+=_/x*(b.y*g*y+.5*C*(y*w-m*b.y)-C*g*m*w/3),d+=_}a.push(h/d),a.push(p/d)}a.push(l),a.push(u);for(s=0,v=0;s<r;s++)e[s].x=a[v++],e[s].y=a[v++]}}},t._findCentroid=function(e){var t=e.length-1,r=0,i=0,n=0,o=e[0].x,s=e[0].y;o>4096&&(o=4096),o<0&&(o=0),s>4096&&(s=4096),s<0&&(s=0);for(var a=1;a<t;a++){var l=e[a].x,c=e[a].y,f=e[a+1].x,h=e[a+1].y;l>4096&&(l=4096),l<0&&(l=0),c>4096&&(c=4096),c<0&&(c=0),f>4096&&(f=4096),f<0&&(f=0),h>4096&&(h=4096),h<0&&(h=0);var p=(l-o)*(h-s)-(f-o)*(c-s);r+=p*(o+l+f),i+=p*(s+c+h),n+=p}return r/=3*n,i/=3*n,isNaN(r)||isNaN(i)?[]:[new u.Anchor(r,i)]},t._bidiEngine=new n,t}(a)}.apply(null,i))||(e.exports=n)},2139:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1766),r(80),r(9),r(1670),r(1767),r(1768),r(1769),r(545),r(2140),r(1770),r(1771),r(1772),r(2142),r(2145)],void 0===(n=function(e,t,r,i,n,o,s,a,l,u,c,f,h,p,d,v){return function(){function e(){this.rotation=0,this.status=o.TileStatus.INITIALIZED,this._symbolBuckets=[],this.placementEngine=new h.PlacementEngine,this.fillVertexBuffer=new v.FillVertexBuffer(!1),this.fillDDVertexBuffer=new v.FillVertexBuffer(!0),this.fillIndexBuffer=new c.TriangleIndexBuffer,this.outlineVertexBuffer=new v.OutlineVertexBuffer(!1),this.outlineDDVertexBuffer=new v.OutlineVertexBuffer(!0),this.outlineIndexBuffer=new c.TriangleIndexBuffer,this.lineVertexBuffer=new v.LineVertexBuffer(!1),this.lineDDVertexBuffer=new v.LineVertexBuffer(!0),this.lineIndexBuffer=new c.TriangleIndexBuffer,this.iconVertexBuffer=new v.SymbolVertexBuffer(!1),this.iconDDVertexBuffer=new v.SymbolVertexBuffer(!0),this.iconIndexBuffer=new c.TriangleIndexBuffer,this.textVertexBuffer=new v.SymbolVertexBuffer(!1),this.textDDVertexBuffer=new v.SymbolVertexBuffer(!0),this.textIndexBuffer=new c.TriangleIndexBuffer,this.circleVertexBuffer=new v.CircleVertexBuffer,this.circleIndexBuffer=new c.TriangleIndexBuffer}return e.prototype.initialize=function(e,t,r,i){void 0===i&&(i=0),this.tileKey=e,this.refKeys=t,this._workerTileHandler=r,this.rotation=i,this.placementEngine.setAngle(u.C_DEG_TO_RAD*i)},e.prototype.release=function(){this.tileKey="",this.refKeys=null,this.status=o.TileStatus.INITIALIZED,this.rotation=0,this.resetData(),this._workerTileHandler=null},e.prototype.resetData=function(){this.fillVertexBuffer.reset(),this.fillDDVertexBuffer.reset(),this.fillIndexBuffer.reset(),this.outlineVertexBuffer.reset(),this.outlineDDVertexBuffer.reset(),this.outlineIndexBuffer.reset(),this.lineVertexBuffer.reset(),this.lineDDVertexBuffer.reset(),this.lineIndexBuffer.reset(),this.iconVertexBuffer.reset(),this.iconDDVertexBuffer.reset(),this.iconIndexBuffer.reset(),this.textVertexBuffer.reset(),this.textDDVertexBuffer.reset(),this.textIndexBuffer.reset(),this.circleVertexBuffer.reset(),this.circleIndexBuffer.reset(),this.placementEngine.reset(),this._symbolBuckets.length=0},e.prototype.reparse=function(e){return this.resetData(),this.setDataAndParse(this._data,e)},e.prototype.setDataAndParse=function(e,t){var r=this,i=t&&t.signal;if(i){var n=function(){i.removeEventListener("abort",n),r.status=o.TileStatus.INVALID};i.addEventListener("abort",n)}return this._data=e,this._parse(e,t).then(function(e){r.status=o.TileStatus.READY;for(var t=[1,r.fillVertexBuffer.sizeInBytes,2,r.fillDDVertexBuffer.sizeInBytes,3,r.fillIndexBuffer.sizeInBytes,4,r.outlineVertexBuffer.sizeInBytes,5,r.outlineDDVertexBuffer.sizeInBytes,6,r.outlineIndexBuffer.sizeInBytes,7,r.lineVertexBuffer.sizeInBytes,8,r.lineDDVertexBuffer.sizeInBytes,9,r.lineIndexBuffer.sizeInBytes,10,r.iconVertexBuffer.sizeInBytes,11,r.iconDDVertexBuffer.sizeInBytes,12,r.iconIndexBuffer.sizeInBytes,13,r.textVertexBuffer.sizeInBytes,14,r.textDDVertexBuffer.sizeInBytes,15,r.textIndexBuffer.sizeInBytes,16,r.circleVertexBuffer.sizeInBytes,17,r.circleIndexBuffer.sizeInBytes],i=new Uint32Array(t),n=[],u=e.length,c=0;c<u;c++){var h=e[c];if(h instanceof l)n.push(h.layerIndex),n.push(1),n.push(h.fillIndexStart),n.push(h.fillIndexCount),n.push(h.outlineIndexStart),n.push(h.outlineIndexCount);else if(h instanceof f)n.push(h.layerIndex),n.push(2),n.push(h.lineIndexStart),n.push(h.lineIndexCount);else if(h instanceof p){n.push(h.layerIndex),n.push(3),n.push(h.sdfMarker?1:0);var d=h.markerPageMap;n.push(d.size),d.forEach(function(e,t){n.push(t),n.push(e[0]),n.push(e[1])});var v=h.glyphsPageMap;n.push(v.size),v.forEach(function(e,t){n.push(t),n.push(e[0]),n.push(e[1])})}else h instanceof a?(n.push(h.layerIndex),n.push(4),n.push(h.circleIndexStart),n.push(h.circleIndexCount)):h instanceof s&&(n.push(h.layerIndex),n.push(0))}var y=new Uint32Array(n),m=r.fillVertexBuffer.toBuffer(),g=r.fillDDVertexBuffer.toBuffer(),x=r.fillIndexBuffer.toBuffer(),_=r.outlineVertexBuffer.toBuffer(),b=r.outlineDDVertexBuffer.toBuffer(),I=r.outlineIndexBuffer.toBuffer(),w=r.lineVertexBuffer.toBuffer(),C=r.lineDDVertexBuffer.toBuffer(),T=r.lineIndexBuffer.toBuffer(),S=r.iconVertexBuffer.toBuffer(),M=r.iconDDVertexBuffer.toBuffer(),P=r.iconIndexBuffer.toBuffer(),A=r.textVertexBuffer.toBuffer(),B=r.textDDVertexBuffer.toBuffer(),E=r.textIndexBuffer.toBuffer(),D=r.circleVertexBuffer.toBuffer(),F=r.circleIndexBuffer.toBuffer();return{result:{bufferDataInfo:i.buffer,bucketDataInfo:y.buffer,bufferData:[m,g,x,_,b,I,w,C,T,S,M,P,A,B,E,D,F]},transferList:[m,g,x,_,b,I,w,C,T,S,M,P,A,B,E,D,F,i.buffer,y.buffer]}})},e.prototype.addBucket=function(e){this._symbolBuckets.push(e)},e.prototype.updateSymbols=function(e){var t=this,i=this._symbolBuckets;if(!i||0===i.length)return n.resolve();this.rotation=e;var s=this.placementEngine;s.reset(),s.setAngle(e/256*360*u.C_DEG_TO_RAD);var a=this.iconVertexBuffer;a.reset();var l=this.iconDDVertexBuffer;l.reset();var c=this.iconIndexBuffer;c.reset();var f=this.textVertexBuffer;f.reset();var h=this.textDDVertexBuffer;h.reset();var p=this.textIndexBuffer;p.reset();var d=[],v=i.length,y=0;return r(function(){if(t.status===o.TileStatus.INVALID||t.status===o.TileStatus.INITIALIZED)return!0;if(y<v){var e=i[y++];if(e&&e.layer){var r=e.layer,n=e.copy(r.hasDataDrivenIcon?l:a,c,r.hasDataDrivenText?h:f,p,s);n&&(d.push(n),n.updateSymbols())}}return y>=v}).then(function(){if(t.status===o.TileStatus.INVALID||t.status===o.TileStatus.INITIALIZED||0===a.sizeInBytes&&0===l.sizeInBytes&&0===c.sizeInBytes&&0===f.sizeInBytes&&0===h.sizeInBytes&&0===p.sizeInBytes)return{result:null,transferList:null};var e=[10,a.sizeInBytes,11,l.sizeInBytes,12,c.sizeInBytes,13,f.sizeInBytes,14,h.sizeInBytes,15,p.sizeInBytes],r=new Uint32Array(e),i=[];v=d.length;for(var n=0;n<v;n++){var s=d[n];i.push(s.layerIndex),i.push(3),i.push(s.sdfMarker?1:0);var u=s.markerPageMap;i.push(u.size),u.forEach(function(e,t){i.push(t),i.push(e[0]),i.push(e[1])});var y=s.glyphsPageMap;i.push(y.size),y.forEach(function(e,t){i.push(t),i.push(e[0]),i.push(e[1])})}var m=new Uint32Array(i),g=a.toBuffer(),x=l.toBuffer(),_=c.toBuffer(),b=f.toBuffer(),I=h.toBuffer(),w=p.toBuffer();return{result:{bufferDataInfo:r.buffer,bucketDataInfo:m.buffer,bufferData:[g,x,_,b,I,w]},transferList:[g,x,_,b,I,w,r.buffer,m.buffer]}}).catch(function(){return null})},e.prototype.setObsolete=function(){this.status=o.TileStatus.INVALID},e.prototype.getLayers=function(){return this._workerTileHandler.getLayers()},e.prototype.getWorkerTileHandler=function(){return this._workerTileHandler},e.prototype._parse=function(e,t){return 0===Object.keys(e).length?n.resolve([]):(this.status=o.TileStatus.MODIFIED,new d(e,this,t.client).parse())},e.pool=new i(e),e}()}.apply(null,i))||(e.exports=n)},2140:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(5),r(1),r(1648)],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return e.call(this,12)||this}return r(t,e),t.prototype.add=function(e,t,r){var i=this.array;i.push(e),i.push(t),i.push(r)},t}(n);t.TriangleIndexBuffer=o;var s=function(e){function t(){return e.call(this,4)||this}return r(t,e),t.prototype.add=function(e){this.array.push(e)},t}(n);t.PointElementMemoryBuffer=s}.apply(null,i))||(e.exports=n)},2141:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1517),r(545)],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r,i){this.left=e,this.top=t,this.right=r,this.bottom=i}return e.prototype.clone=function(){return new e(this.left,this.top,this.right,this.bottom)},e.prototype.move=function(e,t){this.left+=e,this.top+=t,this.right+=e,this.bottom+=t},e.prototype.rotate=function(e,t){var r=this.left,i=this.right,n=this.top,o=this.bottom,s=r*e-n*t,a=r*t+n*e,l=i*e-n*t,u=i*t+n*e,c=r*e-o*t,f=r*t+o*e,h=i*e-o*t,p=i*t+o*e;this.left=Math.min(s,l,c,h),this.top=Math.min(a,u,f,p),this.right=Math.max(s,l,c,h),this.bottom=Math.max(a,u,f,p)},e.overlaps=function(e,t){return e.right>t.left&&e.left<t.right&&e.bottom>t.top&&e.top<t.bottom},e}();t.Box=n;var o=function(){function e(e,t,r,i){this.anchor=e,this.corners=t,this.minzoom=r,this.maxzoom=i}return e.prototype.left=function(){return this.corners[0].x},e.prototype.right=function(){return this.corners[2].x},e.prototype.top=function(){return this.corners[1].y},e.prototype.bottom=function(){return this.corners[3].y},e}();t.Obstacle=o;var s=function(){function e(e,t,r){this.obstacles=[],this.mapAngle=e,this.padding=t,this.isScreenAligned=r,this.minzoom=a}return e.prototype.addBox=function(e,t,i,n,s,a,l){var u=t.left*i-this.padding,c=t.top*i-this.padding,f=t.right*i+this.padding,h=t.bottom*i+this.padding,p=[new r.Point(u,c),new r.Point(f,c),new r.Point(f,h),new r.Point(u,h)];if(0!==this.mapAngle){var d=Math.cos(this.mapAngle),v=Math.sin(this.mapAngle);(e=e.clone()).rotate(d,v)}if(this.isScreenAligned||(n+=this.mapAngle),0!==n){d=Math.cos(n),v=Math.sin(n);p[0].rotate(d,v),p[1].rotate(d,v),p[2].rotate(d,v),p[3].rotate(d,v);for(var y=0,m=1;m<4;m++)p[m].x<p[y].x?y=m:p[m].x===p[y].x&&p[m].y<p[y].y&&(y=m);if(y){var g=[];for(m=0;m<4;m++)g.push(p[(m+y)%4]);p=g}}if(s)for(var x=0,_=p;x<_.length;x++){_[x].move(s[0],s[1])}this.obstacles.push(new o(e,p,a,l))},e}();t.Footprint=s;var a=.5,l=function(){function e(){this._grid=[]}return e.prototype.setAngle=function(e){},e.prototype.reset=function(){this._grid=[]},e.prototype.add=function(t){for(var r=this._grid,i=0,n=t.obstacles;i<n.length;i++)for(var o=n[i],s=o.anchor,a=e._gridClamp(Math.min(o.left()+s.x,s.x)),l=e._gridClamp(Math.max(o.right()+s.x,s.x)),u=e._gridClamp(Math.min(o.top()+s.y,s.y)),c=e._gridClamp(Math.max(o.bottom()+s.y,s.y)),f=u;f<=c;f++)for(var h=a;h<=l;h++){var p=r[16*f+h];p||(p=r[16*f+h]=[]),p.push(o)}},e.prototype.getMinZoom=function(t,r,n,o){if(0===t.obstacles.length)return i.C_INFINITY;for(var s=r,a=this._grid,l=0,u=t.obstacles;l<u.length;l++)for(var c=u[l],f=c.anchor,h=e._gridClamp(Math.min(c.left()+f.x,f.x)),p=e._gridClamp(Math.max(c.right()+f.x,f.x)),d=e._gridClamp(Math.min(c.top()+f.y,f.y)),v=e._gridClamp(Math.max(c.bottom()+f.y,f.y)),y=d;y<=v;y++)for(var m=h;m<=p;m++){var g=a[16*y+m];if(g)for(var x=0,_=g;x<_.length;x++){var b=_[x];if(!(c.minzoom>=b.maxzoom||b.minzoom>=c.maxzoom)&&(s=e._calcPlacementZoom(c,b,s))>=2)return i.C_INFINITY}}return s<2?s:i.C_INFINITY},e._gridClamp=function(e){return i.clamp(e>>9,-7,8)},e._calcPlacementZoom=function(t,r,n){var o=r.anchor.x-t.anchor.x;if(0===o&&(t.right()<r.left()||r.right()<t.left()))return n;var s=r.anchor.y-t.anchor.y;if(0===s&&(t.bottom()<r.top()||r.bottom()<t.top()))return n;var a=i.C_INFINITY;if(0!==o){var l=(o>0?t.right()-r.left():t.left()-r.right())/o;l<a&&(a=l);var u=o>0?e._calcExtZoomX(t,r,l):e._calcExtZoomX(r,t,l);u<a&&(a=u)}if(0!==s){var c=(s>0?t.bottom()-r.top():t.top()-r.bottom())/s;c<a&&(a=c);var f=s>0?e._calcExtZoomY(t,r,c):e._calcExtZoomY(r,t,c);f<a&&(a=f)}return a<t.minzoom||a<r.minzoom?n:((a=Math.min(a,t.maxzoom,r.maxzoom))<n&&(a=n),a)},e._calcExtZoomX=function(e,t,r){var i,n,o,s;if(e.anchor.y+e.corners[2].y/r<t.anchor.y+t.corners[0].y/r){var a=e.corners[2].x-e.corners[3].x,l=e.corners[2].y-e.corners[3].y,u=t.corners[1].x-t.corners[0].x;a*(t.corners[1].y-t.corners[0].y)-l*u>=0?e.anchor.y+e.corners[3].y/r<t.anchor.y+t.corners[0].y/r?(i=e.corners[3],n=t.corners[0],o=t.corners[1],s=1):(i=t.corners[0],n=e.corners[3],o=e.corners[2],s=-1):e.anchor.y+e.corners[2].y/r>t.anchor.y+t.corners[1].y/r?(i=e.corners[2],n=t.corners[0],o=t.corners[1],s=1):(i=t.corners[1],n=e.corners[3],o=e.corners[2],s=-1)}else{a=e.corners[2].x-e.corners[1].x,l=e.corners[2].y-e.corners[1].y,u=t.corners[3].x-t.corners[0].x;a*(t.corners[3].y-t.corners[0].y)-l*u<0?e.anchor.y+e.corners[1].y/r>t.anchor.y+t.corners[0].y/r?(i=e.corners[1],n=t.corners[0],o=t.corners[3],s=1):(i=t.corners[0],n=e.corners[1],o=e.corners[2],s=-1):e.anchor.y+e.corners[2].y/r<t.anchor.y+t.corners[3].y/r?(i=e.corners[2],n=t.corners[0],o=t.corners[3],s=1):(i=t.corners[3],n=e.corners[1],o=e.corners[2],s=-1)}var c=o.x-n.x,f=o.y-n.y;return s*((i.y-n.y)*c-(i.x-n.x)*f)/((e.anchor.x-t.anchor.x)*f-(e.anchor.y-t.anchor.y)*c)},e._calcExtZoomY=function(e,t,r){var i,n,o,s;if(e.anchor.x+e.corners[3].x/r<t.anchor.x+t.corners[1].x/r){var a=e.corners[3].x-e.corners[2].x,l=e.corners[3].y-e.corners[2].y,u=t.corners[0].x-t.corners[1].x;a*(t.corners[0].y-t.corners[1].y)-l*u<0?e.anchor.x+e.corners[2].x/r<t.anchor.x+t.corners[1].x/r?(i=e.corners[2],n=t.corners[1],o=t.corners[0],s=1):(i=t.corners[1],n=e.corners[2],o=e.corners[3],s=-1):e.anchor.x+e.corners[3].x/r>t.anchor.x+t.corners[0].x/r?(i=e.corners[3],n=t.corners[1],o=t.corners[0],s=1):(i=t.corners[0],n=e.corners[2],o=e.corners[3],s=-1)}else{a=e.corners[3].x-e.corners[0].x,l=e.corners[3].y-e.corners[0].y,u=t.corners[2].x-t.corners[1].x;a*(t.corners[2].y-t.corners[1].y)-l*u>0?e.anchor.x+e.corners[0].x/r>t.anchor.x+t.corners[1].x/r?(i=e.corners[0],n=t.corners[1],o=t.corners[2],s=1):(i=t.corners[1],n=e.corners[0],o=e.corners[3],s=-1):e.anchor.x+e.corners[3].x/r<t.anchor.x+t.corners[2].x/r?(i=e.corners[3],n=t.corners[1],o=t.corners[2],s=1):(i=t.corners[2],n=e.corners[0],o=e.corners[3],s=-1)}var c=o.x-n.x,f=o.y-n.y;return s*((i.y-n.y)*c-(i.x-n.x)*f)/((e.anchor.x-t.anchor.x)*f-(e.anchor.y-t.anchor.y)*c)},e}();t.ConflictEngine=l}.apply(null,i))||(e.exports=n)},2142:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1766),r(1520),r(9),r(1557),r(1670),r(1767),r(1768),r(2143),r(1769),r(1770),r(2144),r(1772)],void 0===(n=function(e,t,r,i,n,o,s,a,l,u,c,f,h,p){return function(){function e(e,t,r){this._pbfTiles={},this._tileClippers={},this._client=r,this._tile=t,this._layers=t.getLayers();var n=t.tileKey.split("/").map(parseFloat),s=n[0],a=n[1],l=n[2];this._level=s;for(var u=0,c=Object.keys(e);u<c.length;u++){var f=c[u],h=e[f];if(this._pbfTiles[f]=new i(new Uint8Array(h.protobuff),new DataView(h.protobuff)),h.refKey){var p=s-h.refKey.split("/").map(parseFloat)[0];if(p>0){var d=(1<<p)-1,v=a&d,y=l&d;this._tileClippers[f]=new o.TileClipper(p,v,y)}}this._tileClippers[f]||(this._tileClippers[f]=new o.SimpleBuilder)}}return e.prototype.parse=function(){for(var e,t=this,i=this._parseTileData(this._pbfTiles),o=this._layers,a=o.length,l=this._level,c=[],f=this._tileClippers,h={},p={},d=a-1;d>=0;d--)if(!((e=o[d]).minzoom&&l<e.minzoom||e.maxzoom&&l>=e.maxzoom||e.layout&&"none"===e.layout.visibility))if(0!==e.type){if(i[e.source]&&f[e.source]){var v=i[e.source],y=f[e.source],m=e.sourceLayer,g=v[m];if(g){var x=p[e.source];if(x||(x=p[e.source]=new Set),x.add(e.sourceLayer),I=this._createBucket(e)){I.layerIndex=d,I.layerExtent=g.extent,I.tileClipper=y;var _=h[e.source];_||(_=h[e.source]={});var b=_[m];b||(b=_[m]=[]),b.push(I)}}}}else{var I;(I=this._createBucket(e)).layerIndex=d,c.push(I)}for(var w=10*this._level,C=10*(this._level+1),T=[],S=[],M=[],P=[],A=new Set,B={},E=[],D=[],F=0,V=Object.keys(p);F<V.length;F++){!function(e){p[e].forEach(function(t){E.push(t),D.push(e)})}(V[F])}var L=0,R=0,N=E.length;return r(function(){if(t._tile.status===s.TileStatus.INVALID)return!0;switch(L){case 0:if(R<N){var e=D[R],r=E[R++];if(!i[e]||!h[e])break;var n=i[e][r];if(!(_=h[e][r])||0===_.length)break;for(var o=n.getData();o.next(2);){var a=new u(o.getMessage(),n),l=a.values;if(l){var c=l._minzoom;if(c&&c>=C)continue;var f=l._maxzoom;if(f&&f<=w)continue}for(var p=0,d=_;p<d.length;p++){(F=d[p]).pushFeature(a)}}}else{for(var v=t._tile,y=0,m=Object.keys(h);y<m.length;y++){e=m[y];var g=h[e];for(var x in g)for(var _,b=0,I=_=g[x];b<I.length;b++){var F;(F=I[b]).hasFeatures()&&(3===F.layer.type?(T.push(F),v.addBucket(F)):F.layer.refLayerId?M.push(F):(S.push(F),P[F.layer.id]=F))}}L=1,R=0,N=T.length}break;case 1:if(R<N){var V=T[R++];V.getResources(V.tileClipper,A,B)}else L=2}return 2===L}).then(function(){if(t._tile.status===s.TileStatus.INVALID)return[];var e,i,o=[],a=t._tile.getWorkerTileHandler();for(var l in A.size>0&&(e=a.fetchSprites(A,t._client),o.push(e)),B){var u=B[l];u.size>0&&(i=a.fetchGlyphs(t._tile.tileKey,l,u,t._client),o.push(i))}return n.all(o).then(function(e){if(t._tile.status===s.TileStatus.INVALID)return[];var i=0,n=0,o=S.length;return r(function(){if(t._tile.status===s.TileStatus.INVALID)return!0;switch(i){case 0:if(n<o)(a=S[n++]).processFeatures(a.tileClipper,t._tile),c.push(a);else i=1,n=0,o=M.length;break;case 1:for(var e=0,r=M;e<r.length;e++){var a=r[e],l=P[a.layer.refLayerId];l&&(l.assignBufferInfo(a),c.push(a))}i=2,n=0,o=T.length;break;case 2:if(n<o)(a=T[n++]).processFeatures(a.tileClipper,t._tile),c.push(a);else i=3}return 3===i}).then(function(){return c.sort(function(e,t){return e.layerIndex-t.layerIndex}),c})}).catch(function(e){return n.reject(new Error(e))})}).catch(function(e){return n.reject(new Error(e))})},e.prototype._parseTileData=function(e){for(var t={},r=0,i=Object.keys(e);r<i.length;r++){for(var n=i[r],o=e[n],s={};o.next();)switch(o.tag()){case 3:var a=new h(o.getMessage());s[a.name]=a;break;default:o.skip()}t[n]=s}return t},e.prototype._createBucket=function(e){switch(e.type){case 0:return this._createBackgroundBucket(e);case 1:return this._createFillBucket(e);case 2:return this._createLineBucket(e);case 4:return this._createCircleBucket(e);case 3:return this._createSymbolBucket(e)}},e.prototype._createBackgroundBucket=function(e){return new a(e,this._level)},e.prototype._createFillBucket=function(e){var t=this._tile;return new c(e,this._level,e.hasDataDrivenFill?t.fillDDVertexBuffer:t.fillVertexBuffer,t.fillIndexBuffer,e.hasDataDrivenOutline?t.outlineDDVertexBuffer:t.outlineVertexBuffer,t.outlineIndexBuffer)},e.prototype._createLineBucket=function(e){var t=this._tile;return new f(e,this._level,e.hasDataDrivenLine?t.lineDDVertexBuffer:t.lineVertexBuffer,t.lineIndexBuffer)},e.prototype._createCircleBucket=function(e){var t=this._tile;return new l(e,this._level,t.circleVertexBuffer,t.circleIndexBuffer)},e.prototype._createSymbolBucket=function(e){var t=this._tile;return new p(e,this._level,e.hasDataDrivenIcon?t.iconDDVertexBuffer:t.iconVertexBuffer,t.iconIndexBuffer,e.hasDataDrivenText?t.textDDVertexBuffer:t.textVertexBuffer,t.textIndexBuffer,t.placementEngine,t.getWorkerTileHandler())},e}()}.apply(null,i))||(e.exports=n)},2143:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1517)],void 0===(n=function(e,t,r){return function(){function e(e,t){this.values={};for(var r=t.keys,i=t.values;e.next();)switch(e.tag()){case 1:this.id=e.getUInt64();break;case 2:for(var n=e.getMessage(),o=this.values;!n.empty();){var s=n.getUInt32(),a=n.getUInt32();o[r[s]]=i[a]}break;case 3:this.type=e.getUInt32();break;case 4:this._pbfGeometry=e.getMessage();break;default:e.skip()}}return e.prototype.getGeometry=function(e){if(void 0!==this._geometry)return this._geometry;var t,i,n,o=this._pbfGeometry;e?e.reset(this.type):t=[];for(var s=1,a=0,l=0,u=0;!o.empty();){if(0===a){var c=o.getUInt32();s=7&c,a=c>>3}switch(a--,s){case 1:l+=o.getSInt32(),u+=o.getSInt32(),e?e.moveTo(l,u):(i&&t.push(i),(i=[]).push(new r.Point(l,u)));break;case 2:l+=o.getSInt32(),u+=o.getSInt32(),e?e.lineTo(l,u):i.push(new r.Point(l,u));break;case 7:e?e.close():i&&!i[0].equals(l,u)&&i.push(i[0].clone());break;default:throw new Error("Invalid path operation")}}return e?n=e.result():(i&&t.push(i),n=t),this._geometry=n,n},e}()}.apply(null,i))||(e.exports=n)},2144:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(t){for(this.extent=4096,this.keys=[],this.values=[],this._pbfLayer=t.clone();t.next();)switch(t.tag()){case 1:this.name=t.getString();break;case 3:this.keys.push(t.getString());break;case 4:this.values.push(e._parseValue(t.getMessage()));break;case 5:this.extent=t.getUInt32();break;default:t.skip()}}return e.prototype.getData=function(){return this._pbfLayer},e._parseValue=function(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getInt64();case 5:return e.getUInt64();case 6:return e.getSInt64();case 7:return e.getBool();default:e.skip()}return null},e}()}.apply(null,i))||(e.exports=n)},2145:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(5),r(1),r(545),r(1648)],void 0===(n=function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0});var s=new Float32Array(1),a=new Uint32Array(s.buffer),l=function(e){function t(t){var r=e.call(this,t?20:12)||this;return r._isDataDriven=t,r}return r(t,e),t.prototype.isDataDriven=function(){return this._isDataDriven},t.prototype.add=function(e,t,r,i,n,l,u,c){var f=this.array,h=o.i1616to32(e,t);if(f.push(h),h=o.i8888to32(Math.round(31*r),Math.round(31*i),Math.round(31*n),Math.round(31*l)),f.push(h),h=o.i1616to32(u,0),f.push(h),this._isDataDriven){if(!c)throw new Error("Expecting data driven values.");var p=c.color,d=p[3]*c.opacity*255;f.push(o.i8888to32(p[0]*d,p[1]*d,p[2]*d,d)),s[0]=c.size,f.push(a[0])}},t}(o);t.LineVertexBuffer=l;var u=function(e){function t(t){var r=e.call(this,t?8:4)||this;return r._isDataDriven=t,r}return r(t,e),t.prototype.isDataDriven=function(){return this._isDataDriven},t.prototype.add=function(e,t,r){var i=this.array;if(i.push(o.i1616to32(e,t)),this._isDataDriven){if(!r)throw new Error("Expecting data driven values.");var n=r.color,s=n[3]*r.opacity*255;i.push(o.i8888to32(n[0]*s,n[1]*s,n[2]*s,s))}},t}(o);t.FillVertexBuffer=u;var c=function(e){function t(t){var r=e.call(this,t?12:8)||this;return r._isDataDriven=t,r}return r(t,e),t.prototype.isDataDriven=function(){return this._isDataDriven},t.prototype.add=function(e,t,r,i,n,s,a){var l=this.array,u=this.index,c=o.i1616to32(e,t);if(l.push(c),c=o.i8888to32(Math.round(15*r),Math.round(15*i),n,s),l.push(c),this._isDataDriven){if(!a)throw new Error("Expecting data driven values.");var f=a.color,h=f[3]*a.opacity*255;l.push(o.i8888to32(f[0]*h,f[1]*h,f[2]*h,h))}return u},t}(o);t.OutlineVertexBuffer=c;var f=function(e){function t(t){var r=e.call(this,t?24:16)||this;return r._isDataDriven=t,r}return r(t,e),t.prototype.isDataDriven=function(){return this._isDataDriven},t.prototype.add=function(e,t,r,i,l,u,c,f,h,p,d){var v=this.array,y=o.i1616to32(e,t);if(v.push(y),y=o.i1616to32(Math.round(8*r),Math.round(8*i)),v.push(y),y=o.i8888to32(l/4,u/4,0,0),v.push(y),y=o.i8888to32(Math.ceil(10*p),n.radToByte(c),10*f,Math.min(10*h,255)),v.push(y),this._isDataDriven){if(!d)throw new Error("Expecting data driven values.");var m=d.color,g=m[3]*d.opacity*255;v.push(o.i8888to32(m[0]*g,m[1]*g,m[2]*g,g)),s[0]=d.size,v.push(a[0])}},t}(o);t.SymbolVertexBuffer=f;var h=function(e){function t(){return e.call(this,16)||this}return r(t,e),t.prototype.add=function(e,t,r,i,n,s,a,l,u,c,f){var h=this.array,p=o.i1616to32(2*e+r,2*t+i);h.push(p);var d=s[3]*a*255;p=o.i8888to32(s[0]*d,s[1]*d,s[2]*d,d),h.push(p);var v=c[3]*f*255;p=o.i8888to32(c[0]*v,c[1]*v,c[2]*v,v),h.push(p),p=o.i8888to32(Math.min(32*l,255),Math.min(4*u,255),Math.min(n,255),0),h.push(p)},t}(o);t.CircleVertexBuffer=h}.apply(null,i))||(e.exports=n)},2146:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(11),r(9)],void 0===(n=function(e,t,i,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createProcessor=function(e,t){var o;return"heatmap"===e?o=n.create(function(e){return r.e(69).then(function(){var t=[r(2232)];e.apply(null,t)}.bind(this)).catch(r.oe)}):"symbol"===e&&(o=n.create(function(e){return Promise.all([r.e(6),r.e(7),r.e(68)]).then(function(){var t=[r(2233)];e.apply(null,t)}.bind(this)).catch(r.oe)})),o.then(function(e){return e.default}).then(function(e){var r=t.serviceAndViewInfo,n=t.remoteClient,o=t.tileStore;return new e(i({},r,{tileStore:o,remoteClient:n}))})}}.apply(null,i))||(e.exports=n)}}]);