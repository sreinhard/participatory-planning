(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/2d/engine/webgl/enums":1511,"esri/views/2d/engine/webgl/Utils":1517,"esri/views/2d/engine/webgl/number":1528,"esri/views/2d/engine/webgl/color":1537,"esri/views/2d/engine/webgl/WGLDisplayRecord":1574,"esri/views/2d/engine/webgl/SymbolProperties":1620,"esri/views/2d/engine/webgl/util/serializationUtils":1622,"esri/views/2d/engine/webgl/visualVariablesUtils":1626,"esri/views/2d/engine/webgl/WGLDisplayObject":1667,"esri/views/2d/engine/webgl/collisions/BoundingBox":1668,"esri/views/2d/engine/webgl/util/Writer":1669,"esri/views/2d/engine/webgl/collisions/Metric":1737,"esri/views/2d/engine/webgl/mesh/VertexBuffer":1738,"esri/views/2d/engine/webgl/MeshData":2020})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1511:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){var r,i,n,s,o,a,u,l,h,c;Object.defineProperty(t,"__esModule",{value:!0}),(r=t.WGLGeometryType||(t.WGLGeometryType={}))[r.FILL=0]="FILL",r[r.LINE=1]="LINE",r[r.MARKER=2]="MARKER",r[r.TEXT=3]="TEXT",r[r.LABEL=4]="LABEL",(i=t.WGLGeometryTransactionStatus||(t.WGLGeometryTransactionStatus={}))[i.SUCCEEDED=0]="SUCCEEDED",i[i.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY",(n=t.WGLDrawPhase||(t.WGLDrawPhase={}))[n.NONE=0]="NONE",n[n.MAP=1]="MAP",n[n.LABEL=2]="LABEL",n[n.LABEL_ALPHA=4]="LABEL_ALPHA",n[n.HITTEST=8]="HITTEST",n[n.HIGHLIGHT=16]="HIGHLIGHT",n[n.CLIP=32]="CLIP",n[n.DEBUG=64]="DEBUG",n[n.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES",(s=t.VVType||(t.VVType={}))[s.SIZE=0]="SIZE",s[s.COLOR=1]="COLOR",s[s.OPACITY=2]="OPACITY",s[s.ROTATION=3]="ROTATION",(o=t.WGLVVFlag||(t.WGLVVFlag={}))[o.NONE=0]="NONE",o[o.OPACITY=1]="OPACITY",o[o.COLOR=2]="COLOR",o[o.ROTATION=4]="ROTATION",o[o.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",o[o.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",o[o.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",o[o.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE",(a=t.WGLVVTarget||(t.WGLVVTarget={}))[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",a[a.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",a[a.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE",(u=t.CapType||(t.CapType={}))[u.UNKNOWN=0]="UNKNOWN",u[u.BUTT=1]="BUTT",u[u.ROUND=2]="ROUND",u[u.SQUARE=3]="SQUARE",(l=t.JoinType||(t.JoinType={}))[l.UNKNOWN=0]="UNKNOWN",l[l.MITER=1]="MITER",l[l.BEVEL=2]="BEVEL",l[l.ROUND=3]="ROUND",(h=t.Alignment||(t.Alignment={}))[h.SCREEN=0]="SCREEN",h[h.MAP=1]="MAP",(c=t.MosaicType||(t.MosaicType={}))[c.SPRITE=0]="SPRITE",c[c.GLYPH=1]="GLYPH"}.apply(null,i))||(e.exports=n)},1517:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(11),r(134),r(156),r(13),r(10),r(14),r(560),r(81),r(1537),r(1511),r(1620),r(12),r(53)],void 0===(n=function(e,t,r,i,n,s,o,a,u,l,h,c,f,p,_){var d;Object.defineProperty(t,"__esModule",{value:!0});var v=o.getLogger("esri.views.2d.engine.webgl.Utils");function E(e){for(var t={},r=0,i=e;r<i.length;r++){var n=i[r];t[n.name]=n.strideInBytes}return t}t.C_HITTEST_SEARCH_SIZE=4,t.C_VBO_GEOMETRY="geometry",t.C_VBO_PERINSTANCE="per_instance",t.C_VBO_PERINSTANCE_VV="per_instance_vv",t.C_VBO_VISIBILITY="visibility",t.C_VBO_VISIBILITY_RANGE="visibilityRange",t.C_ICON_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:24,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_ICON_VERTEX_DEF_VV=[{name:t.C_VBO_GEOMETRY,strideInBytes:40,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_FILL_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:32,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_FILL_VERTEX_DEF_VV=[{name:t.C_VBO_GEOMETRY,strideInBytes:40,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_FILL_VERTEX_DEF_DD=[{name:t.C_VBO_GEOMETRY,strideInBytes:40,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_LINE_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:32,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_LINE_VERTEX_DEF_VV=[{name:t.C_VBO_GEOMETRY,strideInBytes:44,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_TEXT_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:24,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_TEXT_VERTEX_DEF_VV=[{name:t.C_VBO_GEOMETRY,strideInBytes:40,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_LABEL_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:24,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0},{name:t.C_VBO_VISIBILITY_RANGE,strideInBytes:2,divisor:0}],t.C_ICON_STRIDE_SPEC=E(t.C_ICON_VERTEX_DEF),t.C_ICON_STRIDE_SPEC_VV=E(t.C_ICON_VERTEX_DEF_VV),t.C_FILL_STRIDE_SPEC=E(t.C_FILL_VERTEX_DEF),t.C_FILL_STRIDE_SPEC_VV=E(t.C_FILL_VERTEX_DEF_VV),t.C_FILL_STRIDE_SPEC_DD=E(t.C_FILL_VERTEX_DEF_DD),t.C_LINE_STRIDE_SPEC=E(t.C_LINE_VERTEX_DEF),t.C_LINE_STRIDE_SPEC_VV=E(t.C_LINE_VERTEX_DEF_VV),t.C_TEXT_STRIDE_SPEC=E(t.C_TEXT_VERTEX_DEF),t.C_TEXT_STRIDE_SPEC_VV=E(t.C_TEXT_VERTEX_DEF_VV),t.C_LABEL_STRIDE_SPEC=E(t.C_LABEL_VERTEX_DEF),t.getStrides=function(e,r,i){switch(e){case c.WGLGeometryType.MARKER:return r?t.C_ICON_STRIDE_SPEC_VV:t.C_ICON_STRIDE_SPEC;case c.WGLGeometryType.FILL:return i?t.C_FILL_STRIDE_SPEC_DD:r?t.C_FILL_STRIDE_SPEC_VV:t.C_FILL_STRIDE_SPEC;case c.WGLGeometryType.LINE:return r?t.C_LINE_STRIDE_SPEC_VV:t.C_LINE_STRIDE_SPEC;case c.WGLGeometryType.TEXT:return r?t.C_TEXT_STRIDE_SPEC_VV:t.C_TEXT_STRIDE_SPEC;case c.WGLGeometryType.LABEL:return t.C_LABEL_STRIDE_SPEC}return null};var y=[t.C_VBO_GEOMETRY,t.C_VBO_VISIBILITY],I=[t.C_VBO_GEOMETRY,t.C_VBO_VISIBILITY],T=[t.C_VBO_GEOMETRY,t.C_VBO_VISIBILITY],m=[t.C_VBO_GEOMETRY,t.C_VBO_VISIBILITY],L=[t.C_VBO_GEOMETRY,t.C_VBO_VISIBILITY,t.C_VBO_VISIBILITY_RANGE];function C(e){switch(e){case c.WGLGeometryType.MARKER:return y;case c.WGLGeometryType.FILL:return I;case c.WGLGeometryType.LINE:return T;case c.WGLGeometryType.TEXT:return m;case c.WGLGeometryType.LABEL:return L}return null}function S(e){switch(e%4){case 0:case 2:return 4;case 1:case 3:return 1}}function V(e){switch(e){case"esriSMS":return"simple-marker";case"esriPMS":return"picture-marker";case"esriSLS":return"simple-line";case"esriPLS":return"picture-line";case"esriSFS":return"simple-fill";case"esriPFS":return"picture-fill";case"esriTS":return"text"}return e}function g(e){return"string"==typeof e}t.getNamedBuffers=C,t.strideToPackingFactor=S,t.allocateTypedArrayBuffer=function(e,t){switch(t%4){case 0:case 2:return new Uint32Array(Math.floor(e*t/4));case 1:case 3:return new Uint8Array(e*t)}},t.allocateTypedArrayBufferwithData=function(e,t){switch(t%4){case 0:case 2:return new Uint32Array(e);case 1:case 3:return new Uint8Array(e)}},t.normalizeSymbolType=V,t.isMarkerSymbol=function(e){var t=V(e.type);if(t){switch(t){case"simple-marker":case"picture-marker":case"CIMPointSymbol":return!0}return!1}},t.isFillSymbol=function(e){var t=V(e.type);if(t){switch(t){case"simple-fill":case"picture-fill":case"CIMPolygonSymbol":return!0}return!1}},t.isLineSymbol=function(e){var t=V(e.type);if(t){switch(t){case"simple-line":case"picture-line":case"CIMLineSymbol":return!0}return!1}},t.isPictureSymbol=function(e){var t=V(e.type);if(t){switch(t){case"picture-marker":case"picture-line":case"picture-fill":return!0}return!1}return!1},t.isTextSymbol=function(e){var t=V(e.type);if(t){switch(t){case"text":case"CIMTextSymbol":return!0}return!1}},t.getTextProperties=function(e){return f.TextProperties.pool.acquire(e.color?h.copyAndPremultiply(e.color):[255,255,255,255],e.haloColor?h.copyAndPremultiply(e.haloColor):[255,255,255,255],a.pt2px(e.haloSize),a.pt2px(e.font.size),e.angle*Math.PI/180,e.xoffset/e.font.size,e.yoffset/e.font.size,"left"===e.horizontalAlignment?0:"right"===e.horizontalAlignment?1:.5,"top"===e.verticalAlignment?0:"bottom"===e.verticalAlignment?1:.5)},t.isDefined=function(e){return null!=e},t.isNumber=function(e){return"number"==typeof e},t.isString=g,t.isStringOrNull=function(e){return null==e||g(e)},t.lerp=function(e,t,r){return e+(t-e)*r};var O=function(){function e(){this._arr=[],this._push=this._push.bind(this)}return e.prototype._push=function(e,t){this._arr.push(t)},e.prototype.getKeys=function(e){return this._arr.length=0,e&&e.forEach(this._push),this._arr},e}();t.KeysGetter=O;var x=function(){function e(){this._arr=[],this._push=this._push.bind(this)}return e.prototype._push=function(e,t){this._arr.push(e)},e.prototype.getValues=function(e){return this._arr.length=0,e&&e.forEach(this._push),this._arr},e}();function b(e){var t={};switch(e){case"esriGeometryPoint":return function(e,r,i,n){return u.hydratePoint(r,t,e,i,n)};case"esriGeometryPolygon":return function(e,r,i,n){return u.hydratePolygon(r,t,e,i,n)};case"esriGeometryPolyline":return function(e,r,i,n){return u.hydratePolyline(r,t,e,i,n)};case"esriGeometryMultipoint":return function(e,r,i,n){return u.hydrateMultipoint(r,t,e,i,n)};default:return v.error(new s("mapview-arcade","Unable to handle geometryType: "+e)),function(e,t,r,i){return e}}}t.ValuesGetter=x,t.getCapType=function(e,t){switch(e){case"butt":return c.CapType.BUTT;case"round":return t?c.CapType.SQUARE:c.CapType.ROUND;case"square":return c.CapType.SQUARE;default:return v.error(new s("mapview-invalid-type","Cap type "+e+" is not a valid option. Defaulting to round")),c.CapType.ROUND}},t.getJoinType=function(e){switch(e){case"miter":return c.JoinType.MITER;case"bevel":return c.JoinType.BEVEL;case"round":return c.JoinType.ROUND;default:return v.error(new s("mapview-invalid-type","Join type "+e+" is not a valid option. Defaulting to round")),c.JoinType.ROUND}},t.getVVType=function(e){switch(e){case"opacity":return c.VVType.OPACITY;case"color":return c.VVType.COLOR;case"rotation":return c.VVType.ROTATION;case"size":return c.VVType.SIZE;default:return v.error("Cannot interpret unknown vv: "+e),null}},t.createHydrateFactory=b,t.getTransformParams=function(e){return{transform:e.transform,hasZ:e.hasZ,hasM:e.hasM}},t.createArcadeFunction=function(e,t,r){var s=t.fields,o=t.spatialReference,a=t.hasGeometryExpr,u=t.geometryType,h=l.createFunction(e),c=new n,f=new i({viewingMode:null,scale:null}),p={},_={vars:{$feature:c,$view:null},spatialReference:o},d={fields:s},v=b(u);return function(e,t,i){if(a){var n=t.transform,s=t.hasZ,u=t.hasM,E=v(e.geometry,n,s,u);E.spatialReference=o,c.repurposeFromGraphicLikeObject(E,e.attributes,d)}else c.repurposeFromGraphicLikeObject(e.geometry,e.attributes,d);i?((_.vars.$view=f).attributes.viewingMode=i.viewingMode,f.attributes.scale=i.scale):_.vars.$view=p;var y=l.executeFunction(h,_);return r?r(y):y}},t.copyMeshData=function(e,t,r,i,n,s,o){for(var a in s)for(var u=s[a].stride,l=S(u),h=s[a].data,c=r[a].data,f=u*n.vertexCount/l,p=u*e/l,_=u*n.vertexFrom/l,d=0;d<f;++d)c[d+p]=h[d+_];var v=n.indexCount;for(d=0;d<v;++d)i[d+t]=o[d+n.indexFrom]-n.vertexFrom+e},t.C_VBO_INFO=((d={})[t.C_VBO_GEOMETRY]=35044,d[t.C_VBO_VISIBILITY]=35044,d[t.C_VBO_VISIBILITY_RANGE]=35048,d),t.createGeometryData=function(e,t){for(var r=[],i=0;i<5;++i){for(var n={},s=0,o=C(i);s<o.length;s++){var a=o[s];n[a]={data:t(i,a)}}r.push({data:e(i),buffers:n})}return r},t.resampleHermite=function(e,t,r,i,n,s,o){void 0===o&&(o=!0);for(var a=t/n,u=r/s,l=Math.ceil(a/2),h=Math.ceil(u/2),c=0;c<s;c++)for(var f=0;f<n;f++){for(var p=4*(f+(o?s-c-1:c)*n),_=0,d=0,v=0,E=0,y=0,I=0,T=0,m=(c+.5)*u,L=Math.floor(c*u);L<(c+1)*u;L++)for(var C=Math.abs(m-(L+.5))/h,S=(f+.5)*a,V=C*C,g=Math.floor(f*a);g<(f+1)*a;g++){var O=Math.abs(S-(g+.5))/l,x=Math.sqrt(V+O*O);-1<=x&&x<=1&&0<(_=2*x*x*x-3*x*x+1)&&(T+=_*e[3+(O=4*(g+L*t))],v+=_,e[O+3]<255&&(_=_*e[O+3]/250),E+=_*e[O],y+=_*e[O+1],I+=_*e[O+2],d+=_)}i[p]=E/d,i[p+1]=y/d,i[p+2]=I/d,i[p+3]=T/v}},t.createTextureFromTexelData=function(e,t){var r,i;return i=p.isPowerOfTwo(t.width)&&p.isPowerOfTwo(t.height)?(r=!0,9987):(r=!1,9729),new _(e,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,hasMipmap:r,samplingMode:i,wrapMode:33071,flipped:!0},t)},t.geometryToMappedGeometry=function(e){return{vertexFrom:void 0,vertexTo:void 0,geometry:e}};var w=new Map;t.createProgramDescriptor=function(e,t){if(!w.has(e)){var i=function(e){var t={},i=function(i){var n=e[i],s=0;t[i]=n.map(function(e){var t=r({},e,{normalized:e.normalized||!1,divisor:e.divisor||0,offset:s,stride:0});return s+=e.count*function(e){switch(e){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5126:case 5124:case 5125:return 4}}(e.type),t}),t[i].forEach(function(e){return e.stride=s})};for(var n in e)i(n);return t}(t),n={strides:function(e){var t={};for(var r in e){var i=e[r];t[r]=i.length?i[0].stride:0}return t}(i),bufferLayouts:i,attributes:function(e){var t={};for(var r in e)for(var i=0,n=e[r];i<n.length;i++){var s=n[i];t[s.name]=s.location}return t}(t)};w.set(e,n)}return w.get(e)}}.apply(null,i))||(e.exports=n)},1528:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(10)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=new Float32Array(1),n=new Uint32Array(i.buffer),s=r.getLogger("esri.views.2d.engine.webgl.number");function o(e,t,r){var i=Math.max(Math.min(e,r),t);return i!==e&&s.warn("Value of "+e+" exceeded rendering limitations and was clamped to "+i),i}t.i8=function(e){return o(e,-128,127)},t.i16=function(e){return o(e,-32768,32767)},t.i32=function(e){return o(e,-2147483648,2147483647)},t.u8=function(e){return o(e,0,255)},t.u16=function(e){return o(e,0,65535)},t.u32=function(e){return o(e,0,4294967295)},t.nextHighestPowerOfTwo=function(e){var t=e;t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16;var r=++t>>1;return e-r<t-e?r:t},t.toUint32=function(e){return i[0]=e,n[0]},t.toFloat32=function(e){return n[0]=e,i[0]},t.i1616to32=function(e,t){return 65535&e|t<<16},t.i8888to32=function(e,t,r,i){return 255&e|(255&t)<<8|(255&r)<<16|i<<24},t.i8816to32=function(e,t,r){return 255&e|(255&t)<<8|r<<16},t.numTo32=function(e){return 0|e}}.apply(null,i))||(e.exports=n)},1537:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1528)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.white=[255,255,255,1];var i=[0,0,0,0];function n(e,t){return Array.isArray(t)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]):(e[0]=t.r,e[1]=t.g,e[2]=t.b,e[3]=t.a),e}function s(e,t,r){void 0===t&&(t=0),void 0===r&&(r=!1);var i=e[t+3];return e[t+0]*=i,e[t+1]*=i,e[t+2]*=i,r||(e[t+3]*=255),e}t.premultiplyAlpha=s,t.copyAndPremultiply=function(e){return s(n([],e))},t.premultiplyAlphaUint32=function(e){return s(n(i,e)),r.i8888to32(i[0],i[1],i[2],i[3])},t.premultiplyAlphaRGBA=function(e){var t=e.r,i=e.g,n=e.b,s=e.a,o=t*s,a=i*s,u=n*s,l=255*s;return r.i8888to32(o,a,u,l)}}.apply(null,i))||(e.exports=n)},1574:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2020),r(1517)],void 0===(n=function(e,t,r,i){return function(){function e(e,t,r,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this.id=e,this.geometryType=t,this.materialKey=r,this.minZoom=i,this.maxZoom=n,this.meshData=null,this.symbolLevel=0,this.zOrder=0,this.vertexFrom=0,this.vertexCount=0,this.indexFrom=0,this.indexCount=0}return Object.defineProperty(e.prototype,"sortKey",{get:function(){return void 0===this._sortKey&&this._computeSortKey(),this._sortKey},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return this.copy()},e.prototype.copy=function(){var t=new e(this.id,this.geometryType,this.materialKey);return t.vertexFrom=this.vertexFrom,t.vertexCount=this.vertexCount,t.indexFrom=this.indexFrom,t.indexCount=this.indexCount,t.zOrder=this.zOrder,t.symbolLevel=this.symbolLevel,t.meshData=this.meshData,t.minZoom=this.minZoom,t.maxZoom=this.maxZoom,t},e.prototype.setMeshDataFromBuffers=function(e,t,n){var s=new r;for(var o in t){for(var a=t[o].stride,u=t[o].data,l=[],h=i.strideToPackingFactor(a),c=0;c<a*e.vertexCount/h;++c)l[c]=u[c+a*e.vertexFrom/h];s.vertexData.set(o,l)}for(c=s.indexData.length=0;c<e.indexCount;++c)s.indexData[c]=n[c+e.indexFrom]-e.vertexFrom;s.vertexCount=e.vertexCount,this.meshData=s},e.prototype.readMeshDataFromBuffers=function(e,t){for(var n in this.meshData?this.meshData.clear():this.meshData=new r,e){for(var s=e[n].stride,o=e[n].data,a=[],u=i.strideToPackingFactor(s),l=0;l<s*this.vertexCount/u;++l)a[l]=o[l+s*this.vertexFrom/u];this.meshData.vertexData.set(n,a)}for(l=this.meshData.indexData.length=0;l<this.indexCount;++l)this.meshData.indexData[l]=t[l+this.indexFrom]-this.vertexFrom;this.meshData.vertexCount=this.vertexCount},e.prototype.writeMeshDataToBuffers=function(e,t,r,n){for(var s in t)for(var o=t[s].stride,a=this.meshData.vertexData.get(s),u=t[s].data,l=i.strideToPackingFactor(o),h=0;h<o*this.meshData.vertexCount/l;++h)u[h+o*e/l]=a[h];for(h=0;h<this.meshData.indexData.length;++h)n[h+r]=this.meshData.indexData[h]+e;this.vertexFrom=e,this.vertexCount=this.meshData.vertexCount,this.indexFrom=r,this.indexCount=this.meshData.indexData.length},e.writeAllMeshDataToBuffers=function(e,t,r){for(var i=0,n=0,s=0,o=e;s<o.length;s++){var a=o[s];a.writeMeshDataToBuffers(i,t,n,r),i+=a.vertexCount,n+=a.indexCount}},e.prototype._computeSortKey=function(){this._sortKey=(31&this.symbolLevel)<<12|(127&this.zOrder)<<4|7&this.geometryType},e.prototype.serialize=function(e){return e.push(this.geometryType),e.push(this.materialKey),e.push(this.symbolLevel),e.push(this.zOrder),e.push(this.vertexFrom),e.push(this.vertexCount),e.push(this.indexFrom),e.push(this.indexCount),e.push(this.minZoom),e.push(this.maxZoom),e},e.deserialize=function(t,r){var i=t.readInt32(),n=t.readInt32(),s=new e(r.id,i,n);return s.symbolLevel=t.readInt32(),s.zOrder=t.readInt32(),s.vertexFrom=t.readInt32(),s.vertexCount=t.readInt32(),s.indexFrom=t.readInt32(),s.indexCount=t.readInt32(),s.minZoom=t.readInt32(),s.maxZoom=t.readInt32(),s},e}()}.apply(null,i))||(e.exports=n)},1620:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(80)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.color=[0,0,0,0],this.haloColor=[0,0,0,0],this.haloSize=0,this.size=12,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}return e.prototype.acquire=function(e,t,r,i,n,s,o,a,u){this.color=e,this.haloColor=t,this.haloSize=r,this.size=i,this.angle=n,this.offsetX=s,this.offsetY=o,this.hAnchor=a,this.vAnchor=u},e.prototype.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0,this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0,this.haloSize=0,this.size=0,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0},e.pool=new r(e),e}();t.TextProperties=i}.apply(null,i))||(e.exports=n)},1622:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeList=function(e,t){if(null!==t){e.push(t.length);for(var r=0,i=t;r<i.length;r++)i[r].serialize(e);return e}e.push(0)},t.deserializeList=function(e,t,r){for(var i=e.readInt32(),n=new Array(i),s=0;s<n.length;s++)n[s]=t.deserialize(e,r);return n}}.apply(null,i))||(e.exports=n)},1626:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(14),r(1537),r(1511),r(1517),r(284)],void 0===(n=function(e,t,r,i,n,s,o){function a(e){return s.isNumber(e.minDataValue)&&s.isNumber(e.maxDataValue)&&null!=e.minSize&&null!=e.maxSize?n.WGLVVFlag.SIZE_MINMAX_VALUE:(e.expression&&"view.scale"===e.expression||e.valueExpression&&"$view.scale"===e.valueExpression)&&Array.isArray(e.stops)?n.WGLVVFlag.SIZE_SCALE_STOPS:(null!=e.field||e.expression&&"view.scale"!==e.expression||e.valueExpression&&"$view.scale"!==e.valueExpression)&&Array.isArray(e.stops)?n.WGLVVFlag.SIZE_FIELD_STOPS:(null!=e.field||e.expression&&"view.scale"!==e.expression||e.valueExpression&&"$view.scale"!==e.valueExpression)&&null!=e.valueUnit?n.WGLVVFlag.SIZE_UNIT_VALUE:n.WGLVVFlag.NONE}function u(e){return{value:e.value,size:r.toPt(e.size)}}function l(e){return e.map(function(e){return u(e)})}function h(e){if("string"==typeof e||"number"==typeof e)return r.toPt(e);var t=e;return{type:"size",expression:t.expression,stops:l(t.stops)}}function c(e){var t={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if(s.isString(e.field)){if(!e.stops)return null;if(8<e.stops.length)return null;for(var r=e.stops,i=0;i<8;++i){var n=r[Math.min(i,r.length-1)];t.values[i]=n.value,t.opacities[i]=n.opacity}}else{if(!(e.stops&&0<=e.stops.length))return null;var o=e.stops&&0<=e.stops.length&&e.stops[0].opacity;for(i=0;i<8;i++)t.values[i]=1/0,t.opacities[i]=o}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getTypeOfSizeVisualVariable=a,t.getVisualVariableSizeValueRepresentationRatio=function(e,t){if(!e||!t)return e;switch(t){case"radius":case"distance":return 2*e;case"diameter":case"width":return e;case"area":return Math.sqrt(e)}return e},t.stopToSizeStop=u,t.normalizeSizeStops=l,t.normalizeSizeElement=h,t.getVisualVariablesFields=function(e){var t=e&&0<e.length?{}:null;return t&&e.forEach(function(e){var r=e.type;e.field&&(t[r]=e.field)}),t},t.convertVisualVariables=function(e){var t=e&&0<e.length?{}:null,s=t?{}:null;if(!t)return{vvFields:t,vvRanges:s};for(var u=0,f=e;u<f.length;u++){var p=f[u],_=p.type;if(p.field&&(t[_]=p.field),"size"===_){s.size||(s.size={});var d=p;switch(a(d)){case n.WGLVVFlag.SIZE_MINMAX_VALUE:s.size.minMaxValue={minDataValue:d.minDataValue,maxDataValue:d.maxDataValue,minSize:h(d.minSize),maxSize:h(d.maxSize)};break;case n.WGLVVFlag.SIZE_SCALE_STOPS:s.size.scaleStops={stops:l(d.stops)};break;case n.WGLVVFlag.SIZE_FIELD_STOPS:for(var v=[],E=[],y=l(d.stops),I=y.length,T=0;T<6;T++){var m=y[Math.min(T,I-1)];v.push(m.value),E.push(r.pt2px(m.size))}s.size.fieldStops={values:v,sizes:E};break;case n.WGLVVFlag.SIZE_UNIT_VALUE:s.size.unitValue={unit:d.valueUnit,valueRepresentation:d.valueRepresentation}}}else if("color"===_){var L=o.convertVisualVariables([p],{modelSize:null,symbolSize:null,unitInMeters:1,transformation:null});for(s.color=L.color,T=0;T<32;T+=4)i.premultiplyAlpha(s.color.colors,T,!0)}else if("opacity"===_)s.opacity=c(p);else if("rotation"===_){var C=p;s.rotation={type:C.rotationType}}}return{vvFields:t,vvRanges:s}}}.apply(null,i))||(e.exports=n)},1667:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1512),r(1574),r(1737),r(1622)],void 0===(n=function(e,t,r,i,n,s){return function(){function e(e){this.insertAfter=null,this.filterFlags=0,this.id=e,this.displayRecords=[],this.metrics=[]}return e.prototype.copy=function(){var t=new e(this.id);return t.set(this),t},e.prototype.clone=function(){var t=new e(this.id);return t.displayRecords=this.displayRecords.map(function(e){return e.clone()}),t.metrics=this.metrics.map(function(e){return e.clone()}),t.insertAfter=this.insertAfter,t.filterFlags=this.filterFlags,t},e.prototype.set=function(e){this.id=e.id,this.displayRecords=e.displayRecords,this.metrics=e.metrics,this.insertAfter=e.insertAfter,this.filterFlags=e.filterFlags},e.prototype.getLabelVisibility=function(e){var t=!e.filter||!!(this.filterFlags&r.FILTER_FLAG_0),i=!e.effect||e.effect.excludedLabelsVisible||!!(this.filterFlags&r.EFFECT_FLAG_0);return t&&i},e.prototype.setFilterFlag=function(e,t){var r=1<<e;t?this.filterFlags|=r:this.filterFlags&=~r},e.prototype.serialize=function(e){return e.push(this.id),e.push(this.filterFlags),s.serializeList(e,this.metrics),s.serializeList(e,this.displayRecords),e},e.deserialize=function(t){var r=t.readInt32(),o=new e(r);o.filterFlags=t.readInt32();var a={id:r},u=s.deserializeList(t,n.default);return u.length&&(o.metrics=u),o.displayRecords=s.deserializeList(t,i,a),o},e}()}.apply(null,i))||(e.exports=n)},1668:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(214),r(12)],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i,n){this.center=r.vec2f32.fromValues(e,t),this.centerT=r.vec2f32.create(),this.halfWidth=i/2,this.halfHeight=n/2,this.width=i,this.height=n}return Object.defineProperty(e.prototype,"x",{get:function(){return this.center[0]},set:function(e){this.center[0]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.center[1]},set:function(e){this.center[1]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blX",{get:function(){return this.center[0]-this.halfWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blY",{get:function(){return this.center[1]-this.halfHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trX",{get:function(){return this.center[0]+this.halfWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trY",{get:function(){return this.center[1]+this.halfHeight},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.serialize=function(e){return e.writeF32(this.center[0]),e.writeF32(this.center[1]),e.push(this.width),e.push(this.height),e},e.prototype.findCollisionDelta=function(e){var t=Math.abs(e.centerT[0]-this.centerT[0]),r=Math.abs(e.centerT[1]-this.centerT[1]),n=(e.halfWidth+this.halfWidth)/t,s=(e.halfHeight+this.halfHeight)/r,o=Math.min(n,s);return i.log2(o)},e.prototype.extend=function(e){var t=Math.min(this.blX,e.blX),r=Math.min(this.blY,e.blY),i=Math.max(this.trX,e.trX),n=Math.max(this.trY,e.trY);this.width=i-t,this.height=n-r,this.halfWidth=this.width/2,this.halfHeight=this.height/2,this.x=t+this.halfWidth,this.y=r+this.halfHeight},e.deserialize=function(t){return new e(t.readF32(),t.readF32(),t.readInt32(),t.readInt32())},e}();t.default=n}.apply(null,i))||(e.exports=n)},1669:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this._pos=0;var r=t?this._roundToNearest(t,e.BYTES_PER_ELEMENT):40;this._array=new ArrayBuffer(r),this._buffer=new e(this._array),this._ctor=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this._pos},enumerable:!0,configurable:!0}),e.prototype._roundToNearest=function(e,t){var r=Math.round(e);return r+(t-r%t)},e.prototype._ensureSize=function(e){if(this._pos+e>=this._buffer.length){var t=this._roundToNearest(1.5*(this._array.byteLength+e*this._buffer.BYTES_PER_ELEMENT),this._buffer.BYTES_PER_ELEMENT),r=new ArrayBuffer(t),i=new this._ctor(r);i.set(this._buffer,0),this._array=r,this._buffer=i}},e.prototype.writeF32=function(e){this._ensureSize(1);var t=this._pos;return new Float32Array(this._array,4*this._pos,1)[0]=e,this._pos++,t},e.prototype.push=function(e){this._ensureSize(1);var t=this._pos;return this._buffer[this._pos++]=e,t},e.prototype.writeRegion=function(e){this._ensureSize(e.length);var t=this._pos;return this._buffer.set(e,this._pos),this._pos+=e.length,t},e.prototype.buffer=function(){var e=this._array.slice(0,4*this._pos);return this.destroy(),e},e.prototype.destroy=function(){this._array=null,this._buffer=null},e}();t.default=r}.apply(null,i))||(e.exports=n)},1737:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(10),r(214),r(1512),r(1668),r(1622)],void 0===(n=function(e,t,r,i,n,s,o){Object.defineProperty(t,"__esModule",{value:!0});var a=r.getLogger("esri/views/2d/engine/webgl/collisions/Metric"),u=function(){function e(e,t,r,n,s){this.id=e,this.range=t,this.boxes=null,this.minZoom=-1,this.vv=0,this.size=0,this.directionX=0,this.directionY=0,this.offsetX=0,this.offsetY=0,this.anchor=i.vec2f32.fromValues(r,n),this.baseZoom=s}return e.prototype.add=function(e){this.bounds?(this.boxes?this.boxes.push(e):(this.boxes=[this.bounds,e],this.bounds=this.bounds.clone()),this.bounds.extend(e)):this.bounds=e},e.prototype.computeIndex=function(){var e=this.bounds,t=this.anchor[0],r=this.anchor[1],i=Math.floor(t/n.COLLISION_BUCKET_SIZE),s=Math.floor(r/n.COLLISION_BUCKET_SIZE),o=0;(i>n.COLLISION_TILE_BOX_SIZE||s>n.COLLISION_TILE_BOX_SIZE)&&(i=n.COLLISION_TILE_BOX_SIZE,s=n.COLLISION_TILE_BOX_SIZE,o=1),(i<0||s<0)&&(s=i=0,o=1);var a=e.halfWidth+Math.abs(e.center[0]),u=e.halfHeight+Math.abs(e.center[1]),l=2*Math.max(a,u),h=l-t%n.COLLISION_BUCKET_SIZE,c=l-r%n.COLLISION_BUCKET_SIZE;this.xBucket=i,this.yBucket=s,this.xOverflow=Math.ceil(Math.abs(h/n.COLLISION_BUCKET_SIZE))+o,this.yOverflow=Math.ceil(Math.abs(c/n.COLLISION_BUCKET_SIZE))+o},e.prototype.findCollisionDelta=function(e){var t=this.bounds.findCollisionDelta(e.bounds),r=this.boxes&&this.boxes.length,i=e.boxes&&e.boxes.length;return Math.abs(t)>n.COLLISION_MAX_ZOOM_DELTA||!r&&!i?t:r&&i?this._boxesToBoxes(e):r?this._boxesToBox(e):this._boxToBoxes(e)},e.prototype.computeOffset=function(e){e||a.error("mapview-labeling","Unable to compute label offset. Expected an evaluator function but found "+e);var t=e(this.vv),r=isNaN(this.vv)||isNaN(t)?this.size:t;this.offsetX=this.directionX*(r/2+n.COLLISION_PLACEMENT_PADDING),this.offsetY=this.directionY*(r/2+n.COLLISION_PLACEMENT_PADDING)},e.prototype.setVV=function(e,t,r,i){this.vv=e,this.size=t,this.directionX=r,this.directionY=i},e.prototype.clone=function(){var t=new e(this.id,this.range,this.anchor[0],this.anchor[1],this.baseZoom);return t.minZoom=this.minZoom,this.bounds&&(t.bounds=this.bounds.clone()),this.boxes&&(t.boxes=this.boxes.map(function(e){return e.clone()})),t.xBucket=this.xBucket,t.yBucket=this.yBucket,t.xOverflow=this.xOverflow,t.yOverflow=this.yOverflow,t.vv=this.vv,t.size=this.size,t.directionX=this.directionX,t.directionY=this.directionY,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},e.prototype._boxToBoxes=function(e){for(var t=-1/0,r=0,i=e.boxes;r<i.length;r++){var n=i[r],s=this.bounds.findCollisionDelta(n);t=Math.max(s,t)}return t},e.prototype._boxesToBox=function(e){for(var t=this.boxes[0].findCollisionDelta(e.bounds),r=1;r<this.boxes.length;r++){var i=this.boxes[r].findCollisionDelta(e.bounds);t=Math.max(i,t)}return t},e.prototype._boxesToBoxes=function(e){for(var t=-1/0,r=0;r<this.boxes.length;r++)for(var i=this.boxes[r],n=0,s=e.boxes;n<s.length;n++){var o=s[n],a=i.findCollisionDelta(o);t=Math.max(a,t)}return t},e.prototype.serialize=function(e){return e.push(this.id),this.bounds.serialize(e),e.push(this.range.from),e.push(this.range.count),e.push(this.anchor[0]),e.push(this.anchor[1]),e.push(this.baseZoom),e.writeF32(this.vv),e.push(this.size),e.push(this.directionX),e.push(this.directionY),e.push(this.offsetX),e.push(this.offsetY),o.serializeList(e,this.boxes),e},e.deserialize=function(t){var r=t.readInt32(),i=s.default.deserialize(t),n={from:t.readInt32(),count:t.readInt32()},a=t.readInt32(),u=t.readInt32(),l=t.readInt32(),h=t.readF32(),c=t.readInt32(),f=t.readInt32(),p=t.readInt32(),_=t.readInt32(),d=t.readInt32(),v=o.deserializeList(t,s.default),E=new e(r,n,a,u,l);return E.bounds=i,E.boxes=v,E.computeIndex(),E.setVV(h,c,f,p),E.offsetX=_,E.offsetY=d,E},e}();t.default=u}.apply(null,i))||(e.exports=n)},1738:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1517)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,r){this.data=e,this.stride=t,this.vertexCount=r}return e.decode=function(t){return new e(r.allocateTypedArrayBufferwithData(t.data,t.stride),t.stride,t.vertexCount)},e.fromVertexVector=function(t){return new e(r.allocateTypedArrayBufferwithData(t.data.buffer(),t.stride),t.stride,t.vertexCount)},e}();t.default=i;var n=function(){function e(e,t,r){this.geometryType=e,this.indexBuffer=new Uint32Array(t),this.namedBuffers=r}return e.decode=function(t){var r=t.geometryType,n=t.indexBuffer,s={};for(var o in t.namedBuffers)s[o]=i.decode(t.namedBuffers[o]);return new e(r,n,s)},e.fromVertexVectors=function(t){var r=t.geometryType,n=t.indexVector.buffer(),s={};for(var o in t.namedVectors)s[o]=i.fromVertexVector(t.namedVectors[o]);return new e(r,n,s)},e}();t.VertexBuffers=n}.apply(null,i))||(e.exports=n)},2020:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(){this.vertexData=new Map,this.vertexCount=0,this.indexData=[]}return e.prototype.clear=function(){this.vertexData.clear(),this.vertexCount=0,this.indexData=[]},e.prototype.update=function(e,t,r){for(var i in e)this.vertexData.set(i,e[i]);for(var i in this.vertexData)null===e[i]&&this.vertexData.delete(i);this.vertexCount=t,this.indexData=r},e}()}.apply(null,i))||(e.exports=n)}}]);